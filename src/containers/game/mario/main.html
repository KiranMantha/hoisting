<!DOCTYPE html>
<html>

    <head>
        <meta name="mobile-web-app-capable" content="yes">
        <title>Infinite Mario - JavaScript</title>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
        <script type='text/javascript' src='//www.midijs.net/lib/midi.js'></script>
        <link href="style.css" type="text/css" rel="stylesheet" />
        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
    </head>

    <body>
        <canvas id="canvas" width="640" height="480">
            <p>Your browser does not support the canvas element.</p>
        </canvas>
        <div id="mobile-controls">
            <div>
                <div id="control-collection">
                    <button class="btn top" id="btnTop" data-type="38">v</button>
                    <div>
                        <button class="btn" id="btnLeft" data-type="37"><</button>
                        <button class="btn" id="btnRight" data-type="39">></button>
                    </div>
                    <button class="btn" id="btnBottom" data-type="40">v</button>
                </div>
            </div>
            <button class="btn" id="btnFire" data-type="65">A</button>
            <button class="btn" id="btnJump" data-type="83">S</button>
            
        </div>
        <!-- Enjine Includes -->
        <script src="Enjine/core.js"></script>
        <script src="Enjine/gameCanvas.js"></script>
        <script src="Enjine/keyboardInput.js"></script>
        <script src="Enjine/resources.js"></script>
        <script src="Enjine/drawable.js"></script>
        <script src="Enjine/state.js"></script>
        <script src="Enjine/gameTimer.js"></script>
        <script src="Enjine/camera.js"></script>
        <script src="Enjine/drawableManager.js"></script>
        <script src="Enjine/sprite.js"></script>
        <script src="Enjine/spriteFont.js"></script>
        <script src="Enjine/frameSprite.js"></script>
        <script src="Enjine/animatedSprite.js"></script>
        <script src="Enjine/collideable.js"></script>
        <script src="Enjine/application.js"></script>

        <!-- Actual game code -->
        <script src="code/setup.js"></script>
        <script src="code/spriteCuts.js"></script>
        <script src="code/level.js"></script>
        <script src="code/backgroundGenerator.js"></script>
        <script src="code/backgroundRenderer.js"></script>
        <script src="code/improvedNoise.js"></script>
        <script src="code/notchSprite.js"></script>
        <script src="code/character.js"></script>
        <script src="code/levelRenderer.js"></script>
        <script src="code/levelGenerator.js"></script>
        <script src="code/spriteTemplate.js"></script>
        <script src="code/enemy.js"></script>
        <script src="code/fireball.js"></script>
        <script src="code/sparkle.js"></script>
        <script src="code/coinAnim.js"></script>
        <script src="code/mushroom.js"></script>
        <script src="code/particle.js"></script>
        <script src="code/fireFlower.js"></script>
        <script src="code/bulletBill.js"></script>
        <script src="code/flowerEnemy.js"></script>
        <script src="code/shell.js"></script>

        <script src="code/titleState.js"></script>
        <script src="code/loadingState.js"></script>
        <script src="code/loseState.js"></script>
        <script src="code/winState.js"></script>
        <script src="code/mapState.js"></script>
        <script src="code/levelState.js"></script>

        <script src="code/music.js"></script>
        <script>
          function runMarioRun(){
          var isBtnClicked = false;
            var hasTouch =  !!('ontouchstart' in window);
            if(hasTouch) {
                $('#mobile-controls').show();
            } else {
                $('#mobile-controls').hide();
            }            

            $(document).on('enterTitleState', function() {
                $('#control-collection').hide();
            });

            $(document).on('enterGame', function(){
                $('#control-collection').show();
                $('#btnTop').show();
                $('#btnBottom').show();
            });

            $(document).on('enterLevel', function() {
                $('#btnTop').hide();
                $('#btnBottom').hide();
            });

            $(document).ready(function () {
                new Enjine.Application(hasTouch).Initialize(new Mario.LoadingState(hasTouch), 320, 240);                
                $('#control-collection').hide();
            });
        }
        
        </script>
    </body>

</html>