{"version":3,"sources":["containers/game/mario/Enjine/core.js","containers/game/mario/code/setup.js","containers/game/mario/Enjine/gameCanvas.js","containers/game/mario/Enjine/keyboardInput.js","containers/game/mario/Enjine/resources.js","containers/game/mario/Enjine/drawable.js","containers/game/mario/Enjine/state.js","containers/game/mario/Enjine/gameTimer.js","containers/game/mario/Enjine/camera.js","containers/game/mario/Enjine/drawableManager.js","containers/game/mario/Enjine/sprite.js","containers/game/mario/Enjine/spriteFont.js","containers/game/mario/Enjine/frameSprite.js","containers/game/mario/Enjine/animatedSprite.js","containers/game/mario/Enjine/collideable.js","containers/game/mario/Enjine/application.js","containers/game/mario/code/spriteCuts.js","containers/game/mario/code/level.js","containers/game/mario/code/backgroundGenerator.js","containers/game/mario/code/backgroundRenderer.js","containers/game/mario/code/improvedNoise.js","containers/game/mario/code/notchSprite.js","containers/game/mario/code/character.js","containers/game/mario/code/levelRenderer.js","containers/game/mario/code/levelGenerator.js","containers/game/mario/code/spriteTemplate.js","containers/game/mario/code/enemy.js","containers/game/mario/code/fireball.js","containers/game/mario/code/sparkle.js","containers/game/mario/code/coinAnim.js","containers/game/mario/code/mushroom.js","containers/game/mario/code/particle.js","containers/game/mario/code/fireFlower.js","containers/game/mario/code/bulletBill.js","containers/game/mario/code/flowerEnemy.js","containers/game/mario/code/shell.js","containers/game/mario/code/titleState.js","containers/game/mario/code/loadingState.js","containers/game/mario/code/loseState.js","containers/game/mario/code/winState.js","containers/game/mario/code/mapState.js","containers/game/mario/code/levelState.js","containers/game/mario/code/music.js","containers/game/mario/code/runmariorun.js","containers/game/mario/gameinclude.js","containers/LeaderBoardContainer.js","containers/HomeContainer.js","containers/game/GameContainer.js","config.js","App.js","serviceWorker.js","index.js"],"names":["Enjine","Mario","GameCanvas","this","Canvas","Context2D","BackBuffer","BackBufferContext2D","prototype","Initialize","canvasId","resWidth","resHeight","document","getElementById","getContext","createElement","width","height","BeginDraw","clearRect","EndDraw","drawImage","Keys","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Left","Up","Right","Down","Space","KeyboardInput","Pressed","isMobile","self","isGameStarted","el","window","body","onkeydown","event","KeyDownEvent","onkeyup","KeyUpEvent","addEventListener","keyCode","target","getAttribute","parentElement","$","trigger","IsKeyDown","key","PreventScrolling","e","type","indexOf","preventDefault","stopPropagation","cancelBubble","returnValue","Resources","Images","Sounds","Destroy","AddImage","name","src","tempImage","Image","AddImages","array","i","length","ClearImages","Object","RemoveImage","AddSound","maxChannels","index","Audio","ClearSounds","RemoveSound","PlaySound","loop","LoopCallback","play","PauseChannel","paused","pause","PauseSound","ResetChannel","currentTime","StopLoop","ResetSound","removeEventListener","Drawable","ZOrder","Draw","context","GameStateContext","defaultState","State","Enter","ChangeState","newState","Exit","Update","delta","CheckForChange","GameState","GameTimer","FramesPerSecond","LastTime","IntervalFunc","UpdateObject","isPaused","Start","Date","getTime","setInterval","Tick","newTime","Stop","clearInterval","Pause","Camera","DrawableManager","Unsorted","Objects","Add","object","push","AddRange","objects","concat","Clear","splice","Contains","obj","Remove","RemoveAt","RemoveRange","RemoveList","items","j","camera","sort","x1","x2","Sprite","SpriteFont","strings","image","letterWidth","letterHeight","letters","Letters","LetterWidth","LetterHeight","Strings","s","string","String","code","charCodeAt","FrameSprite","FrameX","FrameY","FrameWidth","FrameHeight","AnimationSequence","startRow","startColumn","endRow","endColumn","StartRow","StartColumn","EndRow","EndColumn","SingleFrame","AnimatedSprite","LastElapsed","CurrentSequence","Playing","Looping","Rows","Columns","Sequences","seqEnd","PlaySequence","seqName","StopLooping","StopPlaying","SetFrameWidth","SetFrameHeight","SetColumnCount","columnCount","SetRowCount","rowCount","AddExistingSequence","sequence","AddNewSequence","DeleteSequence","ClearSequences","Collideable","collisionEvent","Base","Width","Height","CollisionEvent","CheckCollision","other","left1","left2","right1","right2","top1","top2","bottom1","bottom2","Application","hasTouch","canvas","timer","stateContext","mobile","SpriteCuts","CreateBlackFont","GetCharArray","CreateRedFont","CreateGreenFont","CreateBlueFont","CreateYellowFont","CreatePinkFont","CreateCyanFont","CreateWhiteFont","y","GetBackgroundSheet","sheet","x","GetLevelSheet","Tile","BlockUpper","BlockAll","BlockLower","Special","Bumpable","Breakable","PickUpable","Animated","Behaviors","LoadBehaviors","b","LevelType","Overground","Underground","Castle","Odds","Straight","HillStraight","Tubes","Jump","Cannons","Level","ExitX","ExitY","Map","Data","SpriteTemplates","GetBlockCapped","GetBlock","SetBlock","block","SetBlockData","data","IsBlocking","xa","ya","blocking","GetSpriteTemplate","SetSpriteTemplate","template","BackgroundGenerator","distant","Distant","Type","SetValues","CreateLevel","level","GenerateOverground","GenerateUnderground","GenerateCastle","range","offs","oh","Math","floor","random","h","h0","h1","t","yy","tt","BackgroundRenderer","distance","Distance","TilesY","Background","xCam","frame","xTileStart","xTileEnd","ImprovedNoise","seed","Shuffle","permutation","tmp","PerlinNoise","n","stepSize","Noise","z","nx","ny","nz","u","Fade","v","w","AA","AB","BA","BB","Lerp","Grad","hash","NotchSprite","XOld","YOld","Xa","Ya","XPic","YPic","XPicO","YPicO","PicWidth","PicHeight","XFlip","YFlip","Visible","Delta","SpriteTemplate","Layer","xPixel","yPixel","save","scale","translate","restore","Move","UpdateNoMove","GetX","GetY","CollideCheck","BumpCheck","xTile","yTile","Release","mario","ShellCollideCheck","shell","FireballCollideCheck","fireball","Character","Large","Fire","Coins","Lives","LevelString","GroundInertia","AirInertia","RunTime","WasOnGround","OnGround","MayJump","Ducking","Sliding","JumpTime","XJumpSpeed","YJumpSpeed","CanShoot","World","Facing","PowerUpTime","XDeathPos","YDeathPos","DeathTime","WinTime","InvulnerableTime","Carried","LastLarge","LastFire","NewLarge","NewFire","world","SetLarge","large","fire","Blink","on","Paused","CalcPic","InvulerableTime","sideWaysSpeed","FireballsOnScreen","AddSprite","Fireball","abs","Sparkle","SubMove","Die","Win","runFrame","collide","xx","GetCoin","Bump","Stomp","targetY","Enemy","BulletBill","Shell","GetHurt","GetFlower","GetMushroom","Kick","Get1Up","LevelRenderer","Bounce","AnimTime","DrawStatic","DrawDynamic","animTime","yo","sin","PI","DrawExit0","bar","yh","DrawExit1","LevelGenerator","TotalOdds","Difficulty","difficulty","ceiling","run","Cannon","BuildStraight","BuildZone","FixWalls","maxLength","BuildHillStraight","BuildTubes","BuildJump","BuildCannons","xo","js","hasStairs","alert","xCannon","cannonHeight","keepGoing","l","xxo","occupied","AddEnemyLine","Decorate","x0","Goomba","xTube","tubeHeight","xPic","Flower","safe","blockMap","blocks","Blockify","to","_xx","_yy","winged","Winged","LastVisibleTick","IsDead","Spawn","dir","FlowerEnemy","DeadTime","FlyDeath","WingTime","NoFireballDeath","AvoidCliffs","RedKoopa","Spiky","xMarioD","MarioCharacter","yMarioD","GreenKoopa","RemoveSprite","xd","yd","SubDraw","facing","Dead","Anim","CheckFireballCollide","FlipX","Life","XPicStart","CoinAnim","Mushroom","Particle","yPic","FireFlower","xD","yD","YStart","CheckShellCollide","TitleState","drawManager","logoY","bounce","font","bgGenerator","bgLayer0","bgLayer1","title","logo","GlobalMapState","MapState","PlayTitleMusic","StopMusic","LoadingState","ImagesLoaded","ScreenColor","ColorDirection","ImageIndex","SoundIndex","canPlayType","complete","ww","wh","wr","innerHeight","innerWidth","round","attr","fillStyle","fillRect","color","parseInt","LoseState","gameOver","wasKeyDown","WinState","waitTime","kissing","MapTile","Grass","Water","Road","Decoration","XMario","YMario","XMarioA","YMarioA","MoveTime","LevelId","Farthest","XFarthestCap","YFarthestCap","MapImage","MapContext","CanEnterLevel","EnterLevel","LevelDifficulty","WorldNumber","NextWorld","WaterSprite","DecoSprite","HelpSprite","SmallMario","LargeMario","FontShadow","Font","PlayMapMusic","generated","GenerateLevel","RenderStatic","n0","n1","dec","xo0","yo0","xo1","yo1","lowestX","lowestY","connection","FindConnection","FindCaps","Connect","xSource","ySource","maxDistance","xTarget","yTarget","d","DrawRoad","y0","y1","xFirst","xCap","yCap","roads","Travel","depth","IsRoad","IsWater","TryWalking","xt","yt","CalcDistance","LevelWon","LevelState","BgLayer","Sprites","SpritesToAdd","SpritesToRemove","ShellsToCheck","FireballsToCheck","TimeLeft","StartTime","GotoMapState","GotoLoseState","levelGenerator","scrollSpeed","bgLevelGenerator","PlayOvergroundMusic","PlayUndergroundMusic","PlayCastleMusic","sprite","hasShotCannon","st","time","DrawStringShadow","RenderBlackout","radius","xp","yp","cos","beginPath","moveTo","lineTo","closePath","fill","canBreakBricks","BumpInto","MIDIjs","midifiles","PlayMusic","stop","console","error","runMarioRun","show","hide","ready","rMR","LeaderBoardContainer","props","state","oracleID","localStorage","getItem","history","teamNames","className","map","team","alt","onClick","playGame","Tabs","defaultActiveKey","id","Tab","eventKey","renderMyScorecard","renderMyTeamScorecard","renderPeopleBoard","renderTeamLeaderBoard","Component","withRouter","HomeContainer","setItem","class","onSubmit","doLogin","htmlFor","placeholder","required","autoFocus","onChange","setState","value","GameContainer","screen","orientation","querySelector","setAttribute","onOrientationChange","log","removeAttribute","onchange","lockOrientation","alwaysRender","data-type","aria-hidden","CONFIG","App","checkTimeout","dt","endTime","removeItem","location","pathname","href","path","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","URL","process","origin","fetch","response","contentType","headers","get","status","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.47a752bf.chunk.js","sourcesContent":["/**\n\tDefine the Enjine namespace and any other miscellaneous setup.\n\tCode by Rob Kleffner, 2011\n*/\n\nvar Enjine = {};\nexport default Enjine;","/**\n\tJust create the global mario object.\n\tCode by Rob Kleffner, 2011\n*/\nvar Mario = {};\n export default Mario;\n","/**\n\tBase class to represent a double buffered canvas object.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.GameCanvas = function () {\n\tthis.Canvas = null;\n\tthis.Context2D = null;\n\tthis.BackBuffer = null;\n\tthis.BackBufferContext2D = null;\n};\n\nEnjine.GameCanvas.prototype = {\n\tInitialize: function (canvasId, resWidth, resHeight) {\n\t\tthis.Canvas = document.getElementById(canvasId);\n\t\tthis.Context2D = this.Canvas.getContext(\"2d\");\n\t\tthis.BackBuffer = document.createElement(\"canvas\");\n\t\tthis.BackBuffer.width = resWidth;\n\t\tthis.BackBuffer.height = resHeight;\n\t\tthis.BackBufferContext2D = this.BackBuffer.getContext(\"2d\");\n\t},\n\n\tBeginDraw: function () {\n\t\tthis.BackBufferContext2D.clearRect(0, 0, this.BackBuffer.width, this.BackBuffer.height);\n\t\tthis.Context2D.clearRect(0, 0, this.Canvas.width, this.Canvas.height);\n\t},\n\n\tEndDraw: function () {\n\t\tthis.Context2D.drawImage(this.BackBuffer, 0, 0, this.BackBuffer.width, this.BackBuffer.height, 0, 0, this.Canvas.width, this.Canvas.height);\n\t}\n};","/**\n\tClass that helps to manage keyboard input.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nimport $ from \"jquery\";\n\nEnjine.Keys = {\n    A: 65,\n    B: 66,\n    C: 67,\n    D: 68,\n    E: 69,\n    F: 70,\n    G: 71,\n    H: 72,\n    I: 73,\n    J: 74,\n    K: 75,\n    L: 76,\n    M: 77,\n    N: 78,\n    O: 79,\n    P: 80,\n    Q: 81,\n    R: 82,\n    S: 83,\n    T: 84,\n    U: 85,\n    V: 86,\n    W: 87,\n    X: 88,\n    Y: 89,\n    Z: 80,\n    Left: 37,\n    Up: 38,\n    Right: 39,\n    Down: 40,\n    Space: 32\n};\n\nEnjine.KeyboardInput = {\n    Pressed: {},\n\n    Initialize: function (isMobile) {\n        var self = this;\n        var isGameStarted = false;\n        var el =   window.document ||  window.document.body ||   window;\n        el.onkeydown = function (event) {\n            self.KeyDownEvent(event);\n        }\n        el.onkeyup = function (event) {\n            self.KeyUpEvent(event);\n        }\n        if (isMobile) {\n            el.addEventListener('touchstart', function (event) {\n\n                var keyCode =  event.target.getAttribute(\"data-type\") || event.target.parentElement.getAttribute(\"data-type\") ;\n                if (!isGameStarted && keyCode === '83') {\n                    isGameStarted = !isGameStarted;\n                    $(document).trigger('enterGame');\n                }\n                event.keyCode = keyCode;\n                self.KeyDownEvent(event);\n            }, false);\n            el.addEventListener('touchend', function (event) {\n                // event.keyCode = event.target.getAttribute(\"data-type\");\n                event.keyCode =  event.target.getAttribute(\"data-type\") || event.target.parentElement.getAttribute(\"data-type\") ;\n                self.KeyUpEvent(event);\n            }, false);\n        }\n    },\n\n    IsKeyDown: function (key) {\n        if (this.Pressed[key] != null)\n            return this.Pressed[key];\n        return false;\n    },\n\n    KeyDownEvent: function (event) {\n        this.Pressed[event.keyCode] = true;\n        this.PreventScrolling(event);\n    },\n\n    KeyUpEvent: function (event) {\n        this.Pressed[event.keyCode] = false;\n        this.PreventScrolling(event);\n    },\n\n    PreventScrolling: function (event) {        \n        // 37: left, 38: up, 39: right, 40: down\n        if (event.keyCode >= 32 && event.keyCode <= 40 ) {\n            var e = event || window.event;\n            if(e.type.indexOf('touch')!==0){\n            e.preventDefault && e.preventDefault();\n            e.stopPropagation && e.stopPropagation();\n            e.cancelBubble = true;\n            e.returnValue = false;\n            }\n        }\n    }\n};","/**\n\tRepresents a simple static sprite.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.Resources = {\n    Images: {},\n    Sounds: {},\n\n    Destroy: function() {\n        delete this.Images;\n        delete this.Sounds;\n        return this;\n    },\n    \n    //***********************/\n    //Images\n    AddImage: function(name, src) {\n        var tempImage = new Image();\n\t\tthis.Images[name] = tempImage;\n        tempImage.src = src;\n        return this;\n\t},\n\t\n\tAddImages: function(array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n            var tempImage = new Image();\n            this.Images[array[i].name] = tempImage;\n            tempImage.src = array[i].src;\n        }\n        return this;\n\t},\n\t\n\tClearImages: function() {\n\t\tdelete this.Images;\n        this.Images = new Object();\n        return this;\n\t},\n\t\n\tRemoveImage: function(name) {\n\t\tdelete this.Images[name];\n\t\treturn this;\n\t},\n    \n    //***********************/\n    //Sounds\n    AddSound: function(name, src, maxChannels) {\n        this.Sounds[name] = [];\n        this.Sounds[name].index = 0;\n        if (!maxChannels) {\n        \tmaxChannels = 3;\n        }\n        for (var i = 0; i < maxChannels; i++) {\n        \tthis.Sounds[name][i] = new Audio(src);\t\n        }\n        return this;\n    },\n    \n    ClearSounds: function() {\n        delete this.Sounds;\n        this.Sounds = {};\n        return this;\n    },\n    \n    RemoveSound: function(name) {\n        delete this.Sounds[name];\n        return this;\n    },\n    \n    PlaySound: function(name, loop) {\n    \tif (this.Sounds[name].index >= this.Sounds[name].length) {\n    \t\tthis.Sounds[name].index = 0;\t\n    \t}\n    \tif (loop) {\n    \t\tthis.Sounds[name][this.Sounds[name].index].addEventListener(\"ended\", this.LoopCallback, false);\n    \t}\n    \tthis.Sounds[name][this.Sounds[name].index++].play();\n    \treturn this.Sounds[name].index;\n    },\n    \n    PauseChannel: function(name, index) {\n    \tif (!this.Sounds[name][index].paused) {\n    \t\tthis.Sounds[name][index].pause();\n    \t}\n    \treturn this;\n    },\n    \n    PauseSound: function(name) {\n    \tfor (var i = 0; i < this.Sounds[name].length; i++) {\n    \t\tif (!this.Sounds[name][i].paused) {\n    \t\t\tthis.Sounds[name][i].pause();\n    \t\t}\n    \t}\n    \treturn this;\n    },\n    \n    ResetChannel: function(name, index) {\n    \tthis.Sounds[name][index].currentTime = 0;\n    \tthis.StopLoop(name, index);\n    \treturn this;\n    },\n    \n    ResetSound: function(name) {\n    \tfor (var i = 0; i < this.Sounds[name].length; i++) {\n    \t\tthis.Sounds[name].currentTime = 0;\n    \t\tthis.StopLoop(name, i);\n    \t}\n    \treturn this;\n    },\n    \n    StopLoop: function(name, index) {\n    \tthis.Sounds[name][index].removeEventListener(\"ended\", this.LoopCallback, false);\t\n    },\n    \n    LoopCallback: function() {\n    \tthis.currentTime = -1;\n    \tthis.play();\n    }\n};","/**\n\tBase class for all drawable objects, makes ordering automatic.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.Drawable = function() {\n    this.ZOrder = 0;\n};\n\nEnjine.Drawable.prototype = {\n    Draw: function(context) { }\n};","/**\n\tSimple State pattern implementation for game states.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.GameStateContext = function(defaultState) {\n    this.State = null;\n    \n    if (defaultState != null) {\n        this.State = defaultState;\n        this.State.Enter();\n    }\n};\n\nEnjine.GameStateContext.prototype = {\n    ChangeState: function(newState) {\n        if (this.State != null) {\n            this.State.Exit();\n        }\n        this.State = newState;\n        this.State.Enter();\n    },\n    \n    Update: function(delta) {\n        this.State.CheckForChange(this);\n        this.State.Update(delta);\n    },\n    \n    Draw: function(delta) {\n        this.State.Draw(delta);\n    }\n};\n\n/**\n * Base game state class to at least ensure that all the functions exist.\n */ \nEnjine.GameState = function() { }\n\nEnjine.GameState.prototype = {\n    Enter: function () {},\n    Exit: function() {},\n    Update: function(delta) {},\n    Draw: function(context) {},\n    CheckForChange: function(context) {}\n};","/**\n\tRepresents a very basic game timer.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.GameTimer = function() {\n    this.FramesPerSecond = 1000 / 30;\n\tthis.LastTime = 0;\n    this.IntervalFunc = null;\n    this.UpdateObject = null;\n    this.isPaused = false;\n};\n\nEnjine.GameTimer.prototype = {\n    Start: function() {\n        this.LastTime = new Date().getTime();\n        var self = this;\n        this.IntervalFunc = setInterval(function() { if (!this.isPaused){self.Tick()} }, this.FramesPerSecond);\n    },\n    \n    Tick: function() {\n        if (this.UpdateObject != null) {\n            \n            var newTime = new Date().getTime();\n    \t\tvar delta = (newTime - this.LastTime) / 1000;\n    \t\tthis.LastTime = newTime;\n            \n            this.UpdateObject.Update(delta);\n            \n        }\n    },\n    \n    Stop: function() {\n        clearInterval(this.IntervalFunc);\n    },\n\n    Pause: function() {\n      this.isPaused = !this.isPaused;\n    }\n};","/**\n\tRepresents a camera used to offset drawing of sprites in the world.\n\tCode by Rob Kleffner, 2011\n*/\n\nimport Enjine from './core.js';\n\nEnjine.Camera = function() {\n\tthis.X = 0;\n\tthis.Y = 0;\n};","/**\n\tClass to help manage and draw a collection of sprites.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.DrawableManager = function () {\n\tthis.Unsorted = true;\n\tthis.Objects = [];\n};\n\nEnjine.DrawableManager.prototype = {\n\tAdd: function (object) {\n\t\tthis.Objects.push(object);\n\t\tthis.Unsorted = true;\n\t},\n\n\tAddRange: function (objects) {\n\t\tthis.Objects = this.Objects.concat(objects);\n\t\tthis.Unsorted = true;\n\t},\n\n\tClear: function () {\n\t\tthis.Objects.splice(0, this.Objects.length);\n\t},\n\n\tContains: function (obj) {\n\t\tvar i = this.Objects.length;\n\t\twhile (i--) {\n\t\t\tif (this.Objects[i] === obj) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tRemove: function (object) {\n\t\tvar index = this.Objects.indexOf(object);\n\t\tthis.Objects.splice(index, 1);\n\t},\n\n\tRemoveAt: function (index) {\n\t\tthis.Objects.splice(index, 1);\n\t},\n\n\tRemoveRange: function (index, length) {\n\t\tthis.Objects.splice(index, length);\n\t},\n\n\tRemoveList: function (items) {\n\t\tvar i = 0,\n\t\t\tj = 0;\n\t\tfor (j = 0; j < items.length; i++) {\n\t\t\tfor (i = 0; i < this.Objects.length; i++) {\n\t\t\t\tif (this.Objects[i] === items[j]) {\n\t\t\t\t\tthis.Objects.splice(i, 1);\n\t\t\t\t\titems.splice(j, 1);\n\t\t\t\t\tj--;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tUpdate: function (delta) {\n\t\tvar i = 0;\n\t\tfor (i = 0; i < this.Objects.length; i++) {\n\t\t\tif (this.Objects[i].Update) {\n\t\t\t\tthis.Objects[i].Update(delta);\n\t\t\t}\n\t\t}\n\t},\n\n\tDraw: function (context, camera) {\n\n\t\t//sort the sprites based on their 'z depth' to get the correct drawing order\n\t\tif (this.Unsorted) {\n\t\t\tthis.Unsorted = false;\n\t\t\tthis.Objects.sort(function (x1, x2) {\n\t\t\t\treturn x1.ZOrder - x2.ZOrder;\n\t\t\t});\n\t\t}\n\n\t\tvar i = 0;\n\t\tfor (i = 0; i < this.Objects.length; i++) {\n\t\t\tif (this.Objects[i].Draw) {\n\t\t\t\tthis.Objects[i].Draw(context, camera);\n\t\t\t}\n\t\t}\n\t}\n};","/**\n\tRepresents a simple static sprite.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.Sprite = function() {\n\tthis.X = 0;\n\tthis.Y = 0;\n\tthis.Image = null;\n};\n\nEnjine.Sprite.prototype = new Enjine.Drawable();\n\nEnjine.Sprite.prototype.Draw = function(context, camera) {\n\tcontext.drawImage(this.Image, this.X - camera.X, this.Y - camera.Y);\n};","/**\n\tRepresents a sprite sheet for a font.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.SpriteFont = function(strings, image, letterWidth, letterHeight, letters) {\n    this.Image = image;\n    this.Letters = letters;\n    this.LetterWidth = letterWidth;\n    this.LetterHeight = letterHeight;\n    this.Strings = strings;\n};\n\nEnjine.SpriteFont.prototype = new Enjine.Drawable();\n\nEnjine.SpriteFont.prototype.Draw = function(context, camera) {\n    for (var s = 0; s < this.Strings.length; s++) {\n        var string = this.Strings[s];\n        for (var i = 0; i < string.String.length; i++) {\n            var code = string.String.charCodeAt(i);\n            context.drawImage(this.Image, this.Letters[code].X, this.Letters[code].Y, this.LetterWidth, this.LetterHeight, string.X + this.LetterWidth * (i + 1), string.Y, this.LetterWidth, this.LetterHeight);\n        }\n    }\n};","/**\n\tFor sprites that are only a portion of an image.\n\tCode by Rob Kleffner, 2011\n*/\n\nimport Enjine from './core.js';\n\nEnjine.FrameSprite = function() {\n    this.FrameX = 0;\n    this.FrameY = 0;\n\tthis.FrameWidth = 0;\n    this.FrameHeight = 0;\n};\n\nEnjine.FrameSprite.prototype = new Enjine.Sprite();\n\nEnjine.FrameSprite.prototype.Draw = function(context, camera) {\n    context.drawImage(this.Image, this.FrameX, this.FrameY, this.FrameWidth, this.FrameHeight, this.X - camera.X, this.Y - camera.Y, this.FrameWidth, this.FrameHeight);\n};","/**\n    Class to represent an uninterrupted set of frames to animate.\n*/ \n\nimport Enjine from './core.js';\n\nEnjine.AnimationSequence = function(startRow, startColumn, endRow, endColumn) {\n    this.StartRow = startRow;\n    this.StartColumn = startColumn;\n    this.EndRow = endRow;\n    this.EndColumn = endColumn;\n    \n    //sometimes in an animated sprite, we want it to behave like a regular sprite (static)\n    //this variable will keep it from wasting time updating animation when the sequence\n    //is only a single frame long, for things like standing or pausing action\n    this.SingleFrame = false;\n    \n    if ((this.StartRow == this.EndRow) && (this.StartColumn == this.EndColumn)) {\n        this.SingleFrame = true;\n    }\n};\n\n/**\n\tSubclass that extends the regular sprite with animation capability.\n\tCode by Rob Kleffner, 2011\n*/\n\nEnjine.AnimatedSprite = function() {\n    this.LastElapsed = 0;\n    this.FramesPerSecond = 1 / 20;\n    this.CurrentSequence = null;\n    this.Playing = false;\n    this.Looping = false;\n    this.Rows = 0;\n    this.Columns = 0;\n    \n    //cheesy dictionary hack to make animation sequences more accessible\n    this.Sequences = new Object();\n};\n\nEnjine.AnimatedSprite.prototype = new Enjine.FrameSprite();\n\nEnjine.AnimatedSprite.prototype.Update = function(delta) {\n    if (this.CurrentSequence.SingleFrame) {\n        return;\n    }\n    if (!this.Playing) {\n        return;\n    }\n\n    this.LastElapsed -= delta;\n    \n    if (this.LastElapsed > 0) {\n        return;\n    }\n    \n    this.LastElapsed = this.FramesPerSecond;\n    this.FrameX += this.FrameWidth;\n    \n    //increment the frame\n    if (this.FrameX > (this.Image.width - this.FrameWidth)) {\n        this.FrameX = 0;\n        this.FrameY += this.FrameHeight;\n        \n        if (this.FrameY > (this.Image.height - this.FrameHeight)) {\n            this.FrameY = 0;\n        }\n    }\n    \n    //check if it's at the end of the animation sequence\n    var seqEnd = false;\n    if ((this.FrameX > (this.CurrentSequence.EndColumn * this.FrameWidth)) && (this.FrameY == (this.CurrentSequence.EndRow * this.FrameHeight))) {\n        seqEnd = true;\n    } else if (this.FrameX == 0 && (this.FrameY > (this.CurrentSequence.EndRow * this.FrameHeight))) {\n        seqEnd = true;\n    }\n    \n    //go back to the beginning if looping, otherwise stop playing\n    if (seqEnd) {\n        if (this.Looping) {\n            this.FrameX = this.CurrentSequence.StartColumn * this.FrameWidth;\n            this.FrameY = this.CurrentSequence.StartRow * this.FrameHeight;\n        } else {\n            this.Playing = false;\n        }\n    }\n};\n\nEnjine.AnimatedSprite.prototype.PlaySequence = function(seqName, loop) {\n    this.Playing = true;\n    this.Looping = loop;\n    this.CurrentSequence = this.Sequences[\"seq_\" + seqName];\n    this.FrameX = this.CurrentSequence.StartColumn * this.FrameWidth;\n    this.FrameY = this.CurrentSequence.StartRow * this.FrameHeight;\n};\n\nEnjine.AnimatedSprite.prototype.StopLooping = function() {\n    this.Looping = false;\n};\n\nEnjine.AnimatedSprite.prototype.StopPlaying = function() {\n    this.Playing = false;\n};\n\nEnjine.AnimatedSprite.prototype.SetFrameWidth = function(width) {\n    this.FrameWidth = width;\n    this.Rows = this.Image.width / this.FrameWidth;\n};\n\nEnjine.AnimatedSprite.prototype.SetFrameHeight = function(height) {\n    this.FrameHeight = height;\n    this.Columns = this.Image.height / this.FrameHeight;\n};\n\nEnjine.AnimatedSprite.prototype.SetColumnCount = function(columnCount) {\n    this.FrameWidth = this.Image.width / columnCount;\n    this.Columns = columnCount;\n};\n\nEnjine.AnimatedSprite.prototype.SetRowCount = function(rowCount) {\n    this.FrameHeight = this.Image.height / rowCount;\n    this.Rows = rowCount;\n};\n\nEnjine.AnimatedSprite.prototype.AddExistingSequence = function(name, sequence) {\n    this.Sequences[\"seq_\" + name] = sequence;\n};\n\nEnjine.AnimatedSprite.prototype.AddNewSequence = function(name, startRow, startColumn, endRow, endColumn) {\n    this.Sequences[\"seq_\" + name] = new Enjine.AnimationSequence(startRow, startColumn, endRow, endColumn);\n};\n\nEnjine.AnimatedSprite.prototype.DeleteSequence = function(name) {\n    if (this.Sequences[\"seq_\" + name]  != null) {\n        delete this.Sequences[\"seq_\" + name];\n    }\n};\n\nEnjine.AnimatedSprite.prototype.ClearSequences = function() {\n    delete this.Sequences;\n    this.Sequences = new Object();\n};","/**\n\tBasic bounding box collision object.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.Collideable = function(obj, width, height, collisionEvent) {\n    this.Base = obj;\n    this.X = obj.X;\n    this.Y = obj.Y;\n    this.Width = width;\n    this.Height = height;\n    \n    if (collisionEvent != null) {\n        this.CollisionEvent = collisionEvent;\n    } else {\n        this.CollisionEvent = function() {}\n    }\n};\n\nEnjine.Collideable.prototype = {\n    Update: function() {\n        this.X = this.Base.X;\n        this.Y = this.Base.Y;\n    },\n    \n    CheckCollision: function(other) {\n        var left1 = this.X, left2 = other.X;\n        var right1 = (this.X + this.Width), right2 = (other.X + other.Width);\n        var top1 = this.Y, top2 = other.Y;\n        var bottom1 = (this.Y + this.Height), bottom2 = other.Y + other.Height;\n        \n        if (bottom1 < top2) {\n            return;\n        }\n        if (top1 > bottom2) {\n            return;\n        }\n        if (right1 < left2) {\n            return;\n        }\n        if (left1 > right2) {\n            return;\n        }\n        \n        //collision, fire the events!\n        this.CollisionEvent(other);\n        other.CollisionEvent(this);\n    }\n};","/**\n\tSimple demo of the engine.\n\tCode by Rob Kleffner, 2011\n*/\nimport Enjine from './core.js';\n\nEnjine.Application = function(hasTouch) {\n    this.canvas = null;\n    this.timer = null;\n    this.stateContext = null;\n    this.mobile = false;\n    if(hasTouch) { this.mobile = true; }\n};\n\nEnjine.Application.prototype = {\n    Update: function(delta) {\n        \n        this.stateContext.Update(delta);\n        \n        this.canvas.BeginDraw();\n        \n        this.stateContext.Draw(this.canvas.BackBufferContext2D);\n        \n        this.canvas.EndDraw();\n    },\n    \n    Initialize: function(defaultState, resWidth, resHeight) {\n        this.canvas = new Enjine.GameCanvas();\n        this.timer = new Enjine.GameTimer();\n        Enjine.KeyboardInput.Initialize(this.mobile);\n        this.canvas.Initialize(\"canvas\", resWidth, resHeight);\n        this.timer.UpdateObject = this;\n        defaultState.mobile = this.mobile;\n        this.stateContext = new Enjine.GameStateContext(defaultState);\n        \n        this.timer.Start();\n\n         return this;\n\n    }\n};","/**\n\tHelper to cut up the sprites.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.SpriteCuts = {\n    \n    /*********************\n     * Font related\n     ********************/         \n    CreateBlackFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(0));\n    },\n    \n    CreateRedFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(8));\n    },\n    \n    CreateGreenFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(16));\n    },\n    \n    CreateBlueFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(24));\n    },\n    \n    CreateYellowFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(32));\n    },\n    \n    CreatePinkFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(40));\n    },\n    \n    CreateCyanFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(48));\n    },\n    \n    CreateWhiteFont: function() {\n        return new Enjine.SpriteFont([], Enjine.Resources.Images[\"font\"], 8, 8, this.GetCharArray(56));\n    },\n    \n    GetCharArray: function(y) {\n        var letters = [];\n        var i = 0;\n        for (i = 32; i < 127; i++) {\n            letters[i] = { X: (i - 32) * 8, Y: y };\n        }\n        return letters;\n    },\n    \n    /*********************\n     * Spritesheet related\n     ********************/\n    GetBackgroundSheet: function() {\n        var sheet = [];\n        var x = 0, y = 0, width = Enjine.Resources.Images[\"background\"].width / 32, height = Enjine.Resources.Images[\"background\"].height / 32;\n        \n        for (x = 0; x < width; x++) {\n            sheet[x] = [];\n        \n            for (y = 0; y < height; y++) {\n                sheet[x][y] = { X: x * 32, Y: y * 32, Width: 32, Height: 32 };\n            }\n        }\n        return sheet;\n    },\n    \n    GetLevelSheet: function() {\n        var sheet = [], x = 0, y = 0, width = Enjine.Resources.Images[\"map\"].width / 16, height = Enjine.Resources.Images[\"map\"].height / 16;\n        \n        for (x = 0; x < width; x++) {\n            sheet[x] = [];\n            \n            for (y = 0; y < height; y++) {\n                sheet[x][y] = { X: x * 16, Y: y * 16, Width: 16, Height: 16 };\n            }\n        }\n        return sheet;\n    }\n};","/**\n\tRepresents a playable level in the game.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Tile = {\n    BlockUpper: 1 << 0,\n    BlockAll: 1 << 1,\n    BlockLower: 1 << 2,\n    Special: 1 << 3,\n    Bumpable: 1 << 4,\n    Breakable: 1 << 5,\n    PickUpable: 1 << 6,\n    Animated: 1 << 7,\n    Behaviors: [],\n    \n    LoadBehaviors: function() {\n        var b = [];\n        b[0] = 0;\n        b[1] = 20;\n        b[2] = 28;\n        b[3] = 0;\n        b[4] = 130;\n        b[5] = 130;\n        b[6] = 130;\n        b[7] = 130;\n        b[8] = 2;\n        b[9] = 2;\n        b[10] = 2;\n        b[11] = 2;\n        b[12] = 2;\n        b[13] = 0;\n        b[14] = 138;\n        b[15] = 0;\n        b[16] = 162;\n        b[17] = 146;\n        b[18] = 154;\n        b[19] = 162;\n        b[20] = 146;\n        b[21] = 146;\n        b[22] = 154;\n        b[23] = 146;\n        b[24] = 2;\n        b[25] = 0;\n        b[26] = 2;\n        b[27] = 2;\n        b[28] = 2;\n        b[29] = 0;\n        b[30] = 2;\n        b[31] = 0;\n        b[32] = 192;\n        b[33] = 192;\n        b[34] = 192;\n        b[35] = 192;\n        b[36] = 0;\n        b[37] = 0;\n        b[38] = 0;\n        b[39] = 0;\n        b[40] = 2;\n        b[41] = 2;\n        b[42] = 0;\n        b[43] = 0;\n        b[44] = 0;\n        b[45] = 0;\n        b[46] = 2;\n        b[47] = 0;\n        b[48] = 0;\n        b[49] = 0;\n        b[50] = 0;\n        b[51] = 0;\n        b[52] = 0;\n        b[53] = 0;\n        b[54] = 0;\n        b[55] = 0;\n        b[56] = 2;\n        b[57] = 2;\n        \n        var i = 0;\n        for (i = 58; i < 128; i++) {\n            b[i] = 0;\n        }\n        \n        b[128] = 2;\n        b[129] = 2;\n        b[130] = 2;\n        b[131] = 0;\n        b[132] = 1;\n        b[133] = 1;\n        b[134] = 1;\n        b[135] = 0;\n        b[136] = 2;\n        b[137] = 2;\n        b[138] = 2;\n        b[139] = 0;\n        b[140] = 2;\n        b[141] = 2;\n        b[142] = 2;\n        b[143] = 0;\n        b[144] = 2;\n        b[145] = 0;\n        b[146] = 2;\n        b[147] = 0;\n        b[148] = 0;\n        b[149] = 0;\n        b[150] = 0;\n        b[151] = 0;\n        b[152] = 2;\n        b[153] = 2;\n        b[154] = 2;\n        b[155] = 0;\n        b[156] = 2;\n        b[157] = 2;\n        b[158] = 2;\n        b[159] = 0;\n        b[160] = 2;\n        b[161] = 2;\n        b[162] = 2;\n        b[163] = 0;\n        b[164] = 0;\n        b[165] = 0;\n        b[166] = 0;\n        b[167] = 0;\n        b[168] = 2;\n        b[169] = 2;\n        b[170] = 2;\n        b[171] = 0;\n        b[172] = 2;\n        b[173] = 2;\n        b[174] = 2;\n        b[175] = 0;\n        b[176] = 2;\n        b[177] = 2;\n        b[178] = 2;\n        b[179] = 0;\n        b[180] = 1;\n        b[181] = 1;\n        b[182] = 1;\n        \n        for (i = 183; i < 224; i++) {\n            b[i] = 0;\n        }\n        \n        b[224] = 1;\n        b[225] = 1;\n        b[226] = 1;\n        \n        for (i = 227; i < 256; i++) {\n            b[i] = 0;\n        }\n        \n        this.Behaviors = b;\n    }\n};\n\nMario.LevelType = {\n    Overground: 0,\n    Underground: 1,\n    Castle: 2\n};\n\nMario.Odds = {\n    Straight: 0,\n    HillStraight: 1,\n    Tubes: 2,\n    Jump: 3,\n    Cannons: 4\n};\n\nMario.Level = function(width, height) {\n    this.Width = width;\n    this.Height = height;\n    this.ExitX = 10;\n    this.ExitY = 10;\n    \n    this.Map = [];\n    this.Data = [];\n    this.SpriteTemplates = [];\n    \n    var x = 0, y = 0;\n    for (x = 0; x < this.Width; x++) {\n        this.Map[x] = [];\n        this.Data[x] = [];\n        this.SpriteTemplates[x] = [];\n        \n        for (y = 0; y < this.Height; y++) {\n            this.Map[x][y] = 0;\n            this.Data[x][y] = 0;\n            this.SpriteTemplates[x][y] = null;\n        }\n    }\n};\n\nMario.Level.prototype = {\n    Update: function() {\n        var x = 0, y = 0;\n        for (x = 0; x < this.Width; x++) {\n            for (y = 0; y < this.Height; y++) {\n                if (this.Data[x][y] > 0) {\n                    this.Data[x][y]--;\n                }\n            }\n        }\n    },\n    \n    GetBlockCapped: function(x, y) {\n        if (x < 0) { x = 0; }\n        if (y < 0) { y = 0; }\n        if (x >= this.Width) { x = this.Width - 1; }\n        if (y >= this.Height) { y = this.Height - 1; }\n        return this.Map[x][y];\n    },\n    \n    GetBlock: function(x, y) {\n        if (x < 0) { x = 0; }\n        if (y < 0) { return 0; }\n        if (x >= this.Width) { x = this.Width - 1; }\n        if (y >= this.Height) { y = this.Height - 1; }\n        return this.Map[x][y];\n    },\n    \n    SetBlock: function(x, y, block) {\n        if (x < 0) { return; }\n        if (y < 0) { return; }\n        if (x >= this.Width) { return; }\n        if (y >= this.Height) { return; }\n        this.Map[x][y] = block;\n    },\n    \n    SetBlockData: function(x, y, data) {\n        if (x < 0) { return; }\n        if (y < 0) { return; }\n        if (x >= this.Width) { return; }\n        if (y >= this.Height) { return; }\n        this.Data[x][y] = data;\n    },\n    \n    IsBlocking: function(x, y, xa, ya) {\n        var block = this.GetBlock(x, y);\n        var blocking = ((Mario.Tile.Behaviors[block & 0xff]) & Mario.Tile.BlockAll) > 0;\n        blocking |= (ya > 0) && ((Mario.Tile.Behaviors[block & 0xff]) & Mario.Tile.BlockUpper) > 0;\n        blocking |= (ya < 0) && ((Mario.Tile.Behaviors[block & 0xff]) & Mario.Tile.BlockLower) > 0;\n\n        return blocking;\n    },\n    \n    GetSpriteTemplate: function(x, y) {\n        if (x < 0) { return null; }\n        if (y < 0) { return null; }\n        if (x >= this.Width) { return null; }\n        if (y >= this.Height) { return null; }\n        return this.SpriteTemplates[x][y];\n    },\n    \n    SetSpriteTemplate: function(x, y, template) {\n        if (x < 0) { return; }\n        if (y < 0) { return; }\n        if (x >= this.Width) { return; }\n        if (y >= this.Height) { return; }\n        this.SpriteTemplates[x][y] = template;\n    }\n};","/**\n\tGenerates the backgrounds for a level.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.BackgroundGenerator = function(width, height, distant, type) {\n    this.Width = width;\n    this.Height = height;\n    this.Distant = distant;\n    this.Type = type;\n};\n\nMario.BackgroundGenerator.prototype = {\n    SetValues: function(width, height, distant, type) {\n        this.Width = width;\n        this.Height = height;\n        this.Distant = distant;\n        this.Type = type;\n    },\n\n    CreateLevel: function() {\n        var level = new Mario.Level(this.Width, this.Height);\n        switch (this.Type) {\n            case Mario.LevelType.Overground:\n                this.GenerateOverground(level);\n                break;\n            case Mario.LevelType.Underground:\n                this.GenerateUnderground(level);\n                break;\n            case Mario.LevelType.Castle:\n                this.GenerateCastle(level);\n                break;\n        }\n        return level;\n    },\n    \n    GenerateOverground: function(level) {\n        var range = this.Distant ? 4 : 6;\n        var offs = this.Distant ? 2 : 1;\n        var oh = Math.floor(Math.random() * range) + offs;\n        var h = Math.floor(Math.random() * range) + offs;\n        \n        var x = 0, y = 0, h0 = 0, h1 = 0, s = 2;\n        for (x = 0; x < this.Width; x++) {\n            oh = h;\n            while (oh === h) {\n                h = Math.floor(Math.random() * range) + offs;\n            }\n            \n            for (y = 0; y < this.Height; y++) {\n                h0 = (oh < h) ? oh : h;\n                h1 = (oh < h) ? h : oh;\n                s = 2;\n                if (y < h0) {\n                    if (this.Distant){\n                        s = 2;\n                        if (y < 2) { s = y; }\n                        level.SetBlock(x, y, 4 + s * 8);\n                    } else {\n                        level.SetBlock(x, y, 5);\n                    }\n                } else if (y === h0) {\n                    s = h0 === h ? 0 : 1;\n                    s += this.Distant ? 2 : 0;\n                    level.SetBlock(x, y, s);\n                } else if (y === h1) {\n                    s = h0 === h ? 0 : 1;\n                    s += this.Distant ? 2 : 0;\n                    level.SetBlock(x, y, s + 16);\n                } else {\n                    s = (y > h1) ? 1 : 0;\n                    if (h0 === oh) { s = 1 - s; }\n                    s += this.Distant ? 2 : 0;\n                    level.SetBlock(x, y, s + 8);\n                }\n            }\n        }\n    },\n    \n    GenerateUnderground: function(level) {\n        var x = 0, y = 0, t = 0, yy = 0;\n        if (this.Distant) {\n            var tt = 0;\n            for (x = 0; x < this.Width; x++) {\n                if (Math.random() < 0.75) { tt = 1 - tt; }\n            \n                for (y = 0; y < this.Height; y++) {\n                    t = tt;\n                    yy = y - 2;\n                    \n                    if (yy < 0 || yy > 4) {\n                        yy = 2;\n                        t = 0;\n                    }\n                    level.SetBlock(x, y, (4 + t + (3 + yy) * 8));\n                }\n            }\n        } else {\n            for (x = 0; x < this.Width; x++) {\n                for (y = 0; y < this.Height; y++) {\n                    t = x % 2;\n                    yy = y - 1;\n                    if (yy < 0 || yy > 7) {\n                        yy = 7;\n                        t = 0;\n                    }\n                    if (t === 0 && yy > 1 && yy < 5) {\n                        t = -1;\n                        yy = 0;\n                    }\n                    \n                    level.SetBlock(x, y, (6 + t + yy * 8));\n                }\n            }\n        }\n    },\n    \n    GenerateCastle: function(level) {\n        var x = 0, y = 0, t = 0, yy = 0;\n        if (this.Distant) {\n            for (x = 0; x < this.Width; x++) {\n                for (y = 0; y < this.Height; y++) {\n                    t = x % 2;\n                    yy = y - 1;\n                    \n                    if (yy > 2 && yy < 5) {\n                        yy = 2;\n                    } else if (yy >= 5) {\n                        yy -= 2;\n                    }\n                    \n                    if (yy < 0) {\n                        t = 0;\n                        yy = 5;\n                    } else if (yy > 4) {\n                        t = 1;\n                        yy = 5;\n                    } else if (t < 1 && yy === 3) {\n                        t = 0;\n                        yy = 3;\n                    } else if (t < 1 && yy > 0 && yy < 3) {\n                        t = 0;\n                        yy = 2;\n                    }\n                    \n                    level.SetBlock(x, y, (1 + t + (yy + 4) * 8));\n                }\n            }\n        } else {\n            for (x = 0; x < this.Width; x++) {\n                for (y = 0; y < this.Height; y++) {\n                    t = x % 3;\n                    yy = y - 1;\n                    \n                    if (yy > 2 && yy < 5) {\n                        yy = 2;\n                    } else if (yy >= 5) {\n                        yy -= 2;\n                    }\n                    \n                    if (yy < 0) {\n                        t = 1;\n                        yy = 5;\n                    } else if (yy > 4) {\n                        t = 2;\n                        yy = 5;\n                    } else if (t < 2 && yy === 4) {\n                        t = 2;\n                        yy = 4;\n                    } else if (t < 2 && yy > 0 && yy < 4) {\n                        t = 4;\n                        yy = -3;\n                    }\n                    \n                    level.SetBlock(x, y, (1 + t + (yy + 3) * 8));\n                }\n            }\n        }\n    }\n    \n};","/**\n\tRenders a background portion of the level.\n\tCode by Rob Kleffner, 2011\n*/\n\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.BackgroundRenderer = function(level, width, height, distance) {\n    this.Level = level;\n    this.Width = width;\n    this.Distance = distance;\n    this.TilesY = ((height / 32) | 0) + 1;\n    \n    this.Background = Mario.SpriteCuts.GetBackgroundSheet();\n};\n\nMario.BackgroundRenderer.prototype = new Enjine.Drawable();\n\nMario.BackgroundRenderer.prototype.Draw = function(context, camera) {\n    var xCam = camera.X / this.Distance;\n    var x = 0, y = 0, b = null, frame = null;\n    \n    //the OR truncates the decimal, quicker than Math.floor\n    var xTileStart = (xCam / 32) | 0;\n    //the +1 makes sure the right edge tiles get drawn\n    var xTileEnd = (((xCam + this.Width) / 32) | 0);\n    \n    for (x = xTileStart; x <= xTileEnd; x++) {\n        for (y = 0; y < this.TilesY; y++) {\n            b = this.Level.GetBlock(x, y) & 0xff;\n            frame = this.Background[b % 8][(b / 8) | 0];\n            \n            //bitshifting by five is the same as multiplying by 32\n            context.drawImage(Enjine.Resources.Images[\"background\"], frame.X, frame.Y, frame.Width, frame.Height, ((x << 5) - xCam) | 0, (y << 5) | 0, frame.Width, frame.Height);\n        }\n    }\n};","/**\n\tNoise function to generate the world maps.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.ImprovedNoise = function(seed) {\n    this.P = [];\n    this.Shuffle(seed);\n};\n\nMario.ImprovedNoise.prototype = {\n    Shuffle: function(seed) {\n        var permutation = [];\n        var i = 0, j = 0, tmp = 0;\n        \n        for (i = 0; i < 256; i++) {\n            permutation[i] = i;\n        }\n        \n        for (i = 0; i < 256; i++) {\n            j = ((Math.random() * (256 - 1)) | 0) + i;\n            tmp = permutation[i];\n            permutation[i] = permutation[j];\n            permutation[j] = tmp;\n            this.P[i + 256] = this.P[i] = permutation[i];\n        }\n    },\n    \n    PerlinNoise: function(x, y) {\n        var i = 0, n = 0, stepSize = 0;\n        \n        for (i = 0; i < 8; i++) {\n            stepSize = 64 / (1 << i);\n            n += this.Noise(x / stepSize, y / stepSize, 128) / (1 << i);\n        }\n        \n        return n;\n    },\n    \n    Noise: function(x, y, z) {\n        var nx = (x | 0) & 255, ny = (y | 0) & 255, nz = (z | 0) & 255;\n        x -= (x | 0);\n        y -= (y | 0);\n        z -= (z | 0);\n        \n        var u = this.Fade(x), v = this.Fade(y), w = this.Fade(z);\n        var A = this.P[nx] + ny, AA = this.P[A] + nz, AB = this.P[A + 1] + nz,\n        B = this.P[nx + 1] + ny, BA = this.P[B] + nz, BB = this.P[B + 1] + nz;\n        \n        return this.Lerp(w, this.Lerp(v, this.Lerp(u, this.Grad(this.P[AA], x, y, z),\n            this.Grad(this.P[BA], x - 1, y, z)),\n            this.Lerp(u, this.Grad(this.P[AB], x, y - 1, z),\n                this.Grad(this.P[BB], x - 1, y - 1, z))),\n            this.Lerp(v, this.Lerp(u, this.Grad(this.P[AA + 1], x, y, z - 1),\n                this.Grad(this.P[BA + 1], x - 1, y, z - 1)),\n                this.Lerp(u, this.Grad(this.P[AB + 1], x, y - 1, z - 1), this.Grad(this.P[BB + 1], x - 1, y - 1, z - 1))));\n    },\n    \n    Fade: function(t) {\n        return t * t * t * (t * (t * 6 - 15) + 10);\n    },\n    \n    Lerp: function(t, x, y) {\n        return x + t * (y - x);\n    },\n    \n    Grad: function(hash, x, y, z) {\n        var h = hash & 15;\n        var u = h < 8 ? x : y;\n        var v = h < 4 ? y : (h === 12 || h === 14) ? x : z;\n        return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\n    }\n};","/**\n\tNotch made his own sprite class for this game. Rather than hack around my own,\n    I directly ported his to JavaScript and used that where needed.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.NotchSprite = function(image) {\n    this.XOld = 0; this.YOld = 0;\n    this.X = 0; this.Y = 0;\n    this.Xa = 0; this.Ya = 0;\n    this.XPic = 0; this.YPic = 0;\n    this.XPicO = 0; this.YPicO = 0;\n    this.PicWidth = 32; this.PicHeight = 32;\n    this.XFlip = false; this.YFlip = false;\n    this.Visible = true;\n    this.Image = image;\n    this.Delta = 0;\n    this.SpriteTemplate = null;\n    this.Layer = 1;\n};\n\nMario.NotchSprite.prototype = new Enjine.Drawable();\n\nMario.NotchSprite.prototype.Draw = function(context, camera) {\n    var xPixel = 0, yPixel = 0;\n    if (!this.Visible) {\n        return;\n    }\n    \n    xPixel = ((this.XOld + (this.X - this.XOld) * this.Delta) | 0) - this.XPicO;\n    yPixel = ((this.YOld + (this.Y - this.YOld) * this.Delta) | 0) - this.YPicO;\n    \n    context.save();\n    context.scale(this.XFlip ? -1 : 1, this.YFlip ? -1 : 1);\n    context.translate(this.XFlip ? -320 : 0, this.YFlip ? -240 : 0);\n    context.drawImage(this.Image, this.XPic * this.PicWidth, this.YPic * this.PicHeight, this.PicWidth, this.PicHeight,\n        this.XFlip ? (320 - xPixel - this.PicWidth) : xPixel, this.YFlip ? (240 - yPixel - this.PicHeight) : yPixel, this.PicWidth, this.PicHeight);\n    context.restore();\n};\n\nMario.NotchSprite.prototype.Update = function(delta) {\n    this.XOld = this.X;\n    this.YOld = this.Y;\n    this.Move();\n    this.Delta = delta;\n};\n\nMario.NotchSprite.prototype.UpdateNoMove = function(delta) {\n    this.XOld = this.X;\n    this.YOld = this.Y;\n    this.Delta = 0;\n};\n\nMario.NotchSprite.prototype.Move = function() {\n    this.X += this.Xa;\n    this.Y += this.Ya;\n};\n\nMario.NotchSprite.prototype.GetX = function(delta) {\n    return ((this.XOld + (this.X - this.XOld) * delta) | 0) - this.XPicO;\n};\n\nMario.NotchSprite.prototype.GetY = function(delta) {\n    return ((this.YOld + (this.Y - this.YOld) * delta) | 0) - this.YPicO;\n};\n\nMario.NotchSprite.prototype.CollideCheck = function() { };\n\nMario.NotchSprite.prototype.BumpCheck = function(xTile, yTile) { };\n\nMario.NotchSprite.prototype.Release = function(mario) { };\n\nMario.NotchSprite.prototype.ShellCollideCheck = function(shell) {\n    return false;\n};\n\nMario.NotchSprite.prototype.FireballCollideCheck = function(fireball) {\n    return false;\n};","/**\n\tGlobal representation of the mario character.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Character = function() {\n    //these are static in Notch's code... here it doesn't seem necessary\n    this.Large = true;\n    this.Fire = true;\n    this.Coins = 0;\n    this.Lives = 3;\n    this.LevelString = \"none\";\n    this.GroundInertia = 0.89;\n    this.AirInertia = 0.89;\n    \n    //non static variables in Notch's code\n    this.RunTime = 0;\n    this.WasOnGround = false;\n    this.OnGround = false;\n    this.MayJump = false;\n    this.Ducking = false;\n    this.Sliding = false;\n    this.JumpTime = 0;\n    this.XJumpSpeed = 0;\n    this.YJumpSpeed = 0;\n    this.CanShoot = false;\n    \n    this.Width = 4;\n    this.Height = 24;\n    \n    //Level scene\n    this.World = null;\n    this.Facing = 0;\n    this.PowerUpTime = 0;\n    \n    this.XDeathPos = 0; this.YDeathPos = 0;\n    this.DeathTime = 0;\n    this.WinTime = 0;\n    this.InvulnerableTime = 0;\n    \n    //Sprite\n    this.Carried = null;\n    \n    this.LastLarge = false;\n    this.LastFire = false;\n    this.NewLarge = false;\n    this.NewFire = false;\n};\n\nMario.Character.prototype = new Mario.NotchSprite(null);\n\nMario.Character.prototype.Initialize = function(world) {\n    this.World = world;\n    this.X = 32;\n    this.Y = 0;\n\tthis.PowerUpTime = 0;\n    \n    //non static variables in Notch's code\n    this.RunTime = 0;\n    this.WasOnGround = false;\n    this.OnGround = false;\n    this.MayJump = false;\n    this.Ducking = false;\n    this.Sliding = false;\n    this.JumpTime = 0;\n    this.XJumpSpeed = 0;\n    this.YJumpSpeed = 0;\n    this.CanShoot = false;\n    \n    this.Width = 4;\n    this.Height = 24;\n    \n    //Level scene\n    this.World = world;\n    this.Facing = 0;\n    this.PowerUpTime = 0;\n    \n    this.XDeathPos = 0; this.YDeathPos = 0;\n    this.DeathTime = 0;\n    this.WinTime = 0;\n    this.InvulnerableTime = 0;\n    \n    //Sprite\n    this.Carried = null;\n    \n    this.SetLarge(this.Large, this.Fire);\n};\n\nMario.Character.prototype.SetLarge = function(large, fire) {\n    if (fire) {\n        large = true;\n    }\n    if (!large) {\n        fire = false;\n    }\n    \n    this.LastLarge = this.Large;\n    this.LastFire = this.Fire;\n    this.Large = large;\n    this.Fire = fire;\n    this.NewLarge = this.Large;\n    this.NewFire = this.Fire;\n    \n    this.Blink(true);\n};\n\nMario.Character.prototype.Blink = function(on) {\n    this.Large = on ? this.NewLarge : this.LastLarge;\n    this.Fire = on ? this.NewFire : this.LastFire;\n    \n    if (this.Large) {\n        if (this.Fire) {\n            this.Image = Enjine.Resources.Images[\"fireMario\"];\n        } else {\n            this.Image = Enjine.Resources.Images[\"mario\"];\n        }\n        \n        this.XPicO = 16;\n        this.YPicO = 31;\n        this.PicWidth = this.PicHeight = 32;\n    } else {\n        this.Image = Enjine.Resources.Images[\"smallMario\"];\n        this.XPicO = 8;\n        this.YPicO = 15;\n        this.PicWidth = this.PicHeight = 16;\n    }\n};\n\nMario.Character.prototype.Move = function() {\n    if (this.WinTime > 0) {\n        this.WinTime++;\n        this.Xa = 0;\n        this.Ya = 0;\n        return;\n    }\n    \n    if (this.DeathTime > 0) {\n        this.DeathTime++;\n        if (this.DeathTime < 11) {\n            this.Xa = 0;\n            this.Ya = 0;\n        } else if (this.DeathTime === 11) {\n            this.Ya = -15;\n        } else {\n            this.Ya += 2;\n        }\n        this.X += this.Xa;\n        this.Y += this.Ya;\n        return;\n    }\n    \n    if (this.PowerUpTime !== 0) {\n        if (this.PowerUpTime > 0) {\n            this.PowerUpTime--;\n            this.Blink((((this.PowerUpTime / 3) | 0) & 1) === 0);\n        } else {\n            this.PowerUpTime++;\n            this.Blink((((-this.PowerUpTime / 3) | 0) & 1) === 0);\n        }\n        \n        if (this.PowerUpTime === 0) {\n            this.World.Paused = false;\n        }\n        \n        this.CalcPic();\n        return;\n    }\n    \n    if (this.InvulnerableTime > 0) {\n        this.InvulnerableTime--;\n    }\n    \n    this.Visible = (((this.InvulerableTime / 2) | 0) & 1) === 0;\n    \n    this.WasOnGround = this.OnGround;\n    var sideWaysSpeed = Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A) ? 1.2 : 0.6;\n    \n    if (this.OnGround) {\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Down) && this.Large) {\n            this.Ducking = true;\n        } else {\n            this.Ducking = false;\n        }\n    }\n        \n    if (this.Xa > 2) {\n        this.Facing = 1;\n    }\n    if (this.Xa < -2) {\n        this.Facing = -1;\n    }\n   \n    //  Not Working \n    // if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Space)) {\n    //    try{\n    //     this.World.Paused = !this.World.Paused ;\n    //     Mario.LevelState.Paused =  !Mario.LevelState.Paused ;\n    //    // Mario.Paused = !Mario.Paused;\n    //     window.rMR.timer.Pause();\n    //    // Mario.RunTime.timer.Pause();\n    //    return;\n    //    }catch(ex){}\n    // }\n    \n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S) || (this.JumpTime < 0 && !this.OnGround && !this.Sliding)) {\n        if (this.JumpTime < 0) {\n            this.Xa = this.XJumpSpeed;\n            this.Ya = -this.JumpTime * this.YJumpSpeed;\n            this.JumpTime++;\n        } else if (this.OnGround && this.MayJump) {\n            Enjine.Resources.PlaySound(\"jump\");\n            this.XJumpSpeed = 0;\n            this.YJumpSpeed = -1.9;\n            this.JumpTime = 7;\n            this.Ya = this.JumpTime * this.YJumpSpeed;\n            this.OnGround = false;\n            this.Sliding = false;\n        } else if (this.Sliding && this.MayJump) {\n            Enjine.Resources.PlaySound(\"jump\");\n            this.XJumpSpeed = -this.Facing * 6;\n            this.YJumpSpeed = -2;\n            this.JumpTime = -6;\n            this.Xa = this.XJumpSpeed;\n            this.Ya = -this.JumpTime * this.YJumpSpeed;\n            this.OnGround = false;\n            this.Sliding = false;\n            this.Facing = -this.Facing;\n        } else if (this.JumpTime > 0) {\n            this.Xa += this.XJumpSpeed;\n            this.Ya = this.JumpTime * this.YJumpSpeed;\n            this.JumpTime--;\n        }\n    } else {\n        this.JumpTime = 0;\n    }\n    \n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Left) && !this.Ducking) {\n        if (this.Facing === 1) {\n            this.Sliding = false;\n        }\n        this.Xa -= sideWaysSpeed;\n        if (this.JumpTime >= 0) {\n            this.Facing = -1;\n        }\n    }\n    \n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Right) && !this.Ducking) {\n        if (this.Facing === -1) {\n            this.Sliding = false;\n        }\n        this.Xa += sideWaysSpeed;\n        if (this.JumpTime >= 0) {\n            this.Facing = 1;\n        }\n    }\n    \n    if ((!Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Left) && !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Right)) || this.Ducking || this.Ya < 0 || this.OnGround) {\n        this.Sliding = false;  \n    }\n    \n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A) && this.CanShoot && this.Fire && this.World.FireballsOnScreen < 2) {\n        Enjine.Resources.PlaySound(\"fireball\");\n        this.World.AddSprite(new Mario.Fireball(this.World, this.X + this.Facing * 6, this.Y - 20, this.Facing));\n    }\n    \n    this.CanShoot = !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A);\n    this.MayJump = (this.OnGround || this.Sliding) && !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S);\n    this.XFlip = (this.Facing === -1);\n    this.RunTime += Math.abs(this.Xa) + 5;\n    \n    if (Math.abs(this.Xa) < 0.5) {\n        this.RunTime = 0;\n        this.Xa = 0;\n    }\n    \n    this.CalcPic();\n    \n    if (this.Sliding) {\n        this.World.AddSprite(new Mario.Sparkle(this.World, ((this.X + Math.random() * 4 - 2) | 0) + this.Facing * 8,\n            ((this.Y + Math.random() * 4) | 0) - 24, Math.random() * 2 - 1, Math.random(), 0, 1, 5));\n        this.Ya *= 0.5;\n    }\n    \n    this.OnGround = false;\n    this.SubMove(this.Xa, 0);\n    this.SubMove(0, this.Ya);\n    if (this.Y > this.World.Level.Height * 16 + 16) {\n        this.Die();\n    }\n    \n    if (this.X < 0) {\n        this.X = 0;\n        this.Xa = 0;\n    }\n    \n    if (this.X > this.World.Level.ExitX * 16) {\n        this.Win();\n    }\n    \n    if (this.X > this.World.Level.Width * 16) {\n        this.X = this.World.Level.Width * 16;\n        this.Xa = 0;\n    }\n    \n    this.Ya *= 0.85;\n    if (this.OnGround) {\n        this.Xa *= this.GroundInertia;\n    } else {\n        this.Xa *= this.AirInertia;\n    }\n    \n    if (!this.OnGround) {\n        this.Ya += 3;\n    }\n    \n    if (this.Carried !== null) {\n        this.Carried.X *= this.X + this.Facing * 8;\n        this.Carried.Y *= this.Y - 2;\n        if (!Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A)) {\n            this.Carried.Release(this);\n            this.Carried = null;\n        }\n    }\n};\n\nMario.Character.prototype.CalcPic = function() {\n    var runFrame = 0, i = 0;\n    \n    if (this.Large) {\n        runFrame = ((this.RunTime / 20) | 0) % 4;\n        if (runFrame === 3) {\n            runFrame = 1;\n        }\n        if (this.Carried === null && Math.abs(this.Xa) > 10) {\n            runFrame += 3;\n        }\n        if (this.Carried !== null) {\n            runFrame += 10;\n        }\n        if (!this.OnGround) {\n            if (this.Carried !== null) {\n                runFrame = 12;\n            } else if (Math.abs(this.Xa) > 10) {\n                runFrame = 7;\n            } else {\n                runFrame = 6;\n            }\n        }\n    } else {\n        runFrame = ((this.RunTime / 20) | 0) % 2;\n        if (this.Carried === null && Math.abs(this.Xa) > 10) {\n            runFrame += 2;\n        }\n        if (this.Carried !== null) {\n            runFrame += 8;\n        }\n        if (!this.OnGround) {\n            if (this.Carried !== null) {\n                runFrame = 9;\n            } else if (Math.abs(this.Xa) > 10) {\n                runFrame = 5;\n            } else {\n                runFrame = 4;\n            }\n        }\n    }\n    \n    if (this.OnGround && ((this.Facing === -1 && this.Xa > 0) || (this.Facing === 1 && this.Xa < 0))) {\n        if (this.Xa > 1 || this.Xa < -1) {\n            runFrame = this.Large ? 9 : 7;\n        }\n        \n        if (this.Xa > 3 || this.Xa < -3) {\n            for (i = 0; i < 3; i++) {\n                this.World.AddSprite(new Mario.Sparkle(this.World, (this.X + Math.random() * 8 - 4) | 0, (this.Y + Math.random() * 4) | 0, Math.random() * 2 - 1, Math.random() * -1, 0, 1, 5));\n            }\n        }\n    }\n    \n    if (this.Large) {\n        if (this.Ducking) {\n            runFrame = 14;\n        }\n        this.Height = this.Ducking ? 12 : 24;\n    } else {\n        this.Height = 12;\n    }\n    \n    this.XPic = runFrame;\n};\n\nMario.Character.prototype.SubMove = function(xa, ya) {\n    var collide = false;\n    \n    while (xa > 8) {\n        if (!this.SubMove(8, 0)) {\n            return false;\n        }\n        xa -= 8;\n    }\n    while (xa < -8) {\n        if (!this.SubMove(-8, 0)) {\n            return false;\n        }\n        xa += 8;\n    }\n    while (ya > 8) {\n        if (!this.SubMove(0, 8)) {\n            return false;\n        }\n        ya -= 8;\n    }\n    while (ya < -8) {\n        if (!this.SubMove(0, -8)) {\n            return false;\n        }\n        ya += 8;\n    }\n    \n    if (ya > 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (ya < 0) {\n        if (this.IsBlocking(this.X + xa, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (xa > 0) {\n        this.Sliding = true;\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n        \n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n        \n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n    }\n    if (xa < 0) {\n        this.Sliding = true;\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n        \n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n        \n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        } else {\n            this.Sliding = false;\n        }\n    }\n    \n    if (collide) {\n        if (xa < 0) {\n            this.X = (((this.X - this.Width) / 16) | 0) * 16 + this.Width;\n            this.Xa = 0;\n        }\n        if (xa > 0) {\n            this.X = (((this.X + this.Width) / 16 + 1) | 0) * 16 - this.Width - 1;\n            this.Xa = 0;\n        }\n        if (ya < 0) {\n            this.Y = (((this.Y - this.Height) / 16) | 0) * 16 + this.Height;\n            this.JumpTime = 0;\n            this.Ya = 0;\n        }\n        if (ya > 0) {\n            this.Y = (((this.Y - 1) / 16 + 1) | 0) * 16 - 1;\n            this.OnGround = true;\n        }\n        \n        return false;\n    } else {\n        this.X += xa;\n        this.Y += ya;\n        return true;\n    }\n};\n\nMario.Character.prototype.IsBlocking = function(x, y, xa, ya) {\n    var blocking = false, block = 0, xx = 0, yy = 0;\n    \n    x = (x / 16) | 0;\n    y = (y / 16) | 0;\n    if (x === ((this.X / 16) | 0) && y === ((this.Y / 16) | 0)) {\n        return false;\n    }\n    \n    block = this.World.Level.GetBlock(x, y);\n    \n    if (((Mario.Tile.Behaviors[block & 0xff]) & Mario.Tile.PickUpable) > 0) {\n        this.GetCoin();\n        Enjine.Resources.PlaySound(\"coin\");\n        this.World.Level.SetBlock(x, y, 0);\n        for (xx = 0; xx < 2; xx++) {\n            for (yy = 0; yy < 2; yy++) {\n                this.World.AddSprite(new Mario.Sparkle(this.World, x * 16 + xx * 8 + ((Math.random() * 8) | 0), y * 16 + yy * 8 + ((Math.random() * 8) | 0), 0, 0, 0, 2, 5));\n            }\n        }\n    }\n    \n    blocking = this.World.Level.IsBlocking(x, y, xa, ya);\n    if (blocking && ya < 0) {\n        this.World.Bump(x, y, this.Large);\n    }\n    return blocking;\n};\n\nMario.Character.prototype.Stomp = function(object) {\n    var targetY = 0;\n\n    if (this.DeathTime > 0 || this.World.Paused) {\n        return;\n    }\n    \n    targetY = object.Y - object.Height / 2;\n    this.SubMove(0, targetY - this.Y);\n    \n    if (object instanceof Mario.Enemy || object instanceof Mario.BulletBill) {\n        \n        Enjine.Resources.PlaySound(\"kick\");\n        this.XJumpSpeed = 0;\n        this.YJumpSpeed = -1.9;\n        this.JumpTime = 8;\n        this.Ya = this.JumpTime * this.YJumpSpeed;\n        this.OnGround = false;\n        this.Sliding = false;\n        this.InvulnerableTime = 1;\n    } else if (object instanceof Mario.Shell) {\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A) && object.Facing === 0) {\n            this.Carried = object;\n            object.Carried = true;\n        } else {\n            Enjine.Resources.PlaySound(\"kick\");\n            this.XJumpSpeed = 0;\n            this.YJumpSpeed = -1.9;\n            this.JumpTime = 8;\n            this.Ya = this.JumpTime * this.YJumpSpeed;\n            this.OnGround = false;\n            this.Sliding = false;\n            this.InvulnerableTime = 1;\n        }\n    }\n};\n\nMario.Character.prototype.GetHurt = function() {\n    if (this.DeathTime > 0 || this.World.Paused) {\n        return;\n    }\n    if (this.InvulnerableTime > 0) {\n        return;\n    }\n    \n    if (this.Large) {\n        this.World.Paused = true;\n        this.PowerUpTime = -18;\n        Enjine.Resources.PlaySound(\"powerdown\");\n        if (this.Fire) {\n            this.SetLarge(true, false);\n        } else {\n            this.SetLarge(false, false);\n        }\n        this.InvulnerableTime = 32;\n    } else {\n        this.Die();\n    }\n};\n\nMario.Character.prototype.Win = function() {\n    this.XDeathPos = this.X | 0;\n    this.YDeathPos = this.Y | 0;\n    this.World.Paused = true;\n    this.WinTime = 1;\n    Enjine.Resources.PlaySound(\"exit\");\n};\n\nMario.Character.prototype.Die = function() {\n    this.XDeathPos = this.X | 0;\n    this.YDeathPos = this.Y | 0;\n    this.World.Paused = true;\n    this.DeathTime = 1;\n    Enjine.Resources.PlaySound(\"death\");\n    this.SetLarge(false, false);\n};\n\nMario.Character.prototype.GetFlower = function() {\n    if (this.DeathTime > 0 && this.World.Paused) {\n        return;\n    }\n    \n    if (!this.Fire) {\n        this.World.Paused = true;\n        this.PowerUpTime = 18;\n        Enjine.Resources.PlaySound(\"powerup\");\n        this.SetLarge(true, true);\n    } else {\n        this.GetCoin();\n        Enjine.Resources.PlaySound(\"coin\");\n    }\n};\n\nMario.Character.prototype.GetMushroom = function() {\n    if (this.DeathTime > 0 && this.World.Paused) {\n        return;\n    }\n    \n    if (!this.Large) {\n        this.World.Paused = true;\n        this.PowerUpTime = 18;\n        Enjine.Resources.PlaySound(\"powerup\");\n        this.SetLarge(true, false);\n    } else {\n        this.GetCoin();\n        Enjine.Resources.PlaySound(\"coin\");\n    }\n};\n\nMario.Character.prototype.Kick = function(shell) {\n    if (this.DeathTime > 0 && this.World.Paused) {\n        return;\n    }\n    \n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.A)) {\n        this.Carried = shell;\n        shell.Carried = true;\n    } else {\n        Enjine.Resources.PlaySound(\"kick\");\n        this.InvulnerableTime = 1;\n    }\n};\n\nMario.Character.prototype.Get1Up = function() {\n    Enjine.Resources.PlaySound(\"1up\");\n    this.Lives++;\n    if (this.Lives === 99) {\n        this.Lives = 99;\n    }\n};\n\nMario.Character.prototype.GetCoin = function() {\n    this.Coins++;\n    if (this.Coins === 100) {\n        this.Coins = 0;\n        this.Get1Up();\n    }\n};\n","/**\n\tRenders a playable level.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.LevelRenderer = function(level, width, height) {\n    this.Width = width;\n    this.Height = height;\n    this.Level = level;\n    this.TilesY = ((height / 16) | 0) + 1;\n    this.Delta = 0;\n    this.Tick = 0;\n    this.Bounce = 0;\n    this.AnimTime = 0;\n    \n    this.Background = Mario.SpriteCuts.GetLevelSheet();\n};\n\nMario.LevelRenderer.prototype = new Enjine.Drawable();\n\nMario.LevelRenderer.prototype.Update = function(delta) {\n    this.AnimTime += delta;\n    this.Tick = this.AnimTime | 0;\n    this.Bounce += delta * 30;\n    this.Delta = delta;\n};\n\nMario.LevelRenderer.prototype.Draw = function(context, camera) {\n    this.DrawStatic(context, camera);\n    this.DrawDynamic(context, camera);\n};\n\nMario.LevelRenderer.prototype.DrawStatic = function(context, camera) {\n    var x = 0, y = 0, b = 0, frame = null, xTileStart = (camera.X / 16) | 0, xTileEnd = ((camera.X + this.Width) / 16) | 0;\n    \n    for (x = xTileStart; x < xTileEnd + 1; x++) {\n        for (y = 0; y < this.TilesY; y++) {\n            b = this.Level.GetBlock(x, y) & 0xff;\n            if ((Mario.Tile.Behaviors[b] & Mario.Tile.Animated) === 0) {\n                frame = this.Background[b % 16][(b / 16) | 0];\n                context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, ((x << 4) - camera.X) | 0, (y << 4) | 0, frame.Width, frame.Height);\n            }\n        }\n    }\n};\n\nMario.LevelRenderer.prototype.DrawDynamic = function(context, camera) {\n    var x = 0, y = 0, b = 0, animTime = 0, yo = 0, frame = null;\n    for (x = (camera.X / 16) | 0; x <= ((camera.X + this.Width) / 16) | 0; x++) {\n        for (y = (camera.Y / 16) | 0; y <= ((camera.Y + this.Height) / 16) | 0; y++) {\n            b = this.Level.GetBlock(x, y);\n            \n            if (((Mario.Tile.Behaviors[b & 0xff]) & Mario.Tile.Animated) > 0) {\n                animTime = ((this.Bounce / 3) | 0) % 4;\n                if ((((b % 16) / 4) | 0) === 0 && ((b / 16) | 0) === 1) {\n                    animTime = ((this.Bounce / 2 + (x + y) / 8) | 0) % 20;\n                    if (animTime > 3) {\n                        animTime = 0;\n                    }\n                }\n                if ((((b % 16) / 4) | 0) === 3 && ((b / 16) | 0) === 0) {\n                    animTime = 2;\n                }\n                yo = 0;\n                if (x >= 0 && y >= 0 && x < this.Level.Width && y < this.Level.Height) {\n                    yo = this.Level.Data[x][y];\n                }\n                if (yo > 0) {\n                    yo = (Math.sin((yo - this.Delta) / 4 * Math.PI) * 8) | 0;\n                }\n                frame = this.Background[(((b % 16) / 4) | 0) * 4 + animTime][(b / 16) | 0];\n                context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, (x << 4) - camera.X, (y << 4) - camera.Y - yo, frame.Width, frame.Height);\n            }\n        }\n    }\n};\n\nMario.LevelRenderer.prototype.DrawExit0 = function(context, camera, bar) {\n    var y = 0, yh = 0, frame = null;\n    for (y = this.Level.ExitY - 8; y < this.Level.ExitY; y++) {\n        frame = this.Background[12][y === this.Level.ExitY - 8 ? 4 : 5];\n        context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, (this.Level.ExitX << 4) - camera.X - 16, (y << 4) - camera.Y, frame.Width, frame.Height);\n    }\n    \n    if (bar) {\n        yh = this.Level.ExitY * 16 - (3 * 16) - (Math.sin(this.AnimTime) * 3 * 16) - 8;// - ((Math.sin(((this.Bounce + this.Delta) / 20) * 0.5 + 0.5) * 7 * 16) | 0) - 8;\n        frame = this.Background[12][3];\n        context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, (this.Level.ExitX << 4) - camera.X - 16, yh - camera.Y, frame.Width, frame.Height);\n        frame = this.Background[13][3];\n        context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, (this.Level.ExitX << 4) - camera.X, yh - camera.Y, frame.Width, frame.Height);\n    }\n};\n\nMario.LevelRenderer.prototype.DrawExit1 = function(context, camera) {\n    var y = 0, frame = null;\n    for (y = this.Level.ExitY - 8; y < this.Level.ExitY; y++) {\n        frame = this.Background[13][y === this.Level.ExitY - 8 ? 4 : 5];\n        context.drawImage(Enjine.Resources.Images[\"map\"], frame.X, frame.Y, frame.Width, frame.Height, (this.Level.ExitX << 4) - camera.X + 16, (y << 4) - camera.Y, frame.Width, frame.Height);\n    }\n};","/**\n\tGenerates a psuedo-random procedural level.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.LevelGenerator = function(width, height) {\n    this.Width = width;\n    this.Height = height;\n    this.Odds = [];\n    this.TotalOdds = 0;\n    this.Difficulty = 0;\n    this.Type = 0;\n};\n\nMario.LevelGenerator.prototype = {\n    CreateLevel: function(type, difficulty) {\n        var i = 0, length = 0, floor = 0, x = 0, y = 0, ceiling = 0, run = 0, level = null;\n        \n        this.Type = type;\n        this.Difficulty = difficulty;\n        this.Odds[Mario.Odds.Straight] = 20;\n        this.Odds[Mario.Odds.HillStraight] = 10;\n        this.Odds[Mario.Odds.Tubes] = 2 + difficulty;\n        this.Odds[Mario.Odds.Jump] = 2 * difficulty;\n        this.Odds[Mario.Odds.Cannon] = -10 + 5 * difficulty;\n        \n        if (this.Type !== Mario.LevelType.Overground) {\n            this.Odds[Mario.Odds.HillStraight] = 0;\n        }\n        \n        for (i = 0; i < this.Odds.length; i++) {\n            if (this.Odds[i] < 0) {\n                this.Odds[i] = 0;\n            }\n            this.TotalOdds += this.Odds[i];\n            this.Odds[i] = this.TotalOdds - this.Odds[i];\n        }\n        \n        level = new Mario.Level(this.Width, this.Height);\n        length += this.BuildStraight(level, 0, level.Width, true);\n        while (length < level.Width - 64) {\n            length += this.BuildZone(level, length, level.Width - length);\n        }\n        \n        floor = this.Height - 1 - (Math.random() * 4) | 0;\n        level.ExitX = length + 8;\n        level.ExitY = floor;\n        \n        for (x = length; x < level.Width; x++) {\n            for (y = 0; y < this.Height; y++) {\n                if (y >= floor) {\n                    level.SetBlock(x, y, 1 + 9 * 16);\n                }\n            }\n        }\n        \n        if (type === Mario.LevelType.Castle || type === Mario.LevelType.Underground) {\n            for (x = 0; x < level.Width; x++) {\n                if (run-- <= 0 && x > 4) {\n                    ceiling = (Math.random() * 4) | 0;\n                    run = ((Math.random() * 4) | 0) + 4;\n                }\n                for (y = 0; y < level.Height; y++) {\n                    if ((x > 4 && y <= ceiling) || x < 1) {\n                        level.SetBlock(x, y, 1 + 9 * 16);\n                    }\n                }\n            }\n        }\n        \n        this.FixWalls(level);\n        \n        return level;\n    },\n    \n    BuildZone: function(level, x, maxLength) {\n        var t = (Math.random() * this.TotalOdds) | 0, type = 0, i = 0;\n        for (i = 0; i < this.Odds.length; i++) {\n            if (this.Odds[i] <= t) {\n                type = i;\n            }\n        }\n        \n        switch (type) {\n            case Mario.Odds.Straight:\n                return this.BuildStraight(level, x, maxLength, false);\n            case Mario.Odds.HillStraight:\n                return this.BuildHillStraight(level, x, maxLength);\n            case Mario.Odds.Tubes:\n                return this.BuildTubes(level, x, maxLength);\n            case Mario.Odds.Jump:\n                return this.BuildJump(level, x, maxLength);\n            case Mario.Odds.Cannons:\n                return this.BuildCannons(level, x, maxLength);\n        }\n        return 0;\n    },\n    \n    BuildJump: function(level, xo, maxLength) {\n        var js = ((Math.random() * 4) | 0) + 2, jl = ((Math.random() * 2) | 0) + 2, length = js * 2 + jl, x = 0, y = 0,\n            hasStairs = ((Math.random() * 3) | 0) === 0, floor = this.Height - 1 - ((Math.random() * 4) | 0);\n        \n        for (x = xo; x < xo + length; x++) {\n            if (x < xo + js || x > xo + length - js - 1) {\n                for (y = 0; y < this.Height; y++) {\n                    if (y >= floor) {\n                        level.SetBlock(x, y, 1 + 9 * 16);\n                    } else if (hasStairs) {\n                        if (x < xo + js) {\n                            if (y >= floor - (x - xo) + 1) {\n                                level.SetBlock(x, y, 9);\n                            }\n                        } else {\n                            if (y >= floor - ((xo + length) - x) + 2) {\n                                level.SetBlock(x, y, 9);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        \n        return length;\n    },\n    \n    BuildCannons: function(level, xo, maxLength) {\n\t\talert(\"cannons\");\n        var length = ((Math.random() * 10) | 0) + 2, floor = this.Height - 1 - (Math.random() * 4) | 0,\n            xCannon = xo + 1 + (Math.random() * 4) | 0, x = 0, y = 0, cannonHeight = 0;\n            \n        if (length > maxLength) {\n            length = maxLength;\n        }\n        \n        for (x = xo; x < xo + length; x++) {\n            if (x > xCannon) {\n                xCannon += 2 * (Math.random() * 4) | 0;\n            }\n            if (xCannon === xo + length - 1) {\n                xCannon += 10;\n            }\n            cannonHeight = floor - ((Math.random() * 4) | 0) - 1;\n            \n            for (y = 0; y < this.Height; y++) {\n                if (y >= floor) {\n                    level.SetBlock(x, y, 1 + 9 * 16);\n                } else {\n                    if (x === xCannon && y >= cannonHeight) {\n                        if (y === cannonHeight) {\n                            level.SetBlock(x, y, 14);\n                        } else if (y === cannonHeight + 1) {\n                            level.SetBlock(x, y, 14 + 16);\n                        } else {\n                            level.SetBlock(x, y, 14 + 2 * 16);\n                        }\n                    }\n                }\n            }\n        }\n        \n        return length;\n    },\n    \n    BuildHillStraight: function(level, xo, maxLength) {\n        var length = ((Math.random() * 10) | 0) + 10, floor = this.Height - 1 - (Math.random() * 4) | 0,\n            x = 0, y = 0, h = floor, keepGoing = true, l = 0, xxo = 0, occupied = [], xx = 0, yy = 0;\n        \n        if (length > maxLength) {\n            length = maxLength;\n        }\n        \n        for (x = xo; x < xo + length; x++) {\n            for (y = 0; y < this.Height; y++) {\n                if (y >= floor) {\n                    level.SetBlock(x, y, 1 + 9 * 16);\n                }\n            }\n        }\n        \n        this.AddEnemyLine(level, xo + 1, xo + length - 1, floor - 1);\n        \n        while (keepGoing) {\n            h = h - 2 - (Math.random() * 3) | 0;\n            if (h <= 0) {\n                keepGoing = false;\n            } else {\n                l = ((Math.random() * 5) | 0) + 3;\n                xxo = ((Math.random() * (length - l - 2)) | 0) + xo + 1;\n                \n                if (occupied[xxo - xo] || occupied[xxo - xo + l] || occupied[xxo - xo - 1] || occupied[xxo - xo + l + 1]) {\n                    keepGoing = false;\n                } else {\n                    occupied[xxo - xo] = true;\n                    occupied[xxo - xo + l] = true;\n                    this.AddEnemyLine(level, xxo, xxo + l, h - 1);\n                    if (((Math.random() * 4) | 0) === 0) {\n                        this.Decorate(level, xxo - 1, xxo + l + 1, h);\n                        keepGoing = false;\n                    }\n                    \n                    for (x = xxo; x < xxo + l; x++) {\n                        for (y = h; y < floor; y++) {\n                            xx = 5;\n                            yy = 9;\n                            if (x === xxo) {\n                                xx = 4;\n                            }\n                            if (x === xxo + l - 1) {\n                                xx = 6;\n                            }\n                            if (y === h) {\n                                yy = 8;\n                            }\n                            \n                            if (level.GetBlock(x, y) === 0) {\n                                level.SetBlock(x, y, xx + yy * 16);\n                            } else {\n                                if (level.GetBlock(x, y) === (4 + 8 * 16)) {\n                                    level.SetBlock(x, y, 4 + 11 * 16);\n                                }\n                                if (level.GetBlock(x, y) === (6 + 8 * 16)) {\n                                    level.SetBlock(x, y, 6 + 11 * 16);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        \n        return length;\n    },\n    \n    AddEnemyLine: function(level, x0, x1, y) {\n        var x = 0, type = 0;\n        for (x = x0; x < x1; x++) {\n            if (((Math.random() * 35) | 0) < this.Difficulty + 1) {\n                type = (Math.random() * 4) | 0;\n                if (this.Difficulty < 1) {\n                    type = Mario.Enemy.Goomba;\n                } else if (this.Difficulty < 3) {\n                    type = (Math.random() * 3) | 0;\n                }\n                level.SetSpriteTemplate(x, y, new Mario.SpriteTemplate(type, ((Math.random() * 35) | 0) < this.Difficulty));\n            }\n        }\n    },\n    \n    BuildTubes: function(level, xo, maxLength) {\n        var length = ((Math.random() * 10) | 0) + 5, floor = this.Height - 1 - (Math.random() * 4) | 0,\n            xTube = xo + 1 + (Math.random() * 4) | 0, tubeHeight = floor - ((Math.random() * 2) | 0) - 2,\n            x = 0, y = 0, xPic = 0;\n        \n        if (length > maxLength) {\n            length = maxLength;\n        }\n        \n        for (x = xo; x < xo + length; x++) {\n            if (x > xTube + 1) {\n                xTube += 3 + ((Math.random() * 4) | 0);\n                tubeHeight = floor - ((Math.random() * 2) | 0) - 2;\n            }\n            if (xTube >= xo + length - 2) {\n                xTube += 10;\n            }\n            \n            if (x === xTube && ((Math.random() * 11) | 0) < this.Difficulty + 1) {\n                level.SetSpriteTemplate(x, tubeHeight, new Mario.SpriteTemplate(Mario.Enemy.Flower, false));\n            }\n            \n            for (y = 0; y < this.Height; y++) {\n                if (y >= floor) {\n                    level.SetBlock(x, y, 1 + 9 * 16);\n                } else {\n                    if ((x === xTube || x === xTube + 1) && y >= tubeHeight) {\n                        xPic = 10 + x - xTube;\n                        if (y === tubeHeight) {\n                            level.SetBlock(x, y, xPic);\n                        } else {\n                            level.SetBlock(x, y, xPic + 16);\n                        }\n                    }\n                }\n            }\n        }\n        \n        return length;\n    },\n    \n    BuildStraight: function(level, xo, maxLength, safe) {\n        var length = ((Math.random() * 10) | 0) + 2, floor = this.Height - 1 - ((Math.random() * 4) | 0), x = 0, y = 0;\n        \n        if (safe) {\n            length = 10 + ((Math.random() * 5) | 0);\n        }\n        if (length > maxLength) {\n            length = maxLength;\n        }\n        \n        for (x = xo; x < xo + length; x++) {\n            for (y = 0; y < this.Height; y++) {\n                if (y >= floor) {\n                    level.SetBlock(x, y, 1 + 9 * 16);\n                }\n            }\n        }\n        \n        if (!safe) {\n            if (length > 5) {\n                this.Decorate(level, xo, xo + length, floor);\n            }\n        }\n        \n        return length;\n    },\n    \n    Decorate: function(level, x0, x1, floor) {\n        if (floor < 1) {\n            return;\n        }\n        \n        var rocks = true, s = (Math.random() * 4) | 0, e = (Math.random() * 4) | 0, x = 0;\n        \n        this.AddEnemyLine(level, x0 + 1, x1 - 1, floor - 1);\n        \n        if (floor - 2 > 0) {\n            if ((x1 - 1 - e) - (x0 + 1 + s) > 1) {\n                for (x = x0 + 1 + s; x < x1 - 1 - e; x++) {\n                    level.SetBlock(x, floor - 2, 2 + 2 * 16);\n                }\n            }\n        }\n        \n        s = (Math.random() * 4) | 0;\n        e = (Math.random() * 4) | 0;\n        \n        if (floor - 4 > 0) {\n            if ((x1 - 1 - e) - (x0 + 1 + s) > 2) {\n                for (x = x0 + 1 + s; x < x1 - 1 - e; x++) {\n                    if (rocks) {\n                        if (x !== x0 + 1 && x !== x1 - 2 && ((Math.random() * 3) | 0) === 0) {\n                            if (((Math.random() * 4) | 0) === 0) {\n                                level.SetBlock(x, floor - 4, 4 + 2 + 16);\n                            } else {\n                                level.SetBlock(x, floor - 4, 4 + 1 + 16);\n                            }\n                        } else if (((Math.random() * 4) | 0) === 0) {\n                            if (((Math.random() * 4) | 0) === 0) {\n                                level.SetBlock(x, floor - 4, 2 + 16);\n                            } else {\n                                level.SetBlock(x, floor - 4, 1 + 16);\n                            }\n                        } else {\n                            level.SetBlock(x, floor - 4, 16);\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \n    FixWalls: function(level) {\n        var blockMap = [], x = 0, y = 0, xx = 0, yy = 0, blocks = 0;\n        \n        for (x = 0; x < this.Width + 1; x++) {\n            blockMap[x] = [];\n        \n            for (y = 0; y < this.Height + 1; y++) {\n                blocks = 0;\n                for (xx = x - 1; xx < x + 1; xx++) {\n                    for (yy = y - 1; yy < y + 1; yy++) {\n                        if (level.GetBlockCapped(xx, yy) === (1 + 9 * 16)) {\n                            blocks++;\n                        }\n                    }\n                }\n                blockMap[x][y] = blocks === 4;\n            }\n        }\n        \n        this.Blockify(level, blockMap, this.Width + 1, this.Height + 1);\n    },\n    \n    Blockify: function(level, blocks, width, height) {\n        var to = 0, b = [], x = 0, y = 0, xx = 0, yy = 0, i = 0, _xx = 0, _yy = 0;\n        \n        for (i = 0; i < 2; i++) {\n            b[i] = [];\n        }\n        \n        if (this.Type === Mario.LevelType.Castle) {\n            to = 8;\n        } else if (this.Type === Mario.LevelType.Underground) {\n            to = 12;\n        }\n        \n        for (x = 0; x < width; x++) {\n            for (y = 0; y < height; y++) {\n                for (xx = x; xx <= x + 1; xx++) {\n                    for (yy = y; yy <= y + 1; yy++) {\n                        _xx = xx;\n                        _yy = yy;\n                        if (_xx < 0) {\n                            _xx = 0;\n                        }\n                        if (_yy < 0) {\n                            _yy = 0;\n                        }\n                        if (_xx > width - 1) {\n                            _xx = width - 1;\n                        }\n                        if (_yy > height - 1) {\n                            _yy = height - 1;\n                        }\n                        \n                        b[xx - x][yy - y] = blocks[_xx][_yy];\n                    }\n                }\n                \n                if (b[0][0] === b[1][0] && b[0][1] === b[1][1]) {\n                    if (b[0][0] === b[0][1]) {\n                        if (b[0][0]) {\n                            level.SetBlock(x, y, 1 + 9 * 16 + to);\n                        }\n                    } else {\n                        if (b[0][0]) {\n                            level.SetBlock(x, y, 1 + 10 * 16 + to);\n                        } else {\n                            level.SetBlock(x, y, 1 + 8 * 16 + to);\n                        }\n                    }\n                } else if (b[0][0] === b[0][1] && b[1][0] === b[1][1]) {\n                    if (b[0][0]) {\n                        level.SetBlock(x, y, 2 + 9 * 16 + to);\n                    } else {\n                        level.SetBlock(x, y, 9 * 16 + to);\n                    }\n                } else if (b[0][0] === b[1][1] && b[0][1] === b[1][0]) {\n                    level.SetBlock(x, y, 1 + 9 * 16 + to);\n                } else if (b[0][0] === b[1][0]) {\n                    if (b[0][0]) {\n                        if (b[0][1]) {\n                            level.SetBlock(x, y, 3 + 10 * 16 + to);\n                        } else {\n                            level.SetBlock(x, y, 3 + 11 * 16 + to);\n                        }\n                    } else {\n                        if (b[0][1]) {\n                            level.SetBlock(x, y, 2 + 8 * 16 + to);\n                        } else {\n                            level.SetBlock(x, y, 8 * 16 + to);\n                        }\n                    }\n                } else if (b[0][1] === b[1][1]) {\n                    if (b[0][1]) {\n                        if (b[0][0]) {\n                            level.SetBlock(x, y, 3 + 9 * 16 + to);\n                        } else {\n                            level.SetBlock(x, y, 3 + 8 * 16 + to);\n                        }\n                    } else {\n                        if (b[0][0]) {\n                            level.SetBlock(x, y, 2 + 10 * 16 + to);\n                        } else {\n                            level.SetBlock(x, y, 10 * 16 + to);\n                        }\n                    }\n                } else {\n                    level.SetBlock(x, y, 1 + 16 * to);\n                }\n            }\n        }\n    }\n};","/**\n\tCreates a specific type of sprite based on the information given.\n\tCode by Rob Kleffner, 2011\n*/\n\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.SpriteTemplate = function(type, winged) {\n    this.Type = type;\n    this.Winged = winged;\n    this.LastVisibleTick = -1;\n    this.IsDead = false;\n    this.Sprite = null;\n};\n\nMario.SpriteTemplate.prototype = {\n    Spawn: function(world, x, y, dir) {\n        if (this.IsDead) {\n            return;\n        }\n        \n        if (this.Type === Mario.Enemy.Flower) {\n            this.Sprite = new Mario.FlowerEnemy(world, x * 16 + 15, y * 16 + 24);\n        } else {\n            this.Sprite = new Mario.Enemy(world, x * 16 + 8, y * 16 + 15, dir, this.Type, this.Winged);\n        }\n        this.Sprite.SpriteTemplate = this;\n        world.AddSprite(this.Sprite);\n    }\n};","/**\n\tA generic template for an enemy in the game.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Enemy = function(world, x, y, dir, type, winged) {\n    this.GroundInertia = 0.89;\n    this.AirInertia = 0.89;\n    this.RunTime = 0;\n    this.OnGround = false;\n    this.MayJump = false;\n    this.JumpTime = 0;\n    this.XJumpSpeed = 0;\n    this.YJumpSpeed = 0;\n    this.Width = 4;\n    this.Height = 24;\n    this.DeadTime = 0;\n    this.FlyDeath = false;\n    this.WingTime = 0;\n    this.NoFireballDeath = false;\n    \n    this.X = x;\n    this.Y = y;\n    this.World = world;\n    \n    this.Type = type;\n    this.Winged = winged;\n    \n    this.Image = Enjine.Resources.Images[\"enemies\"];\n    \n    this.XPicO = 8;\n    this.YPicO = 31;\n    this.AvoidCliffs = this.Type === Mario.Enemy.RedKoopa;\n    this.NoFireballDeath = this.Type === Mario.Enemy.Spiky;\n    \n    this.YPic = this.Type;\n    if (this.YPic > 1) {\n        this.Height = 12;\n    }\n    this.Facing = dir;\n    if (this.Facing === 0) {\n        this.Facing = 1;\n    }\n    \n    this.PicWidth = 16;\n};\n\nMario.Enemy.prototype = new Mario.NotchSprite();\n\nMario.Enemy.prototype.CollideCheck = function() {\n    if (this.DeadTime !== 0) {\n        return;\n    }\n    \n    var xMarioD = Mario.MarioCharacter.X - this.X, yMarioD = Mario.MarioCharacter.Y - this.Y;\n        \n    if (xMarioD > -this.Width * 2 - 4 && xMarioD < this.Width * 2 + 4) {\n        if (yMarioD > -this.Height && yMarioD < Mario.MarioCharacter.Height) {\n            if (this.Type !== Mario.Enemy.Spiky && Mario.MarioCharacter.Ya > 0 && yMarioD <= 0 && (!Mario.MarioCharacter.OnGround || !Mario.MarioCharacter.WasOnGround)) {\n                Mario.MarioCharacter.Stomp(this);\n                if (this.Winged) {\n                    this.Winged = false;\n                    this.Ya = 0;\n                } else {\n                    this.YPicO = 31 - (32 - 8);\n                    this.PicHeight = 8;\n                    \n                    if (this.SpriteTemplate !== null) {\n                        this.SpriteTemplate.IsDead = true;\n                    }\n                    \n                    this.DeadTime = 10;\n                    this.Winged = false;\n                    \n                    if (this.Type === Mario.Enemy.RedKoopa) {\n                        this.World.AddSprite(new Mario.Shell(this.World, this.X, this.Y, 0));\n                    } else if (this.Type === Mario.Enemy.GreenKoopa) {\n                        this.World.AddSprite(new Mario.Shell(this.World, this.X, this.Y, 1));\n                    }\n                }\n            } else {\n                Mario.MarioCharacter.GetHurt();\n            }\n        }\n    }\n};\n\nMario.Enemy.prototype.Move = function() {\n    var i = 0, sideWaysSpeed = 1.75, runFrame = 0;\n\n    this.WingTime++;\n    if (this.DeadTime > 0) {\n        this.DeadTime--;\n        \n        if (this.DeadTime === 0) {\n            this.DeadTime = 1;\n            for (i = 0; i < 8; i++) {\n                this.World.AddSprite(new Mario.Sparkle(this.World, ((this.X + Math.random() * 16 - 8) | 0) + 4, ((this.Y - Math.random() * 8) | 0) + 4, Math.random() * 2 - 1, Math.random() * -1, 0, 1, 5));\n            }\n            this.World.RemoveSprite(this);\n        }\n        \n        if (this.FlyDeath) {\n            this.X += this.Xa;\n            this.Y += this.Ya;\n            this.Ya *= 0.95;\n            this.Ya += 1;\n        }\n        return;\n    }\n    \n    if (this.Xa > 2) {\n        this.Facing = 1;\n    }\n    if (this.Xa < -2) {\n        this.Facing = -1;\n    }\n    \n    this.Xa = this.Facing * sideWaysSpeed;\n    \n    this.MayJump = this.OnGround;\n    \n    this.XFlip = this.Facing === -1;\n    \n    this.RunTime += Math.abs(this.Xa) + 5;\n    \n    runFrame = ((this.RunTime / 20) | 0) % 2;\n    \n    if (!this.OnGround) {\n        runFrame = 1;\n    }\n    \n    if (!this.SubMove(this.Xa, 0)) {\n        this.Facing = -this.Facing;\n    }\n    this.OnGround = false;\n    this.SubMove(0, this.Ya);\n    \n    this.Ya *= this.Winged ? 0.95 : 0.85;\n    if (this.OnGround) {\n        this.Xa *= this.GroundInertia;\n    } else {\n        this.Xa *= this.AirInertia;\n    }\n    \n    if (!this.OnGround) {\n        if (this.Winged) {\n            this.Ya += 0.6;\n        } else {\n            this.Ya += 2;\n        }\n    } else if (this.Winged) {\n        this.Ya = -10;\n    }\n    \n    if (this.Winged) {\n        runFrame = ((this.WingTime / 4) | 0) % 2;\n    }\n    \n    this.XPic = runFrame;\n};\n\nMario.Enemy.prototype.SubMove = function(xa, ya) {\n    var collide = false;\n    \n    while (xa > 8) {\n        if (!this.SubMove(8, 0)) {\n            return false;\n        }\n        xa -= 8;\n    }\n    while (xa < -8) {\n        if (!this.SubMove(-8, 0)) {\n            return false;\n        }\n        xa += 8;\n    }\n    while (ya > 8) {\n        if (!this.SubMove(0, 8)) {\n            return false;\n        }\n        ya -= 8;\n    }\n    while (ya < -8) {\n        if (!this.SubMove(0, -8)) {\n            return false;\n        }\n        ya += 8;\n    }\n    \n    if (ya > 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (ya < 0) {\n        if (this.IsBlocking(this.X + xa, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (xa > 0) {\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n        \n        if (this.AvoidCliffs && this.OnGround && !this.World.Level.IsBlocking(((this.X + this.Xa + this.Width) / 16) | 0, ((this.Y / 16) + 1) | 0, this.Xa, 1)) {\n            collide = true;\n        }\n    }\n    if (xa < 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n        \n        if (this.AvoidCliffs && this.OnGround && !this.World.Level.IsBlocking(((this.X + this.Xa - this.Width) / 16) | 0, ((this.Y / 16) + 1) | 0, this.Xa, 1)) {\n            collide = true;\n        }\n    }\n    \n    if (collide) {\n        if (xa < 0) {\n            this.X = (((this.X - this.Width) / 16) | 0) * 16 + this.Width;\n            this.Xa = 0;\n        }\n        if (xa > 0) {\n            this.X = (((this.X + this.Width) / 16 + 1) | 0) * 16 - this.Width - 1;\n            this.Xa = 0;\n        }\n        if (ya < 0) {\n            this.Y = (((this.Y - this.Height) / 16) | 0) * 16 + this.Height;\n            this.JumpTime = 0;\n            this.Ya = 0;\n        }\n        if (ya > 0) {\n            this.Y = (((this.Y - 1) / 16 + 1) | 0) * 16 - 1;\n            this.OnGround = true;\n        }\n        \n        return false;\n    } else {\n        this.X += xa;\n        this.Y += ya;\n        return true;\n    }\n};\n\nMario.Enemy.prototype.IsBlocking = function(x, y, xa, ya) {\n    x = (x / 16) | 0;\n    y = (y / 16) | 0;\n    \n    if (x === (this.X / 16) | 0 && y === (this.Y / 16) | 0) {\n        return false;\n    }\n    \n    return this.World.Level.IsBlocking(x, y, xa, ya);\n};\n\nMario.Enemy.prototype.ShellCollideCheck = function(shell) {\n    if (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xd = shell.X - this.X, yd = shell.Y - this.Y;\n    if (xd > -16 && xd < 16) {\n        if (yd > -this.Height && yd < shell.Height) {\n            Enjine.Resources.PlaySound(\"kick\");\n            \n            this.Xa = shell.Facing * 2;\n            this.Ya = -5;\n            this.FlyDeath = true;\n            if (this.SpriteTemplate !== null) {\n                this.SpriteTemplate.IsDead = true;\n            }\n            this.DeadTime = 100;\n            this.Winged = false;\n            this.YFlip = true;\n            return true;\n        }\n    }\n    return false;\n};\n\nMario.Enemy.prototype.FireballCollideCheck = function(fireball) {\n    if (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xd = fireball.X - this.X, yd = fireball.Y - this.Y;\n    if (xd > -16 && xd < 16) {\n        if (yd > -this.Height && yd < fireball.Height) {\n            if (this.NoFireballDeath) {\n                return true;\n            }\n        \n            Enjine.Resources.PlaySound(\"kick\");\n            \n            this.Xa = fireball.Facing * 2;\n            this.Ya = -5;\n            this.FlyDeath = true;\n            if (this.SpriteTemplate !== null) {\n                this.SpriteTemplate.IsDead = true;\n            }\n            this.DeadTime = 100;\n            this.Winged = false;\n            this.YFlip = true;\n            return true;\n        }\n    }\n};\n\nMario.Enemy.prototype.BumpCheck = function(xTile, yTile) {\n    if (this.DeadTime !== 0) {\n        return;\n    }\n    \n    if (this.X + this.Width > xTile * 16 && this.X - this.Width < xTile * 16 + 16 && yTile === ((this.Y - 1) / 16) | 0) {\n        Enjine.Resources.PlaySound(\"kick\");\n        \n        this.Xa = -Mario.MarioCharacter.Facing * 2;\n        this.Ya = -5;\n        this.FlyDeath = true;\n        if (this.SpriteTemplate !== null) {\n            this.SpriteTemplate.IsDead = true;\n        }\n        this.DeadTime = 100;\n        this.Winged = false;\n        this.YFlip = true;\n    }\n};\n\nMario.Enemy.prototype.SubDraw = Mario.NotchSprite.prototype.Draw;\n\nMario.Enemy.prototype.Draw = function(context, camera) {\n    var xPixel = 0, yPixel = 0;\n    \n    if (this.Winged) {\n        xPixel = ((this.XOld + (this.X - this.XOld) * this.Delta) | 0) - this.XPicO;\n        yPixel = ((this.YOld + (this.Y - this.YOld) * this.Delta) | 0) - this.YPicO;\n        \n        if (this.Type !== Mario.Enemy.RedKoopa && this.Type !== Mario.Enemy.GreenKoopa) {\n            this.XFlip = !this.XFlip;\n            context.save();\n            context.scale(this.XFlip ? -1 : 1, this.YFlip ? -1 : 1);\n            context.translate(this.XFlip ? -320 : 0, this.YFlip ? -240 : 0);\n            context.drawImage(this.Image, (((this.WingTime / 4) | 0) % 2) * 16, 4 * 32, 16, 32,\n                this.XFlip ? (320 - xPixel - 24) : xPixel - 8, this.YFlip ? (240 - yPixel - 32) : yPixel - 8, 16, 32);\n            context.restore();\n            this.XFlip = !this.XFlip;\n        }\n    }\n    \n    this.SubDraw(context, camera);\n    \n    if (this.Winged) {\n        xPixel = ((this.XOld + (this.X - this.XOld) * this.Delta) | 0) - this.XPicO;\n        yPixel = ((this.YOld + (this.Y - this.YOld) * this.Delta) | 0) - this.YPicO;\n        \n        if (this.Type === Mario.Enemy.RedKoopa && this.Type === Mario.Enemy.GreenKoopa) {\n            context.save();\n            context.scale(this.XFlip ? -1 : 1, this.YFlip ? -1 : 1);\n            context.translate(this.XFlip ? -320 : 0, this.YFlip ? -240 : 0);\n            context.drawImage(this.Image, (((this.WingTime / 4) | 0) % 2) * 16, 4 * 32, 16, 32,\n                this.XFlip ? (320 - xPixel - 24) : xPixel - 8, this.YFlip ? (240 - yPixel) : yPixel - 8, 16, 32);\n            context.restore();\n        } else {\n            context.save();\n            context.scale(this.XFlip ? -1 : 1, this.YFlip ? -1 : 1);\n            context.translate(this.XFlip ? -320 : 0, this.YFlip ? -240 : 0);\n            context.drawImage(this.Image, (((this.WingTime / 4) | 0) % 2) * 16, 4 * 32, 16, 32,\n                this.XFlip ? (320 - xPixel - 24) : xPixel - 8, this.YFlip ? (240 - yPixel - 32) : yPixel - 8, 16, 32);\n            context.restore();\n        }\n    }\n};\n\n//Static variables\nMario.Enemy.RedKoopa = 0;\nMario.Enemy.GreenKoopa = 1;\nMario.Enemy.Goomba = 2;\nMario.Enemy.Spiky = 3;\nMario.Enemy.Flower = 4;","/**\n\tRepresents a fireball.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Fireball = function(world, x, y, facing) {\n\tthis.GroundInertia = 0.89;\n\tthis.AirInertia = 0.89;\n\t\n\tthis.Image = Enjine.Resources.Images[\"particles\"];\n\t\n\tthis.World = world;\n\tthis.X = x;\n\tthis.Y = y;\n\tthis.Facing = facing;\n\t\n\tthis.XPicO = 4;\n\tthis.YPicO = 4;\n\tthis.YPic = 3;\n\tthis.XPic = 4;\n\tthis.Height = 8;\n\tthis.Width = 4;\n\tthis.PicWidth = this.PicHeight = 8;\n\tthis.Ya = 4;\n\tthis.Dead = false;\n\tthis.DeadTime = 0;\n\tthis.Anim = 0;\n\tthis.OnGround = false;\n};\n\nMario.Fireball.prototype = new Mario.NotchSprite();\n\nMario.Fireball.prototype.Move = function() {\n\tvar i = 0, sideWaysSpeed = 8;\n\t\n\tif (this.DeadTime > 0) {\n\t\tfor (i = 0; i < 8; i++) {\n\t\t\tthis.World.AddSprite(new Mario.Sparkle(this.World, ((this.X + Math.random() * 8 - 4) | 0) + 4, ((this.Y + Math.random() * 8 - 4) | 0) + 2, Math.random() * 2 - 1 * this.Facing, Math.random() * 2 - 1, 0, 1, 5));\n\t\t}\n\t\tthis.World.RemoveSprite(this);\n\t\treturn;\n\t}\n\t\n\tif (this.Facing != 0) {\n\t\tthis.Anim++;\n\t}\n\t\n\tif (this.Xa > 2) {\n\t\tthis.Facing = 1;\n\t}\n\tif (this.Xa < -2) {\n\t\tthis.Facing = -1;\n\t}\n\t\n\tthis.Xa = this.Facing * sideWaysSpeed;\n\t\n\tthis.World.CheckFireballCollide(this);\n\t\n\tthis.FlipX = this.Facing === -1;\n\t\n\tthis.XPic = this.Anim % 4;\n\t\n\tif (!this.SubMove(this.Xa, 0)) {\n\t\tthis.Die();\n\t}\n\t\n\tthis.OnGround = false;\n\tthis.SubMove(0, this.Ya);\n\tif (this.OnGround) {\n\t\tthis.Ya = -10;\n\t}\n\t\n\tthis.Ya *= 0.95;\n\tif (this.OnGround) {\n\t\tthis.Xa *= this.GroundInertia;\n\t} else {\n\t\tthis.Xa *= this.AirInertia;\n\t}\n\t\n\tif (!this.OnGround) {\n\t\tthis.Ya += 1.5;\n\t}\n};\n\nMario.Fireball.prototype.SubMove = function(xa, ya) {\n    var collide = false;\n    \n    while (xa > 8) {\n        if (!this.SubMove(8, 0)) {\n            return false;\n        }\n        xa -= 8;\n    }\n    while (xa < -8) {\n        if (!this.SubMove(-8, 0)) {\n            return false;\n        }\n        xa += 8;\n    }\n    while (ya > 8) {\n        if (!this.SubMove(0, 8)) {\n            return false;\n        }\n        ya -= 8;\n    }\n    while (ya < -8) {\n        if (!this.SubMove(0, -8)) {\n            return false;\n        }\n        ya += 8;\n    }\n    \n    if (ya > 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (ya < 0) {\n        if (this.IsBlocking(this.X + xa, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (xa > 0) {\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (xa < 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (collide) {\n        if (xa < 0) {\n            this.X = (((this.X - this.Width) / 16) | 0) * 16 + this.Width;\n            this.Xa = 0;\n        }\n        if (xa > 0) {\n            this.X = (((this.X + this.Width) / 16 + 1) | 0) * 16 - this.Width - 1;\n            this.Xa = 0;\n        }\n        if (ya < 0) {\n            this.Y = (((this.Y - this.Height) / 16) | 0) * 16 + this.Height;\n            this.Ya = 0;\n        }\n        if (ya > 0) {\n            this.Y = (((this.Y - 1) / 16 + 1) | 0) * 16 - 1;\n            this.OnGround = true;\n        }\n        \n        return false;\n    } else {\n        this.X += xa;\n        this.Y += ya;\n        return true;\n    }\n};\n\nMario.Fireball.prototype.IsBlocking = function(x, y, xa, ya) {\n    x = (x / 16) | 0;\n    y = (y / 16) | 0;\n    \n    if (x === (this.X / 16) | 0 && y === (this.Y / 16) | 0) {\n        return false;\n    }\n    \n    return this.World.Level.IsBlocking(x, y, xa, ya);\n};\n\nMario.Fireball.prototype.Die = function() {\n\tthis.Dead = true;\n\tthis.Xa = -this.Facing * 2;\n\tthis.Ya = -5;\n\tthis.DeadTime = 100;\n};","/**\n\tRepresents a little sparkle object in the game.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Sparkle = function(world, x, y, xa, ya) {\n    this.World = world;\n    this.X = x;\n    this.Y = y;\n    this.Xa = xa;\n    this.Ya = ya;\n    this.XPic = (Math.random() * 2) | 0;\n    this.YPic = 0;\n    \n    this.Life = 10 + ((Math.random() * 5) | 0);\n    this.XPicStart = this.XPic;\n    this.XPicO = 4;\n    this.YPicO = 4;\n    \n    this.PicWidth = 8;\n    this.PicHeight = 8;\n    this.Image = Enjine.Resources.Images[\"particles\"];\n};\n\nMario.Sparkle.prototype = new Mario.NotchSprite();\n\nMario.Sparkle.prototype.Move = function() {\n    if (this.Life > 10) {\n        this.XPic = 7;\n    } else {\n        this.XPic = (this.XPicStart + (10 - this.Life) * 0.4) | 0;\n    }\n    \n    if (this.Life-- < 0) {\n        this.World.RemoveSprite(this);\n    }\n    \n    this.X += this.Xa;\n    this.Y += this.Ya;\n};","/**\n\tRepresents a simple little coin animation when popping out of the box.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.CoinAnim = function(world, x, y) {\n    this.World = world;\n    this.Life = 10;\n    this.Image = Enjine.Resources.Images[\"map\"];\n    this.PicWidth = this.PicHeight = 16;\n    this.X = x * 16;\n    this.Y = y * 16 - 16;\n    this.Xa = 0;\n    this.Ya = -6;\n    this.XPic = 0;\n    this.YPic = 2;\n};\n\nMario.CoinAnim.prototype = new Mario.NotchSprite();\n\nMario.CoinAnim.prototype.Move = function() {\n    var x = 0, y = 0;\n    if (this.Life-- < 0) {\n        this.World.RemoveSprite(this);\n        for (x = 0; x < 2; x++) {\n            for (y = 0; y < 2; y++) {\n                this.World.AddSprite(new Mario.Sparkle(this.World, (this.X + x * 8 + Math.random() * 8) | 0, (this.Y + y * 8 + Math.random() * 8) | 0, 0, 0, 0, 2, 5));\n            }\n        }\n    }\n    \n    this.XPic = this.Life & 3;\n    this.X += this.Xa;\n    this.Y += this.Ya;\n    this.Ya += 1;\n};","/**\n\tRepresents a life-giving mushroom.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Mushroom = function(world, x, y) {\n    this.RunTime = 0;\n    this.GroundInertia = 0.89;\n    this.AirInertia = 0.89;\n    this.OnGround = false;\n    this.Width = 4;\n    this.Height = 24;\n    this.World = world;\n    this.X = x;\n    this.Y = y;\n    this.Image = Enjine.Resources.Images[\"items\"];\n    this.XPicO = 8;\n    this.YPicO = 15;\n    this.YPic = 0;\n    this.Height = 12;\n    this.Facing = 1;\n    this.PicWidth = this.PicHeight = 16;\n    this.Life = 0;\n};\n\nMario.Mushroom.prototype = new Mario.NotchSprite();\n\nMario.Mushroom.prototype.CollideCheck = function() {\n    var xMarioD = Mario.MarioCharacter.X - this.X, yMarioD = Mario.MarioCharacter.Y - this.Y;\n    if (xMarioD > -16 && xMarioD < 16) {\n        if (yMarioD > -this.Height && yMarioD < Mario.MarioCharacter.Height) {\n            Mario.MarioCharacter.GetMushroom();\n            this.World.RemoveSprite(this);\n        }\n    }\n};\n\nMario.Mushroom.prototype.Move = function() {\n    if (this.Life < 9) {\n        this.Layer = 0;\n        this.Y--;\n        this.Life++;\n        return;\n    }\n    \n    var sideWaysSpeed = 1.75;\n    this.Layer = 1;\n    \n    if (this.Xa > 2) {\n        this.Facing = 1;\n    }\n    if (this.Xa < -2) {\n        this.Facing = -1;\n    }\n    \n    this.Xa = this.Facing * sideWaysSpeed;\n    \n    this.XFlip = this.Facing === -1;\n    this.RunTime += Math.abs(this.Xa) + 5;\n    \n    if (!this.SubMove(this.Xa, 0)) {\n        this.Facing = -this.Facing;\n    }\n    this.OnGround = false;\n    this.SubMove(0, this.Ya);\n    \n    this.Ya *= 0.85;\n    if (this.OnGround) {\n        this.Xa *= this.GroundInertia;\n    } else {\n        this.Xa *= this.AirInertia;\n    }\n    \n    if (!this.OnGround) {\n        this.Ya += 2;\n    }\n};\n\nMario.Mushroom.prototype.SubMove = function(xa, ya) {\n    var collide = false;\n    \n    while (xa > 8) {\n        if (!this.SubMove(8, 0)) {\n            return false;\n        }\n        xa -= 8;\n    }\n    while (xa < -8) {\n        if (!this.SubMove(-8, 0)) {\n            return false;\n        }\n        xa += 8;\n    }\n    while (ya > 8) {\n        if (!this.SubMove(0, 8)) {\n            return false;\n        }\n        ya -= 8;\n    }\n    while (ya < -8) {\n        if (!this.SubMove(0, -8)) {\n            return false;\n        }\n        ya += 8;\n    }\n    \n    if (ya > 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (ya < 0) {\n        if (this.IsBlocking(this.X + xa, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (xa > 0) {\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (xa < 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (collide) {\n        if (xa < 0) {\n            this.X = (((this.X - this.Width) / 16) | 0) * 16 + this.Width;\n            this.Xa = 0;\n        }\n        if (xa > 0) {\n            this.X = (((this.X + this.Width) / 16 + 1) | 0) * 16 - this.Width - 1;\n            this.Xa = 0;\n        }\n        if (ya < 0) {\n            this.Y = (((this.Y - this.Height) / 16) | 0) * 16 + this.Height;\n            this.JumpTime = 0;\n            this.Ya = 0;\n        }\n        if (ya > 0) {\n            this.Y = (((this.Y - 1) / 16 + 1) | 0) * 16 - 1;\n            this.OnGround = true;\n        }\n        \n        return false;\n    } else {\n        this.X += xa;\n        this.Y += ya;\n        return true;\n    }\n};\n\nMario.Mushroom.prototype.IsBlocking = function(x, y, xa, ya) {\n    x = (x / 16) | 0;\n    y = (y / 16) | 0;\n    \n    if (x === (this.X / 16) | 0 && y === (this.Y / 16) | 0) {\n        return false;\n    }\n    \n    return this.World.Level.IsBlocking(x, y, xa, ya);\n};\n\nMario.Mushroom.prototype.BumpCheck = function(x, y) {\n    if (this.X + this.Width > x * 16 && this.X - this.Width < x * 16 - 16 && y === ((y - 1) / 16) | 0) {\n        this.Facing = -Mario.MarioCharacter.Facing;\n        this.Ya = -10;\n    }\n};","/**\n\tRepresents a piece of a broken block.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Particle = function(world, x, y, xa, ya, xPic, yPic) {\n\tthis.World = world;\n\tthis.X = x;\n\tthis.Y = y;\n\tthis.Xa = xa;\n\tthis.Ya = ya;\n\tthis.XPic = (Math.random() * 2) | 0;\n\tthis.YPic = 0;\n\tthis.XPicO = 4;\n\tthis.YPicO = 4;\n\t\n\tthis.PicWidth = 8;\n\tthis.PicHeight = 8;\n\tthis.Life = 10;\n\t\n\tthis.Image = Enjine.Resources.Images[\"particles\"];\n};\n\nMario.Particle.prototype = new Mario.NotchSprite();\n\nMario.Particle.prototype.Move = function() {\n\tif (this.Life - this.Delta < 0) {\n\t\tthis.World.RemoveSprite(this);\n\t}\n\tthis.Life -= this.Delta;\n\t\n\tthis.X += this.Xa;\n\tthis.Y += this.Ya;\n\tthis.Ya *= 0.95;\n\tthis.Ya += 3;\n};","/**\n\tRepresents a fire powerup.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.FireFlower = function(world, x, y) {\n\tthis.Width = 4;\n\tthis.Height = 24;\n\t\n\tthis.World = world;\n\tthis.X = x;\n\tthis.Y = y;\n\tthis.Image = Enjine.Resources.Images[\"items\"];\n\t\n\tthis.XPicO = 8;\n\tthis.YPicO = 15;\n\tthis.XPic = 1;\n\tthis.YPic = 0;\n\tthis.Height = 12;\n\tthis.Facing = 1;\n\tthis.PicWidth = this.PicHeight = 16;\n\t\n\tthis.Life = 0;\n};\n\nMario.FireFlower.prototype = new Mario.NotchSprite();\n\nMario.FireFlower.prototype.CollideCheck = function() {\n\tvar xMarioD = Mario.MarioCharacter.X - this.X, yMarioD = Mario.MarioCharacter.Y - this.Y;\n\tif (xMarioD > -16 && xMarioD < 16) {\n\t\tif (yMarioD > -this.Height && yMarioD < Mario.MarioCharacter.Height) {\n\t\t\tMario.MarioCharacter.GetFlower();\n\t\t\tthis.World.RemoveSprite(this);\n\t\t}\n\t}\n};\n\nMario.FireFlower.prototype.Move = function() {\n\tif (this.Life < 9) {\n\t\tthis.Layer = 0;\n\t\tthis.Y--;\n\t\tthis.Life++;\n\t\treturn;\n\t}\n};","/**\n\tRepresents a bullet bill enemy.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.BulletBill = function(world, x, y, dir) {\n\tthis.Image = Enjine.Resources.Images[\"enemies\"];\n\tthis.World = world;\n\tthis.X = x;\n\tthis.Y = y;\n\tthis.Facing = dir;\n\t\n\tthis.XPicO = 8;\n\tthis.YPicO = 31;\n\tthis.Height = 12;\n\tthis.Width = 4;\n\tthis.PicWidth = 16;\n\tthis.YPic = 5;\n\tthis.XPic = 0;\n\tthis.Ya = -5;\n\tthis.DeadTime = 0;\n\tthis.Dead = false;\n\tthis.Anim = 0;\n};\n\nMario.BulletBill.prototype = new Mario.NotchSprite();\n\nMario.BulletBill.prototype.CollideCheck = function() {\n    if (this.Dead) {\n        return;\n    }\n    \n    var xMarioD = Mario.MarioCharacter.X - this.X, yMarioD = Mario.MarioCharacter.Y - this.Y;\n    if (xMarioD > -16 && xMarioD < 16) {\n        if (yMarioD > -this.Height && yMarioD < this.World.Mario.Height) {\n            if (Mario.MarioCharacter.Y > 0 && yMarioD <= 0 && (!Mario.MarioCharacter.OnGround || !Mario.MarioCharacter.WasOnGround)) {\n                Mario.MarioCharacter.Stomp(this);\n                this.Dead = true;\n                \n                this.Xa = 0;\n                this.Ya = 1;\n                this.DeadTime = 100;\n            } else {\n                Mario.MarioCharacter.GetHurt();\n            }\n        }\n    }\n};\n\nMario.BulletBill.prototype.Move = function() {\n    var i = 0, sideWaysSpeed = 4;\n    if (this.DeadTime > 0) {\n        this.DeadTime--;\n        \n        if (this.DeadTime === 0) {\n            this.DeadTime = 1;\n            for (i = 0; i < 8; i++) {\n                this.World.AddSprite(new Mario.Sparkle(((this.X + Math.random() * 16 - 8) | 0) + 4, ((this.Y + Math.random() * 8) | 0) + 4, Math.random() * 2 - 1, Math.random() * -1, 0, 1, 5));\n            }\n            this.World.RemoveSprite(this);\n        }\n        \n        this.X += this.Xa;\n        this.Y += this.Ya;\n        this.Ya *= 0.95;\n        this.Ya += 1;\n        \n        return;\n    }\n    \n    this.Xa = this.Facing * sideWaysSpeed;\n    this.XFlip = this.Facing === -1;\n    this.Move(this.Xa, 0);\n};\n\nMario.BulletBill.prototype.SubMove = function(xa, ya) {\n\tthis.X += xa;\n\treturn true;\n};\n\nMario.BulletBill.prototype.FireballCollideCheck = function(fireball) {\n    if (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xD = fireball.X - this.X, yD = fireball.Y - this.Y;\n    if (xD > -16 && xD < 16) {\n        if (yD > -this.Height && yD < fireball.Height) {\n            return true;\n        }\n    }\n    return false;\n};\n\nMario.BulletBill.prototype.ShellCollideCheck = function(shell) {\n    if (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xD = shell.X - this.X, yD = shell.Y - this.Y;\n    if (xD > -16 && xD < 16) {\n        if (yD > -this.Height && yD < shell.Height) {\n            Enjine.Resources.PlaySound(\"kick\");\n            this.Dead = true;\n            this.Xa = 0;\n            this.Ya = 1;\n            this.DeadTime = 100;\n            return true;\n        }\n    }\n    return false;\n};","/**\n\tRepresents a flower enemy.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.FlowerEnemy = function(world, x, y) {\n    this.Image = Enjine.Resources.Images[\"enemies\"];\n    this.World = world;\n    this.X = x;\n    this.Y = y;\n    this.Facing = 1;\n    this.Type = Mario.Enemy.Spiky;\n    this.Winged = false;\n    this.NoFireballDeath = false;\n    this.XPic = 0;\n    this.YPic = 6;\n    this.YPicO = 24;\n    this.Height = 12;\n    this.Width = 2;\n    this.YStart = y;\n    this.Ya = -8;\n    this.Y -= 1;\n    this.Layer = 0;\n    this.JumpTime = 0;\n    this.Tick = 0;\n    \n    var i = 0;\n    for (i = 0; i < 4; i++) {\n        this.Move();\n    }\n};\n\nMario.FlowerEnemy.prototype = new Mario.Enemy();\n\nMario.FlowerEnemy.prototype.Move = function() {\n    var i = 0, xd = 0;\n    if (this.DeadTime > 0) {\n        this.DeadTime--;\n        \n        if (this.DeadTime === 0) {\n            this.DeadTime = 1;\n            for (i = 0; i < 8; i++) {\n                this.World.AddSprite(new Mario.Sparkle(((this.X + Math.random() * 16 - 8) | 0)  + 4, ((this.Y + Math.random() * 8) | 0) + 4, Math.random() * 2 - 1, Math.random() * -1, 0, 1, 5));\n            }\n            this.World.RemoveSprite(this);\n        }\n        \n        this.X += this.Xa;\n        this.Y += this.Ya;\n        this.Ya *= 0.95;\n        this.Ya += 1;\n        \n        return;\n    }\n    \n    this.Tick++;\n    \n    if (this.Y >= this.YStart) {\n        this.YStart = this.Y;\n        xd = Math.abs(Mario.MarioCharacter.X - this.X) | 0;\n        this.JumpTime++;\n        if (this.JumpTime > 40 && xd > 24) {\n            this.Ya = -8;\n        } else {\n            this.Ya = 0;\n        }\n    } else {\n        this.JumpTime = 0;\n    }\n    \n    this.Y += this.Ya;\n    this.Ya *= 0.9;\n    this.Ya += 0.1;\n    \n    this.XPic = (((this.Tick / 2) | 0) & 1) * 2 + (((this.Tick / 6) | 0) & 1);\n};","/**\n\tRepresents a shell that once belonged to a now expired koopa.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nMario.Shell = function(world, x, y, type) {\n\tthis.World = world;\n\tthis.X = x;\n\tthis.Y = y;\n\t\n\tthis.YPic = type;\n\tthis.Image = Enjine.Resources.Images[\"enemies\"];\n\t\n\tthis.XPicO = 8;\n\tthis.YPicO = 31;\n\tthis.Width = 4;\n\tthis.Height = 12;\n\tthis.Facing = 0;\n\tthis.PicWidth = 16;\n\tthis.XPic = 4;\n\tthis.Ya = -5;\n\t\n\tthis.Dead = false;\n\tthis.DeadTime = 0;\n\tthis.Carried = false;\n\t\n\tthis.GroundInertia = 0.89;\n\tthis.AirInertia = 0.89;\n\tthis.OnGround = false;\n\tthis.Anim = 0;\n};\n\nMario.Shell.prototype = new Mario.NotchSprite();\n\nMario.Shell.prototype.FireballCollideCheck = function(fireball) {\n\tif (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xD = fireball.X - this.X, yD = fireball.Y - this.Y;\n    if (xD > -16 && xD < 16) {\n        if (yD > -this.Height && yD < fireball.Height) {\n\t\t\tif (this.Facing !== 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tEnjine.Resources.PlaySound(\"kick\");\n\t\t\t\n\t\t\tthis.Xa = fireball.Facing * 2;\n\t\t\tthis.Ya = -5;\n\t\t\tif (this.SpriteTemplate !== null) {\n\t\t\t\tthis.SpriteTemplate.IsDead = true;\n\t\t\t}\n\t\t\tthis.DeadTime = 100;\n\t\t\tthis.YFlip = true;\n\t\t\t\n            return true;\n        }\n    }\n    return false;\n};\n\nMario.Shell.prototype.CollideCheck = function() {\n\tif (this.Carried || this.Dead || this.DeadTime > 0) {\n\t\treturn;\n\t}\n\t\n\tvar xMarioD = Mario.MarioCharacter.X - this.X, yMarioD = Mario.MarioCharacter.Y - this.Y;\n\tif (xMarioD > -16 && xMarioD < 16) {\n        if (yMarioD > -this.Height && yMarioD < Mario.MarioCharacter.Height) {\n\t\t\tif (Mario.MarioCharacter.Ya > 0 && yMarioD <= 0 && (!Mario.MarioCharacter.OnGround || !Mario.MarioCharacter.WasOnGround)) {\n\t\t\t\tMario.MarioCharacter.Stomp(this);\n\t\t\t\tif (this.Facing !== 0) {\n\t\t\t\t\tthis.Xa = 0;\n\t\t\t\t\tthis.Facing = 0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.Facing = Mario.MarioCharacter.Facing;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.Facing !== 0) {\n\t\t\t\t\tMario.MarioCharacter.GetHurt();\n\t\t\t\t} else {\n\t\t\t\t\tMario.MarioCharacter.Kick(this);\n\t\t\t\t\tthis.Facing = Mario.MarioCharacter.Facing;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nMario.Shell.prototype.Move = function() {\n\tvar sideWaysSpeed = 11, i = 0;\n\tif (this.Carried) {\n\t\tthis.World.CheckShellCollide(this);\n\t\treturn;\n\t}\n\t\n\tif (this.DeadTime > 0) {\n\t\tthis.DeadTime--;\n\t\t\n\t\tif (this.DeadTime === 0) {\n\t\t\tthis.DeadTime = 1;\n\t\t\tfor (i = 0; i < 8; i++) {\n                this.World.AddSprite(new Mario.Sparkle(((this.X + Math.random() * 16 - 8) | 0) + 4, ((this.Y + Math.random() * 8) | 0) + 4, Math.random() * 2 - 1, Math.random() * -1, 0, 1, 5));\n            }\n\t\t\tthis.World.RemoveSprite(this);\n\t\t}\n\t\t\n\t\tthis.X += this.Xa;\n\t\tthis.Y += this.Ya;\n\t\tthis.Ya *= 0.95;\n\t\tthis.Ya += 1;\n\t\treturn;\n\t}\n\t\n\tif (this.Facing !== 0) {\n\t\tthis.Anim++;\n\t}\n\t\n\tif (this.Xa > 2) {\n\t\tthis.Facing = 1;\n\t}\n\tif (this.Xa < -2) {\n\t\tthis.Facing = -1;\n\t}\n\t\n\tthis.Xa = this.Facing * sideWaysSpeed;\n\t\n\tif (this.Facing !== 0) {\n\t\tthis.World.CheckShellCollide(this);\n\t}\n\t\n\tthis.XFlip = this.Facing === -1;\n\t\n\tthis.XPic = ((this.Anim / 2) | 0) % 4 + 3;\n    \n    if (!this.SubMove(this.Xa, 0)) {\n        Enjine.Resources.PlaySound(\"bump\");\n        this.Facing = -this.Facing;\n    }\n    this.OnGround = false;\n    this.SubMove(0, this.Ya);\n    \n    this.Ya *= 0.85;\n    if (this.OnGround) {\n        this.Xa *= this.GroundInertia;\n    } else {\n        this.Xa *= this.AirInertia;\n    }\n    \n    if (!this.OnGround) {\n        this.Ya += 2;\n    }\n};\n\nMario.Shell.prototype.SubMove = function(xa, ya) {\n    var collide = false;\n    \n    while (xa > 8) {\n        if (!this.SubMove(8, 0)) {\n            return false;\n        }\n        xa -= 8;\n    }\n    while (xa < -8) {\n        if (!this.SubMove(-8, 0)) {\n            return false;\n        }\n        xa += 8;\n    }\n    while (ya > 8) {\n        if (!this.SubMove(0, 8)) {\n            return false;\n        }\n        ya -= 8;\n    }\n    while (ya < -8) {\n        if (!this.SubMove(0, -8)) {\n            return false;\n        }\n        ya += 8;\n    }\n    \n    if (ya > 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, 0)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        } else if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya + 1, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (ya < 0) {\n        if (this.IsBlocking(this.X + xa, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        } else if (collide || this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (xa > 0) {\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa + this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    if (xa < 0) {\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - this.Height, xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya - ((this.Height / 2) | 0), xa, ya)) {\n            collide = true;\n        }\n        if (this.IsBlocking(this.X + xa - this.Width, this.Y + ya, xa, ya)) {\n            collide = true;\n        }\n    }\n    \n    if (collide) {\n        if (xa < 0) {\n            this.X = (((this.X - this.Width) / 16) | 0) * 16 + this.Width;\n            this.Xa = 0;\n        }\n        if (xa > 0) {\n            this.X = (((this.X + this.Width) / 16 + 1) | 0) * 16 - this.Width - 1;\n            this.Xa = 0;\n        }\n        if (ya < 0) {\n            this.Y = (((this.Y - this.Height) / 16) | 0) * 16 + this.Height;\n            this.Ya = 0;\n        }\n        if (ya > 0) {\n            this.Y = (((this.Y - 1) / 16 + 1) | 0) * 16 - 1;\n            this.OnGround = true;\n        }\n        \n        return false;\n    } else {\n        this.X += xa;\n        this.Y += ya;\n        return true;\n    }\n};\n\nMario.Shell.prototype.IsBlocking = function(x, y, xa, ya) {\n    x = (x / 16) | 0;\n    y = (y / 16) | 0;\n    \n    if (x === ((this.X / 16) | 0) && y === ((this.Y / 16) | 0)) {\n        return false;\n    }\n    \n    var blocking = this.World.Level.IsBlocking(x, y, xa, ya);\n    \n    if (blocking && ya === 0 && xa !== 0) {\n        this.World.Bump(x, y, true);\n    }\n    return blocking;\n};\n\nMario.Shell.prototype.BumpCheck = function(x, y) {\n    if (this.X + this.Width > x * 16 && this.X - this.Width < x * 16 + 16 && y === (((this.Y - 1) / 16) | 0)) {\n        this.Facing = -Mario.MarioCharacter.Facing;\n        this.Ya = -10;\n    }\n};\n\nMario.Shell.prototype.Die = function() {\n    this.Dead = true;\n    this.Carried = false;\n    this.Xa = -this.Facing * 2;\n    this.Ya = -5;\n    this.DeadTime = 100;\n};\n\nMario.Shell.prototype.ShellCollideCheck = function(shell) {\n    if (this.DeadTime !== 0) {\n        return false;\n    }\n    \n    var xD = shell.X - this.X, yD = shell.Y - this.Y;\n    if (xD > -16 && xD < 16) {\n        if (yD > -this.Height && yD < shell.Height) {\n            Enjine.Resources.PlaySound(\"kick\");\n            if (Mario.MarioCharacter.Carried === shell || Mario.MarioCharacter.Carried === this) {\n                Mario.MarioCharacter.Carried = null;\n            }\n            this.Die();\n            shell.Die();\n            return true;\n        }\n    }\n    return false;\n};\n\nMario.Shell.prototype.Release = function(mario) {\n    this.Carried = false;\n    this.Facing = Mario.MarioCharacter.Facing;\n    this.X += this.Facing * 8;\n};","/**\n\tDisplays the title screen and menu.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\nimport $ from \"jquery\";\n\nMario.TitleState = function() {\n    this.drawManager = null;\n    this.camera = null;\n    this.logoY = null;\n    this.bounce = null;\n    this.font = null;\n};\n\nMario.TitleState.prototype = new Enjine.GameState();\n\nMario.TitleState.prototype.Enter = function() {\n    this.drawManager = new Enjine.DrawableManager();\n    this.camera = new Enjine.Camera();\n\n    var bgGenerator = new Mario.BackgroundGenerator(2048, 15, true, Mario.LevelType.Overground);\n    var bgLayer0 = new Mario.BackgroundRenderer(bgGenerator.CreateLevel(), 320, 240, 2);\n    bgGenerator.SetValues(2048, 15, false, Mario.LevelType.Overground);\n    var bgLayer1 = new Mario.BackgroundRenderer(bgGenerator.CreateLevel(), 320, 240, 1);\n\n    this.title = new Enjine.Sprite();\n    this.title.Image = Enjine.Resources.Images[\"title\"];\n    this.title.X = 0;\n     this.title.Y = 120;\n\n    this.logo = new Enjine.Sprite();\n    this.logo.Image = Enjine.Resources.Images[\"logo\"];\n    this.logo.X = 0; this.logo.Y = 0;\n\n    this.font = Mario.SpriteCuts.CreateRedFont();\n    \n    this.font.Strings[0] = { String: \"Press S to Start\", X: 96, Y: 110 };\n    this.font.Strings[1] = { String: \"(S) Jump  (A)Fire\", X: 96, Y: 120};\n\n    this.logoY = 20;\n\n    this.drawManager.Add(bgLayer0);\n    this.drawManager.Add(bgLayer1);\n\n    this.bounce = 0;\n\n\tMario.GlobalMapState = new Mario.MapState();\n\t//set up the global main character variable\n\tMario.MarioCharacter = new Mario.Character();\n\tMario.MarioCharacter.Image = Enjine.Resources.Images[\"smallMario\"];\n\n    Mario.PlayTitleMusic();\n};\n\nMario.TitleState.prototype.Exit = function() {\n    Mario.StopMusic();\n\t\n    this.drawManager.Clear();\n    delete this.drawManager;\n    delete this.camera;\n    delete this.font;\n};\n\nMario.TitleState.prototype.Update = function(delta) {\n    this.bounce += delta * 2;\n    this.logoY = 20 + Math.sin(this.bounce) * 10;\n\n    this.camera.X += delta * 25;\n\n    this.drawManager.Update(delta);\n};\n\nMario.TitleState.prototype.Draw = function(context) {\n    this.drawManager.Draw(context, this.camera);\n\n    context.drawImage(Enjine.Resources.Images[\"title\"], 0, 120);\n    context.drawImage(Enjine.Resources.Images[\"logo\"], 0, this.logoY);\n\n    this.font.Draw(context, this.Camera);\n};\n\nMario.TitleState.prototype.CheckForChange = function(context) {\n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n        context.ChangeState(Mario.GlobalMapState);\n        $(document).trigger('enterGame');\n    }\n};\n","/**\n\tState that loads all the resources for the game.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\nimport $ from \"jquery\";\n\nMario.LoadingState = function(hasTouch) {\n    this.Images = [];\n    this.ImagesLoaded = false;\n    this.ScreenColor = 0;\n    this.ColorDirection = 1;\n    this.ImageIndex = 0;\n    this.SoundIndex = 0;\n    this.mobile = false;\n    if(hasTouch) { this.mobile = true; }\n};\n\nMario.LoadingState.prototype = new Enjine.GameState();\n\nMario.LoadingState.prototype.Enter = function() {\n    var i = 0;\n    for (i = 0; i < 15; i++) {\n        this.Images[i] = {};\n    }\n    \n    this.Images[0].name = \"background\";\n    this.Images[1].name = \"endScene\";\n    this.Images[2].name = \"enemies\";\n    this.Images[3].name = \"fireMario\";\n    this.Images[4].name = \"font\";\n    this.Images[5].name = \"gameOverGhost\";\n    this.Images[6].name = \"items\";\n    this.Images[7].name = \"logo\";\n    this.Images[8].name = \"map\";\n    this.Images[9].name = \"mario\";\n    this.Images[10].name = \"particles\";\n    this.Images[11].name = \"racoonMario\";\n    this.Images[12].name = \"smallMario\";\n    this.Images[13].name = \"title\";\n    this.Images[14].name = \"worldMap\";\n\n    this.Images[0].src = \"images/bgsheet.png\";\n    this.Images[1].src = \"images/endscene.gif\";\n    this.Images[2].src = \"images/enemysheet.png\";\n    this.Images[3].src = \"images/firemariosheet.png\";\n    this.Images[4].src = \"images/font.gif\";\n    this.Images[5].src = \"images/gameovergost.gif\";\n    this.Images[6].src = \"images/itemsheet.png\";\n    this.Images[7].src = \"images/logo.gif\";\n    this.Images[8].src = \"images/mapsheet.png\";\n    this.Images[9].src = \"images/mariosheet.png\";\n    this.Images[10].src = \"images/particlesheet.png\";\n    this.Images[11].src = \"images/racoonmariosheet.png\";\n    this.Images[12].src = \"images/smallmariosheet.png\";\n    this.Images[13].src = \"images/title.gif\";\n    this.Images[14].src = \"images/worldmap.png\";\n    \n    Enjine.Resources.AddImages(this.Images);\n    \n    var testAudio = new Audio();\n\t\n    if (testAudio.canPlayType(\"audio/mp3\")) {\n    \tEnjine.Resources.AddSound(\"1up\", \"sounds/1-up.mp3\", 1)\n\t\t    .AddSound(\"breakblock\", \"sounds/breakblock.mp3\")\n\t\t    .AddSound(\"bump\", \"sounds/bump.mp3\", 4)\n\t\t    .AddSound(\"cannon\", \"sounds/cannon.mp3\")\n\t\t    .AddSound(\"coin\", \"sounds/coin.mp3\", 5)\n\t\t    .AddSound(\"death\", \"sounds/death.mp3\", 1)\n\t\t    .AddSound(\"exit\", \"sounds/exit.mp3\", 1)\n\t\t    .AddSound(\"fireball\", \"sounds/fireball.mp3\", 1)\n\t\t    .AddSound(\"jump\", \"sounds/jump.mp3\")\n\t\t    .AddSound(\"kick\", \"sounds/kick.mp3\")\n\t\t    .AddSound(\"pipe\", \"sounds/pipe.mp3\", 1)\n\t\t    .AddSound(\"powerdown\", \"sounds/powerdown.mp3\", 1)\n\t\t    .AddSound(\"powerup\", \"sounds/powerup.mp3\", 1)\n\t\t    .AddSound(\"sprout\", \"sounds/sprout.mp3\", 1)\n\t\t    .AddSound(\"stagestart\", \"sounds/stagestart.mp3\", 1)\n\t\t    .AddSound(\"stomp\", \"sounds/stomp.mp3\", 2);\n    } else {\n\t    Enjine.Resources.AddSound(\"1up\", \"sounds/1-up.wav\", 1)\n\t\t    .AddSound(\"breakblock\", \"sounds/breakblock.wav\")\n\t\t    .AddSound(\"bump\", \"sounds/bump.wav\", 2)\n\t\t    .AddSound(\"cannon\", \"sounds/cannon.wav\")\n\t\t    .AddSound(\"coin\", \"sounds/coin.wav\", 5)\n\t\t    .AddSound(\"death\", \"sounds/death.wav\", 1)\n\t\t    .AddSound(\"exit\", \"sounds/exit.wav\", 1)\n\t\t    .AddSound(\"fireball\", \"sounds/fireball.wav\", 1)\n\t\t    .AddSound(\"jump\", \"sounds/jump.wav\", 1)\n\t\t    .AddSound(\"kick\", \"sounds/kick.wav\", 1)\n\t\t    .AddSound(\"message\", \"sounds/message.wav\", 1)\n\t\t    .AddSound(\"pipe\", \"sounds/pipe.wav\", 1)\n\t\t    .AddSound(\"powerdown\", \"sounds/powerdown.wav\", 1)\n\t\t    .AddSound(\"powerup\", \"sounds/powerup.wav\", 1)\n\t\t    .AddSound(\"sprout\", \"sounds/sprout.wav\", 1)\n\t\t    .AddSound(\"stagestart\", \"sounds/stagestart.wav\", 1)\n\t\t    .AddSound(\"stomp\", \"sounds/stomp.wav\", 1);\n    }\n    \n    //load the array of tile behaviors\n    Mario.Tile.LoadBehaviors();\n};\n\nMario.LoadingState.prototype.Exit = function() {\n    delete this.Images;\n};\n\nMario.LoadingState.prototype.Update = function(delta) {\n    if (!this.ImagesLoaded) {\n        this.ImagesLoaded = true;\n        var i = 0;\n        for (i = 0; i < this.Images.length; i++) {\n            if (Enjine.Resources.Images[this.Images[i].name].complete !== true) {\n                this.ImagesLoaded = false;\n                break;\n            }\n        }\n    }\n    \n    this.ScreenColor += this.ColorDirection * 255 * delta;\n    if (this.ScreenColor > 255) {\n        this.ScreenColor = 255;\n        this.ColorDirection = -1;\n    } else if (this.ScreenColor < 0) {\n        this.ScreenColor = 0;\n        this.ColorDirection = 1;\n    }\n};\n\nMario.LoadingState.prototype.Draw = function(context) {\n\n    var ww = 640, wh = 480, wr = ww/wh;\n   // console.log( Mario.isMobile());\n    if (this.mobile){\n        \n        wh = window.innerHeight -20 ;\n        ww = window.innerWidth -20 ;\n        if ( ww > wh){\n           \n            ww = Math.round(wr*wh);   \n       \n        } else {\n            wh = Math.round(ww/wr);\n        }\n\n        $('#canvas').attr('width', ww);\n        $('#canvas').attr('height', wh);\n    }\n\n    if (!this.ImagesLoaded) {\n        var color = parseInt(this.ScreenColor, 10);\n        context.fillStyle = \"rgb(\" + color + \",\" + color + \",\" + color + \")\";\n        context.fillRect(0, 0, ww, wh);\n    } else {\n        context.fillStyle = \"rgb(0, 0, 0)\";\n        context.fillRect(0, 0, ww, wh);\n    }\n\n    // if (!this.ImagesLoaded) {\n    //     var color = parseInt(this.ScreenColor, 10);\n    //     context.fillStyle = \"rgb(\" + color + \",\" + color + \",\" + color + \")\";\n    //     context.fillRect(0, 0, 640, 480);\n    // } else {\n    //     context.fillStyle = \"rgb(0, 0, 0)\";\n    //     context.fillRect(0, 0, 640, 480);\n    // }\n};\n\nMario.LoadingState.prototype.CheckForChange = function(context) {\n    if (this.ImagesLoaded) {\n\t\t//set up the global map state variable\n\t\tMario.GlobalMapState = new Mario.MapState();\n        \n        context.ChangeState(new Mario.TitleState());\n    }\n};","/**\n\tState shown when the player loses!\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\nimport $ from \"jquery\";\n\nMario.LoseState = function() {\n    this.drawManager = null;\n    this.camera = null;\n    this.gameOver = null;\n    this.font = null;\n    this.wasKeyDown = false;\n};\n\nMario.LoseState.prototype = new Enjine.GameState();\n\nMario.LoseState.prototype.Enter = function() {\n    this.drawManager = new Enjine.DrawableManager();\n    this.camera = new Enjine.Camera();\n    \n    this.gameOver = new Enjine.AnimatedSprite();\n    this.gameOver.Image = Enjine.Resources.Images[\"gameOverGhost\"];\n    this.gameOver.SetColumnCount(9);\n    this.gameOver.SetRowCount(1);\n    this.gameOver.AddNewSequence(\"turnLoop\", 0, 0, 0, 8);\n    this.gameOver.PlaySequence(\"turnLoop\", true);\n    this.gameOver.FramesPerSecond = 1/15;\n    this.gameOver.X = 112;\n    this.gameOver.Y = 68;\n    \n    this.font = Mario.SpriteCuts.CreateBlackFont();\n    this.font.Strings[0] = { String: \"Game over!\", X: 116, Y: 160 };\n    \n    this.drawManager.Add(this.font);\n    this.drawManager.Add(this.gameOver);\n    $(document).trigger('enterTitleState');\n};\n\nMario.LoseState.prototype.Exit = function() {\n    this.drawManager.Clear();\n    delete this.drawManager;\n    delete this.camera;\n    delete this.gameOver;\n    delete this.font;\n};\n\nMario.LoseState.prototype.Update = function(delta) {\n    this.drawManager.Update(delta);\n    if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n        this.wasKeyDown = true;\n    }\n};\n\nMario.LoseState.prototype.Draw = function(context) {\n    this.drawManager.Draw(context, this.camera);\n};\n\nMario.LoseState.prototype.CheckForChange = function(context) {\n    if (this.wasKeyDown && !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n        context.ChangeState(new Mario.TitleState());\n    }\n};","/**\n\tState that's shown when the player wins the game!\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\nimport $ from \"jquery\";\n\nMario.WinState = function() {\n    this.waitTime = 2;\n    this.drawManager = null;\n    this.camera = null;\n    this.font = null;\n    this.kissing = null;\n    this.wasKeyDown = false;\n};\n\nMario.WinState.prototype = new Enjine.GameState();\n\nMario.WinState.prototype.Enter = function() {\n    this.drawManager = new Enjine.DrawableManager();\n    this.camera = new Enjine.Camera();\n    \n    this.font = Mario.SpriteCuts.CreateBlackFont();\n    this.font.Strings[0] = { String: \"Thank you for saving me, Mario!\", X: 36, Y: 160 };\n    \n    this.kissing = new Enjine.AnimatedSprite();\n    this.kissing.Image = Enjine.Resources.Images[\"endScene\"];\n    this.kissing.X = 112;\n    this.kissing.Y = 52;\n    this.kissing.SetColumnCount(2);\n    this.kissing.SetRowCount(1);\n    this.kissing.AddNewSequence(\"loop\", 0, 0, 0, 1);\n    this.kissing.PlaySequence(\"loop\", true);\n    this.kissing.FramesPerSecond = 1/2;\n    \n    this.waitTime = 2;\n    \n    this.drawManager.Add(this.font);\n    this.drawManager.Add(this.kissing);\n};\n\nMario.WinState.prototype.Exit = function() {\n    this.drawManager.Clear();\n    delete this.drawManager;\n    delete this.camera;\n};\n\nMario.WinState.prototype.Update = function(delta) {\n    this.drawManager.Update(delta);\n    \n    if (this.waitTime > 0) {\n        this.waitTime -= delta;\n    } else {\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n            this.wasKeyDown = true;\n        }\n    }\n};\n\nMario.WinState.prototype.Draw = function(context) {\n    this.drawManager.Draw(context, this.camera);\n};\n\nMario.WinState.prototype.CheckForChange = function(context) {\n    if (this.waitTime <= 0) {\n        if (this.wasKeyDown && !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n            context.ChangeState(new Mario.TitleState());\n        }\n    }\n};","/**\n\tState for moving between different playable levels.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\nimport $ from \"jquery\";\n\nMario.MapTile = {\n    Grass: 0,\n    Water: 1,\n    Level: 2,\n    Road: 3,\n    Decoration: 4\n};\n\nMario.MapState = function() {\n    this.camera = new Enjine.Camera();\n\n    this.Level = [];\n    this.Data = [];\n    this.XMario = 0; this.YMario = 0;\n    this.XMarioA = 0; this.YMarioA = 0;\n    this.MoveTime = 0;\n    this.LevelId = 0;\n    this.Farthest = 0;\n    this.XFarthestCap = 0;\n    this.YFarthestCap = 0;\n    this.MapImage = document.createElement(\"canvas\");\n    this.MapImage.width = 320;\n    this.MapImage.height = 240;\n    this.MapContext = this.MapImage.getContext(\"2d\");\n    this.CanEnterLevel = false;\n    this.EnterLevel = false;\n    this.LevelDifficulty = 0;\n    this.LevelType = 0;\n\n    this.WorldNumber = -1;\n    this.NextWorld();\n};\n\nMario.MapState.prototype = new Enjine.GameState();\n\nMario.MapState.prototype.Enter = function() {\n    this.WaterSprite = new Enjine.AnimatedSprite();\n    this.WaterSprite.Image = Enjine.Resources.Images[\"worldMap\"];\n    this.WaterSprite.SetColumnCount(16);\n    this.WaterSprite.SetRowCount(16);\n    this.WaterSprite.AddNewSequence(\"loop\", 14, 0, 14, 3);\n    this.WaterSprite.FramesPerSecond = 1/3;\n    this.WaterSprite.PlaySequence(\"loop\", true);\n    this.WaterSprite.X = 0;\n    this.WaterSprite.Y = 0;\n\n    this.DecoSprite = new Enjine.AnimatedSprite();\n    this.DecoSprite.Image = Enjine.Resources.Images[\"worldMap\"];\n    this.DecoSprite.SetColumnCount(16);\n    this.DecoSprite.SetRowCount(16);\n    this.DecoSprite.AddNewSequence(\"world0\", 10, 0, 10, 3);\n    this.DecoSprite.AddNewSequence(\"world1\", 11, 0, 11, 3);\n    this.DecoSprite.AddNewSequence(\"world2\", 12, 0, 12, 3);\n    this.DecoSprite.AddNewSequence(\"world3\", 13, 0, 13, 3);\n    this.DecoSprite.FramesPerSecond = 1/3;\n    this.DecoSprite.PlaySequence(\"world0\", true);\n    this.DecoSprite.X = 0;\n    this.DecoSprite.Y = 0;\n\n    this.HelpSprite = new Enjine.AnimatedSprite();\n    this.HelpSprite.Image = Enjine.Resources.Images[\"worldMap\"];\n    this.HelpSprite.SetColumnCount(16);\n    this.HelpSprite.SetRowCount(16);\n    this.HelpSprite.AddNewSequence(\"help\", 7, 3, 7, 5);\n    this.HelpSprite.FramesPerSecond = 1/2;\n    this.HelpSprite.PlaySequence(\"help\", true);\n    this.HelpSprite.X = 0;\n    this.HelpSprite.Y = 0;\n\n    this.SmallMario = new Enjine.AnimatedSprite();\n    this.SmallMario.Image = Enjine.Resources.Images[\"worldMap\"];\n    this.SmallMario.SetColumnCount(16);\n    this.SmallMario.SetRowCount(16);\n    this.SmallMario.AddNewSequence(\"small\", 1, 0, 1, 1);\n    this.SmallMario.FramesPerSecond = 1/3;\n    this.SmallMario.PlaySequence(\"small\", true);\n    this.SmallMario.X = 0;\n    this.SmallMario.Y = 0;\n\n    this.LargeMario = new Enjine.AnimatedSprite();\n    this.LargeMario.Image = Enjine.Resources.Images[\"worldMap\"];\n    this.LargeMario.SetColumnCount(16);\n    this.LargeMario.SetRowCount(8);\n    this.LargeMario.AddNewSequence(\"large\", 0, 2, 0, 3);\n    this.LargeMario.AddNewSequence(\"fire\", 0, 4, 0, 5);\n    this.LargeMario.FramesPerSecond = 1/3;\n    this.LargeMario.PlaySequence(\"large\", true);\n    this.LargeMario.X = 0;\n    this.LargeMario.Y = 0;\n\n    this.FontShadow = Mario.SpriteCuts.CreateBlackFont();\n    this.Font = Mario.SpriteCuts.CreateWhiteFont();\n\n    //get the correct world decoration\n    this.DecoSprite.PlaySequence(\"world\" + (this.WorldNumber % 4), true);\n\n    if (!Mario.MarioCharacter.Fire) {\n        this.LargeMario.PlaySequence(\"large\", true);\n    } else {\n        this.LargeMario.PlaySequence(\"fire\", true);\n    }\n\n    this.EnterLevel = false;\n    this.LevelDifficulty = 0;\n    this.LevelType = 0;\n\n\tMario.PlayMapMusic();\n};\n\nMario.MapState.prototype.Exit = function() {\n\t  Mario.StopMusic();\n\n    delete this.WaterSprite;\n    delete this.DecoSprite;\n    delete this.HelpSprite;\n    delete this.SmallMario;\n    delete this.LargeMario;\n    delete this.FontShadow;\n    delete this.Font;\n};\n\nMario.MapState.prototype.NextWorld = function() {\n    var generated = false;\n    this.WorldNumber++;\n\n    //The player has won, wait for CheckForChange to get called\n    if (this.WorldNumber === 8) {\n        return;\n    }\n\n    this.MoveTime = 0;\n    this.LevelId = 0;\n    this.Farthest = 0;\n    this.XFarthestCap = 0;\n    this.YFarthestCap = 0;\n\n    while (!generated) {\n        generated = this.GenerateLevel();\n    }\n    this.RenderStatic();\n};\n\nMario.MapState.prototype.GenerateLevel = function() {\n    var x = 0, y = 0, t0 = 0, t1 = 0, td = 0, t = 0;\n\n    var n0 = new Mario.ImprovedNoise((Math.random() * 9223372036854775807) | 0);\n    var n1 = new Mario.ImprovedNoise((Math.random() * 9223372036854775807) | 0);\n    var dec = new Mario.ImprovedNoise((Math.random() * 9223372036854775807) | 0);\n\n    var width = 320 / 16 + 1;\n    var height = 240 / 16 + 1;\n    this.Level = [];\n    this.Data = [];\n\n    var xo0 = Math.random() * 512;\n    var yo0 = Math.random() * 512;\n    var xo1 = Math.random() * 512;\n    var yo1 = Math.random() * 512;\n\n    for (x = 0; x < width; x++) {\n        this.Level[x] = [];\n        this.Data[x] = [];\n\n        for (y = 0; y < height; y++) {\n\n            t0 = n0.PerlinNoise(x * 10 + xo0, y * 10 + yo0);\n            t1 = n1.PerlinNoise(x * 10 + xo1, y * 10 + yo1);\n            td = t0 - t1;\n            t = td * 2;\n\n            this.Level[x][y] = t > 0 ? Mario.MapTile.Water : Mario.MapTile.Grass;\n        }\n    }\n\n    var lowestX = 9999, lowestY = 9999, i = 0;\n    t = 0;\n\n    for (i = 0; i < 100 && t < 12; i++) {\n        x = ((Math.random() * (((width - 1) / 3) | 0)) | 0) * 3 + 2;\n        y = ((Math.random() * (((height - 1) / 3) | 0)) | 0) * 3 + 1;\n        if (this.Level[x][y] === Mario.MapTile.Grass) {\n            if (x < lowestX) {\n                lowestX = x;\n                lowestY = y;\n            }\n            this.Level[x][y] = Mario.MapTile.Level;\n            this.Data[x][y] = -1;\n            t++;\n        }\n    }\n\n    this.Data[lowestX][lowestY] = -2;\n\n    var connection = true;\n    while (connection) { connection = this.FindConnection(width, height); }\n    this.FindCaps(width, height);\n\n    if (this.XFarthestCap === 0) {\n        return false;\n    }\n\n    this.Data[this.XFarthestCap][this.YFarthestCap] = -2;\n    this.Data[(this.XMario / 16) | 0][(this.YMario / 16) | 0] = -11;\n\n    for (x = 0; x < width; x++) {\n        for (y = 0; y < height; y++) {\n            if (this.Level[x][y] === Mario.MapTile.Grass && (x !== this.XFarthestCap || y !== this.YFarthestCap - 1)) {\n                t0 = dec.PerlinNoise(x * 10 + xo0, y * 10 + yo0);\n                if (t0 > 0) {\n                    this.Level[x][y] = Mario.MapTile.Decoration;\n                }\n            }\n        }\n    }\n\n    return true;\n};\n\nMario.MapState.prototype.FindConnection = function(width, height) {\n    var x = 0, y = 0;\n    for (x = 0; x < width; x++) {\n        for (y = 0; y < height; y++) {\n            if (this.Level[x][y] === Mario.MapTile.Level && this.Data[x][y] === -1) {\n                this.Connect(x, y, width, height);\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\nMario.MapState.prototype.Connect = function(xSource, ySource, width, height) {\n    var maxDistance = 10000, xTarget = 0, yTarget = 0, x = 0, y = 0,\n        xd = 0, yd = 0, d = 0;\n\n    for (x = 0; x < width; x++) {\n        for (y = 0; y < height; y++) {\n            if (this.Level[x][y] === Mario.MapTile.Level && this.Data[x][y] === -2) {\n                xd = Math.abs(xSource - x) | 0;\n                yd = Math.abs(ySource - y) | 0;\n                d = xd * xd + yd * yd;\n                if (d < maxDistance) {\n                    xTarget = x;\n                    yTarget = y;\n                    maxDistance = d;\n                }\n            }\n        }\n    }\n\n    this.DrawRoad(xSource, ySource, xTarget, yTarget);\n    this.Level[xSource][ySource] = Mario.MapTile.Level;\n    this.Data[xSource][ySource] = -2;\n    return;\n};\n\nMario.MapState.prototype.DrawRoad = function(x0, y0, x1, y1) {\n    var xFirst = false;\n    if (Math.random() > 0.5) {\n        xFirst = true;\n    }\n\n    if (xFirst) {\n        while (x0 > x1) {\n            this.Data[x0][y0] = 0;\n            this.Level[x0--][y0] = Mario.MapTile.Road;\n        }\n        while (x0 < x1) {\n            this.Data[x0][y0] = 0;\n            this.Level[x0++][y0] = Mario.MapTile.Road;\n        }\n    }\n\n    while (y0 > y1) {\n        this.Data[x0][y0] = 0;\n        this.Level[x0][y0--] = Mario.MapTile.Road;\n    }\n    while (y0 < y1) {\n        this.Data[x0][y0] = 0;\n        this.Level[x0][y0++] = Mario.MapTile.Road;\n    }\n\n    if (!xFirst) {\n        while (x0 > x1) {\n            this.Data[x0][y0] = 0;\n            this.Level[x0--][y0] = Mario.MapTile.Road;\n        }\n        while (x0 < x1) {\n            this.Data[x0][y0] = 0;\n            this.Level[x0++][y0] = Mario.MapTile.Road;\n        }\n    }\n};\n\nMario.MapState.prototype.FindCaps = function(width, height) {\n    var x = 0, y = 0, xCap = -1, yCap = -1, roads = 0, xx = 0, yy = 0;\n\n    for (x = 0; x < width; x++) {\n        for (y = 0; y < height; y++) {\n            if (this.Level[x][y] === Mario.MapTile.Level) {\n                roads = 0;\n\n                for (xx = x - 1; xx <= x + 1; xx++) {\n                    for (yy = y - 1; yy <= y + 1; yy++) {\n                        if (this.Level[xx][yy] === Mario.MapTile.Road) {\n                            roads++;\n                        }\n                    }\n                }\n\n                if (roads === 1) {\n                    if (xCap === -1) {\n                        xCap = x;\n                        yCap = y;\n                    }\n                    this.Data[x][y] = 0;\n                } else {\n                    this.Data[x][y] = 1;\n                }\n            }\n        }\n    }\n\n    this.XMario = xCap * 16;\n    this.YMario = yCap * 16;\n\n    this.Travel(xCap, yCap, -1, 0);\n};\n\nMario.MapState.prototype.Travel = function(x, y, dir, depth) {\n    if (this.Level[x][y] !== Mario.MapTile.Road && this.Level[x][y] !== Mario.MapTile.Level) {\n        return;\n    }\n\n    if (this.Level[x][y] === Mario.MapTile.Road) {\n        if (this.Data[x][y] === 1) {\n            return;\n        } else {\n            this.Data[x][y] = 1;\n        }\n    }\n\n    if (this.Level[x][y] === Mario.MapTile.Level) {\n        if (this.Data[x][y] > 0) {\n            if (this.LevelId !== 0 && ((Math.random() * 4) | 0) === 0) {\n                this.Data[x][y] = -3;\n            } else {\n                this.Data[x][y] = ++this.LevelId;\n            }\n        } else if (depth > 0) {\n            this.Data[x][y] = -1;\n            if (depth > this.Farthest) {\n                this.Farthest = depth;\n                this.XFarthestCap = x;\n                this.YFarthestCap = y;\n            }\n        }\n    }\n\n    if (dir !== 2) {\n        this.Travel(x - 1, y, 0, depth++);\n    }\n    if (dir !== 3) {\n        this.Travel(x, y - 1, 1, depth++);\n    }\n    if (dir !== 0) {\n        this.Travel(x + 1, y, 2, depth++);\n    }\n    if (dir !== 1) {\n        this.Travel(x, y + 1, 3, depth++);\n    }\n};\n\nMario.MapState.prototype.RenderStatic = function() {\n    var x = 0, y = 0, p0 = 0, p1 = 0, p2 = 0, p3 = 0, s = 0, xx = 0, yy = 0,\n        image = Enjine.Resources.Images[\"worldMap\"], type = 0;\n\n    //320 / 16 = 20\n    for (x = 0; x < 20; x++) {\n        //240 / 16 = 15\n        for (y = 0; y < 15; y++) {\n            this.MapContext.drawImage(image, ((this.WorldNumber / 4) | 0) * 16, 0, 16, 16, x * 16, y * 16, 16, 16);\n\n            if (this.Level[x][y] === Mario.MapTile.Level) {\n                type = this.Data[x][y];\n                if (type === 0) {\n                    this.MapContext.drawImage(image, 0, 7 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else if (type === -1) {\n                    this.MapContext.drawImage(image, 3 * 16, 8 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else if (type === -3) {\n                    this.MapContext.drawImage(image, 0, 8 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else if (type === -10) {\n                    this.MapContext.drawImage(image, 16, 8 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else if (type === -11) {\n                    this.MapContext.drawImage(image, 16, 7 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else if (type === -2) {\n                    this.MapContext.drawImage(image, 2 * 16, 7 * 16, 16, 16, x * 16, (y - 1) * 16, 16, 16);\n                    this.MapContext.drawImage(image, 2 * 16, 8 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                } else {\n                    this.MapContext.drawImage(image, (type - 1) * 16, 6 * 16, 16, 16, x * 16, y * 16, 16, 16);\n                }\n            } else if (this.Level[x][y] === Mario.MapTile.Road) {\n                p0 = this.IsRoad(x - 1, y) ? 1 : 0;\n                p1 = this.IsRoad(x, y - 1) ? 1 : 0;\n                p2 = this.IsRoad(x + 1, y) ? 1 : 0;\n                p3 = this.IsRoad(x, y + 1) ? 1 : 0;\n                s = p0 + (p1 * 2) + (p2 * 4) + (p3 * 8);\n                this.MapContext.drawImage(image, s * 16, 32, 16, 16, x * 16, y * 16, 16, 16);\n            } else if (this.Level[x][y] === Mario.MapTile.Water) {\n                for (xx = 0; xx < 2; xx++) {\n                    for (yy = 0; yy < 2; yy++) {\n                        p0 = this.IsWater(x * 2 + (xx - 1), y * 2 + (yy - 1)) ? 0 : 1;\n                        p1 = this.IsWater(x * 2 + xx, y * 2 + (yy - 1)) ? 0 : 1;\n                        p2 = this.IsWater(x * 2 + (xx - 1), y * 2 + yy) ? 0 : 1;\n                        p3 = this.IsWater(x * 2 + xx, y * 2 + yy) ? 0 : 1;\n                        s = p0 + (p1 * 2) + (p2 * 4) + (p3 * 8) - 1;\n                        if (s >= 0 && s <= 14) {\n                            this.MapContext.drawImage(image, s * 16, (4 + ((xx + yy) & 1)) * 16, 16, 16, x * 16 + xx * 8, y * 16 + yy * 8, 16, 16);\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nMario.MapState.prototype.IsRoad = function(x, y) {\n    if (x < 0) {\n        x = 0;\n    }\n    if (y < 0) {\n        y = 0;\n    }\n    if (this.Level[x][y] === Mario.MapTile.Road) {\n        return true;\n    }\n    if (this.Level[x][y] === Mario.MapTile.Level) {\n        return true;\n    }\n    return false;\n};\n\nMario.MapState.prototype.IsWater = function(x, y) {\n    var xx = 0, yy = 0;\n    if (x < 0) {\n        x = 0;\n    }\n    if (y < 0) {\n        y = 0;\n    }\n\n    for (xx = 0; xx < 2; xx++) {\n        for (yy = 0; yy < 2; yy++) {\n            if (this.Level[((x + xx) / 2) | 0][((y + yy) / 2) | 0] !== Mario.MapTile.Water) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n};\n\nMario.MapState.prototype.Update = function(delta) {\n    var x = 0, y = 0, difficulty = 0, type = 0;\n\n    if (this.WorldNumber === 8) {\n        return;\n    }\n\n    this.XMario += this.XMarioA;\n    this.YMario += this.YMarioA;\n\n    x = (this.XMario / 16) | 0;\n    y = (this.YMario / 16) | 0;\n\n    if (this.Level[x][y] === Mario.MapTile.Road) {\n        this.Data[x][y] = 0;\n    }\n\n    if (this.MoveTime > 0) {\n        this.MoveTime--;\n    } else {\n        this.XMarioA = 0;\n        this.YMarioA = 0;\n\n        if (this.CanEnterLevel && Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S)) {\n            if (this.Level[x][y] === Mario.MapTile.Level && this.Data[x][y] !== -11) {\n                if (this.Level[x][y] === Mario.MapTile.Level && this.Data[x][y] !== 0 && this.Data[x][y] > -10) {\n                    difficulty = this.WorldNumber + 1;\n                    Mario.MarioCharacter.LevelString = difficulty + \"-\";\n                    type = Mario.LevelType.Overground;\n\n                    if (this.Data[x][y] > 1 && ((Math.random() * 3) | 0) === 0) {\n                        type = Mario.LevelType.Underground;\n                    }\n\n                    if (this.Data[x][y] < 0) {\n                        if (this.Data[x][y] === -2) {\n                            Mario.MarioCharacter.LevelString += \"X\";\n                            difficulty += 2;\n                        } else if (this.Data[x][y] === -1) {\n                            Mario.MarioCharacter.LevelString += \"?\";\n                        } else {\n                            Mario.MarioCharacter.LevelString += \"#\";\n                            difficulty += 1;\n                        }\n\n                        type = Mario.LevelType.Castle;\n                    } else {\n                        Mario.MarioCharacter.LevelString += this.Data[x][y];\n                    }\n\n                    //TODO: stop music here\n                    this.EnterLevel = true;\n                    this.LevelDifficulty = difficulty;\n                    this.LevelType = type;\n                }\n            }\n        }\n\n        this.CanEnterLevel = !Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.S);\n\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Left)) {\n            this.TryWalking(-1, 0);\n        }\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Right)) {\n            this.TryWalking(1, 0);\n        }\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Up)) {\n            this.TryWalking(0, -1);\n        }\n        if (Enjine.KeyboardInput.IsKeyDown(Enjine.Keys.Down)) {\n            this.TryWalking(0, 1);\n        }\n    }\n\n    this.WaterSprite.Update(delta);\n    this.DecoSprite.Update(delta);\n    this.HelpSprite.Update(delta);\n    if (!Mario.MarioCharacter.Large) {\n        this.SmallMario.X = this.XMario + (this.XMarioA * delta) | 0;\n        this.SmallMario.Y = this.YMario + ((this.YMarioA * delta) | 0) - 6;\n        this.SmallMario.Update(delta);\n    } else {\n        this.LargeMario.X = this.XMario + (this.XMarioA * delta) | 0;\n        this.LargeMario.Y = this.YMario + ((this.YMarioA * delta) | 0) - 22;\n        this.LargeMario.Update(delta);\n    }\n};\n\nMario.MapState.prototype.TryWalking = function(xd, yd) {\n    var x = (this.XMario / 16) | 0, y = (this.YMario / 16) | 0, xt = x + xd, yt = y + yd;\n\n    if (this.Level[xt][yt] === Mario.MapTile.Road || this.Level[xt][yt] === Mario.MapTile.Level) {\n        if (this.Level[xt][yt] === Mario.MapTile.Road) {\n            if ((this.Data[xt][yt] !== 0) && (this.Data[x][y] !== 0 && this.Data[x][y] > -10)) {\n                return;\n            }\n        }\n\n        this.XMarioA = xd * 8;\n        this.YMarioA = yd * 8;\n        this.MoveTime = this.CalcDistance(x, y, xd, yd) * 2 + 1;\n    }\n};\n\nMario.MapState.prototype.CalcDistance = function(x, y, xa, ya) {\n    var distance = 0;\n    while (true) {\n        x += xa;\n        y += ya;\n        if (this.Level[x][y] !== Mario.MapTile.Road) {\n            return distance;\n        }\n        if (this.Level[x - ya][y + xa] === Mario.MapTile.Road) {\n            return distance;\n        }\n        if (this.Level[x + ya][y - xa] === Mario.MapTile.Road) {\n            return distance;\n        }\n        distance++;\n    }\n};\n\nMario.MapState.prototype.Draw = function(context) {\n    var x = 0, y = 0;\n\n    if (this.WorldNumber === 8) {\n        return;\n    }\n\n    context.drawImage(this.MapImage, 0, 0);\n\n    for (y = 0; y <= 15; y++) {\n        for (x = 20; x >= 0; x--) {\n            if (this.Level[x][y] === Mario.MapTile.Water) {\n                if (this.IsWater(x * 2 - 1, y * 2 - 1)) {\n                    this.WaterSprite.X = x * 16 - 8;\n                    this.WaterSprite.Y = y * 16 - 8;\n                    this.WaterSprite.Draw(context, this.camera);\n                }\n            } else if (this.Level[x][y] === Mario.MapTile.Decoration) {\n                this.DecoSprite.X = x * 16;\n                this.DecoSprite.Y = y * 16;\n                this.DecoSprite.Draw(context, this.camera);\n            } else if (this.Level[x][y] === Mario.MapTile.Level && this.Data[x][y] === -2) {\n                this.HelpSprite.X = x * 16 + 16;\n                this.HelpSprite.Y = y * 16 - 16;\n                this.HelpSprite.Draw(context, this.camera);\n            }\n        }\n    }\n\n    if (!Mario.MarioCharacter.Large) {\n        this.SmallMario.Draw(context, this.camera);\n    } else {\n        this.LargeMario.Draw(context, this.camera);\n    }\n\n    this.Font.Strings[0] = { String: \"MARIO \" + Mario.MarioCharacter.Lives, X: 4, Y: 4 };\n    this.FontShadow.Strings[0] = { String: \"MARIO \" + Mario.MarioCharacter.Lives, X: 5, Y: 5 };\n    this.Font.Strings[1] = { String: \"WORLD \" + (this.WorldNumber + 1), X: 256, Y: 4 };\n    this.FontShadow.Strings[1] = { String: \"WORLD \" + (this.WorldNumber + 1), X: 257, Y: 5 };\n\n    this.FontShadow.Draw(context, this.camera);\n    this.Font.Draw(context, this.camera);\n};\n\nMario.MapState.prototype.LevelWon = function() {\n    var x = this.XMario / 16, y = this.YMario / 16;\n    if (this.Data[x][y] === -2) {\n        this.NextWorld();\n        return;\n    }\n    if (this.Data[x][y] !== -3) {\n        this.Data[x][y] = 0;\n    } else {\n        this.Data[x][y] = -10;\n    }\n    this.RenderStatic();\n};\n\nMario.MapState.prototype.GetX = function() {\n    return 160;\n};\n\nMario.MapState.prototype.GetY = function() {\n    return 120;\n};\n\nMario.MapState.prototype.CheckForChange = function(context) {\n    if (this.WorldNumber === 8) {\n        context.ChangeState(new Mario.WinState());\n    }\n    if (this.EnterLevel) {\n        context.ChangeState(new Mario.LevelState(this.LevelDifficulty, this.LevelType));\n    }\n};\n","/**\n\tState for actually playing a randomly generated level.\n\tCode by Rob Kleffner, 2011\n*/\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\nimport $ from \"jquery\";\n\nMario.LevelState = function(difficulty, type) {\n    this.LevelDifficulty = difficulty;\n    this.LevelType = type;\n    this.Level = null;\n    this.Layer = null;\n    this.BgLayer = [];\n\n    this.Paused = false;\n    this.Sprites = null;\n    this.SpritesToAdd = null;\n    this.SpritesToRemove = null;\n    this.Camera = null;\n    this.ShellsToCheck = null;\n    this.FireballsToCheck = null;\n\n    this.FontShadow = null;\n    this.Font = null;\n\n    this.TimeLeft = 0;\n    this.StartTime = 0;\n    this.FireballsOnScreen = 0;\n    this.Tick = 0;\n\n    this.Delta = 0;\n\n\tthis.GotoMapState = false;\n\tthis.GotoLoseState = false;\n};\n\nMario.LevelState.prototype = new Enjine.GameState();\n\nMario.LevelState.prototype.Enter = function() {\n    var levelGenerator = new Mario.LevelGenerator(320, 15), i = 0, scrollSpeed = 0, w = 0, h = 0, bgLevelGenerator = null;\n    this.Level = levelGenerator.CreateLevel(this.LevelType, this.LevelDifficulty);\n\n    //play music here\n    if (this.LevelType === Mario.LevelType.Overground) {\n    \tMario.PlayOvergroundMusic();\n    } else if (this.LevelType === Mario.LevelType.Underground) {\n    \tMario.PlayUndergroundMusic();\n    } else if (this.LevelType === Mario.LevelType.Castle) {\n    \tMario.PlayCastleMusic();\n    }\n\n    this.Paused = false;\n    this.Layer = new Mario.LevelRenderer(this.Level, 320, 240);\n    this.Sprites = new Enjine.DrawableManager();\n    this.Camera = new Enjine.Camera();\n    this.Tick = 0;\n\n    this.ShellsToCheck = [];\n    this.FireballsToCheck = [];\n    this.SpritesToAdd = [];\n    this.SpritesToRemove = [];\n\n    this.FontShadow = Mario.SpriteCuts.CreateBlackFont();\n    this.Font = Mario.SpriteCuts.CreateWhiteFont();\n\n    for (i = 0; i < 2; i++) {\n        scrollSpeed = 4 >> i;\n        w = ((((this.Level.Width * 16) - 320) / scrollSpeed) | 0) + 320;\n        h = ((((this.Level.Height * 16) - 240) / scrollSpeed) | 0) + 240;\n        bgLevelGenerator = new Mario.BackgroundGenerator(w / 32 + 1, h / 32 + 1, i === 0, this.LevelType);\n        this.BgLayer[i] = new Mario.BackgroundRenderer(bgLevelGenerator.CreateLevel(), 320, 240, scrollSpeed);\n    }\n\n    Mario.MarioCharacter.Initialize(this);\n\n    this.Sprites.Add(Mario.MarioCharacter);\n    this.StartTime = 1;\n    this.TimeLeft = 200;\n\n\tthis.GotoMapState = false;\n    this.GotoLoseState = false;\n    $(document).trigger('enterLevel');\n};\n\nMario.LevelState.prototype.Exit = function() {\n\n    delete this.Level;\n    delete this.Layer;\n    delete this.BgLayer;\n    delete this.Sprites;\n    delete this.Camera;\n    delete this.ShellsToCheck;\n    delete this.FireballsToCheck;\n    delete this.FontShadow;\n    delete this.Font;\n};\n\nMario.LevelState.prototype.CheckShellCollide = function(shell) {\n    this.ShellsToCheck.push(shell);\n};\n\nMario.LevelState.prototype.CheckFireballCollide = function(fireball) {\n    this.FireballsToCheck.push(fireball);\n};\n\nMario.LevelState.prototype.Update = function(delta) {\n    var i = 0, j = 0, xd = 0, yd = 0, sprite = null, hasShotCannon = false, xCannon = 0, x = 0, y = 0,\n        dir = 0, st = null, b = 0;\n\n    this.Delta = delta;\n\n    this.TimeLeft -= delta;\n    if ((this.TimeLeft | 0) === 0) {\n        Mario.MarioCharacter.Die();\n    }\n\n    if (this.StartTime > 0) {\n        this.StartTime++;\n    }\n\n    this.Camera.X = Mario.MarioCharacter.X - 160;\n    if (this.Camera.X < 0) {\n        this.Camera.X = 0;\n    }\n    if (this.Camera.X > this.Level.Width * 16 - 320) {\n        this.Camera.X = this.Level.Width * 16 - 320;\n    }\n\n    this.FireballsOnScreen = 0;\n\n    for (i = 0; i < this.Sprites.Objects.length; i++) {\n        sprite = this.Sprites.Objects[i];\n        if (sprite !== Mario.MarioCharacter) {\n            xd = sprite.X - this.Camera.X;\n            yd = sprite.Y - this.Camera.Y;\n            if (xd < -64 || xd > 320 + 64 || yd < -64 || yd > 240 + 64) {\n                this.Sprites.RemoveAt(i);\n            } else {\n                if (sprite instanceof Mario.Fireball) {\n                    this.FireballsOnScreen++;\n                }\n            }\n        }\n    }\n\n    if (this.Paused) {\n        for (i = 0; i < this.Sprites.Objects.length; i++) {\n            if (this.Sprites.Objects[i] === Mario.MarioCharacter) {\n                this.Sprites.Objects[i].Update(delta);\n            } else {\n                this.Sprites.Objects[i].UpdateNoMove(delta);\n            }\n        }\n    } else {\n        this.Layer.Update(delta);\n        this.Level.Update();\n\n        hasShotCannon = false;\n        xCannon = 0;\n\t\tthis.Tick++;\n\n        for (x = ((this.Camera.X / 16) | 0) - 1; x <= (((this.Camera.X + this.Layer.Width) / 16) | 0) + 1; x++) {\n            for (y = ((this.Camera.Y / 16) | 0) - 1; y <= (((this.Camera.Y + this.Layer.Height) / 16) | 0) + 1; y++) {\n                dir = 0;\n\n                if (x * 16 + 8 > Mario.MarioCharacter.X + 16) {\n                    dir = -1;\n                }\n                if (x * 16 + 8 < Mario.MarioCharacter.X - 16) {\n                    dir = 1;\n                }\n\n                st = this.Level.GetSpriteTemplate(x, y);\n\n                if (st !== null) {\n                    if (st.LastVisibleTick !== this.Tick - 1) {\n                        if (st.Sprite === null || !this.Sprites.Contains(st.Sprite)) {\n                            st.Spawn(this, x, y, dir);\n                        }\n                    }\n\n                    st.LastVisibleTick = this.Tick;\n                }\n\n                if (dir !== 0) {\n                    b = this.Level.GetBlock(x, y);\n                    if (((Mario.Tile.Behaviors[b & 0xff]) & Mario.Tile.Animated) > 0) {\n                        if ((((b % 16) / 4) | 0) === 3 && ((b / 16) | 0) === 0) {\n                            if ((this.Tick - x * 2) % 100 === 0) {\n                                xCannon = x;\n                                for (i = 0; i < 8; i++) {\n                                    this.AddSprite(new Mario.Sparkle(this, x * 16 + 8, y * 16 + ((Math.random() * 16) | 0), Math.random() * dir, 0, 0, 1, 5));\n                                }\n                                this.AddSprite(new Mario.BulletBill(this, x * 16 + 8 + dir * 8, y * 16 + 15, dir));\n                                hasShotCannon = true;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (hasShotCannon) {\n            Enjine.Resources.PlaySound(\"cannon\");\n        }\n\n        for (i = 0; i < this.Sprites.Objects.length; i++) {\n            this.Sprites.Objects[i].Update(delta);\n        }\n\n        for (i = 0; i < this.Sprites.Objects.length; i++) {\n            this.Sprites.Objects[i].CollideCheck();\n        }\n\n        for (i = 0; i < this.ShellsToCheck.length; i++) {\n            for (j = 0; j < this.Sprites.Objects.length; j++) {\n                if (this.Sprites.Objects[j] !== this.ShellsToCheck[i] && !this.ShellsToCheck[i].Dead) {\n                    if (this.Sprites.Objects[j].ShellCollideCheck(this.ShellsToCheck[i])) {\n                        if (Mario.MarioCharacter.Carried === this.ShellsToCheck[i] && !this.ShellsToCheck[i].Dead) {\n                            Mario.MarioCharacter.Carried = null;\n                            this.ShellsToCheck[i].Die();\n                        }\n                    }\n                }\n            }\n        }\n        this.ShellsToCheck.length = 0;\n\n        for (i = 0; i < this.FireballsToCheck.length; i++) {\n            for (j = 0; j < this.Sprites.Objects.length; j++) {\n                if (this.Sprites.Objects[j] !== this.FireballsToCheck[i] && !this.FireballsToCheck[i].Dead) {\n                    if (this.Sprites.Objects[j].FireballCollideCheck(this.FireballsToCheck[i])) {\n                        this.FireballsToCheck[i].Die();\n                    }\n                }\n            }\n        }\n\n        this.FireballsToCheck.length = 0;\n    }\n\n    this.Sprites.AddRange(this.SpritesToAdd);\n    this.Sprites.RemoveList(this.SpritesToRemove);\n    this.SpritesToAdd.length = 0;\n    this.SpritesToRemove.length = 0;\n\n    this.Camera.X = (Mario.MarioCharacter.XOld + (Mario.MarioCharacter.X - Mario.MarioCharacter.XOld) * delta) - 160;\n    this.Camera.Y = (Mario.MarioCharacter.YOld + (Mario.MarioCharacter.Y - Mario.MarioCharacter.YOld) * delta) - 120;\n};\n\nMario.LevelState.prototype.Draw = function(context) {\n    var i = 0, time = 0, t = 0;\n\n    if (this.Camera.X < 0) {\n        this.Camera.X = 0;\n    }\n    if (this.Camera.Y < 0) {\n        this.Camera.Y = 0;\n    }\n    if (this.Camera.X > this.Level.Width * 16 - 320) {\n        this.Camera.X = this.Level.Width * 16 - 320;\n    }\n    if (this.Camera.Y > this.Level.Height * 16 - 240) {\n        this.Camera.Y = this.Level.Height * 16 - 240;\n    }\n\n    for (i = 0; i < 2; i++) {\n        this.BgLayer[i].Draw(context, this.Camera);\n    }\n\n    context.save();\n    context.translate(-this.Camera.X, -this.Camera.Y);\n    for (i = 0; i < this.Sprites.Objects.length; i++) {\n        if (this.Sprites.Objects[i].Layer === 0) {\n            this.Sprites.Objects[i].Draw(context, this.Camera);\n        }\n    }\n    context.restore();\n\n    this.Layer.Draw(context, this.Camera);\n    this.Layer.DrawExit0(context, this.Camera, Mario.MarioCharacter.WinTime === 0);\n\n    context.save();\n    context.translate(-this.Camera.X, -this.Camera.Y);\n    for (i = 0; i < this.Sprites.Objects.length; i++) {\n        if (this.Sprites.Objects[i].Layer === 1) {\n            this.Sprites.Objects[i].Draw(context, this.Camera);\n        }\n    }\n    context.restore();\n\n    this.Layer.DrawExit1(context, this.Camera);\n\n    this.DrawStringShadow(context, \"MARIO \" + Mario.MarioCharacter.Lives, 0, 0);\n    this.DrawStringShadow(context, \"00000000\", 0, 1);\n    this.DrawStringShadow(context, \"COIN\", 14, 0);\n    this.DrawStringShadow(context, \" \" + Mario.MarioCharacter.Coins, 14, 1);\n    this.DrawStringShadow(context, \"WORLD\", 24, 0);\n    this.DrawStringShadow(context, \" \" + Mario.MarioCharacter.LevelString, 24, 1);\n    this.DrawStringShadow(context, \"TIME\", 34, 0);\n    time = this.TimeLeft | 0;\n    if (time < 0) {\n        time = 0;\n    }\n    this.DrawStringShadow(context, \" \" + time, 34, 1);\n\n    if (this.StartTime > 0) {\n        t = this.StartTime + this.Delta - 2;\n        t = t * t * 0.6;\n        this.RenderBlackout(context, 160, 120, t | 0);\n    }\n\n    if (Mario.MarioCharacter.WinTime > 0) {\n    \tMario.StopMusic();\n        t = Mario.MarioCharacter.WinTime + this.Delta;\n        t = t * t * 0.2;\n\n        if (t > 900) {\n            //TODO: goto map state with level won\n\t\t\tMario.GlobalMapState.LevelWon();\n\t\t\tthis.GotoMapState = true;\n        }\n\n        this.RenderBlackout(context, ((Mario.MarioCharacter.XDeathPos - this.Camera.X) | 0), ((Mario.MarioCharacter.YDeathPos - this.Camera.Y) | 0), (320 - t) | 0);\n    }\n\n    if (Mario.MarioCharacter.DeathTime > 0) {\n    \tMario.StopMusic();\n        t = Mario.MarioCharacter.DeathTime + this.Delta;\n        t = t * t * 0.1;\n\n        if (t > 900) {\n            //TODO: goto map with level lost\n\t\t\tMario.MarioCharacter.Lives--;\n\t\t\tthis.GotoMapState = true;\n\t\t\tif (Mario.MarioCharacter.Lives <= 0) {\n\t\t\t\tthis.GotoLoseState = true;\n\t\t\t}\n        }\n\n        this.RenderBlackout(context, ((Mario.MarioCharacter.XDeathPos - this.Camera.X) | 0), ((Mario.MarioCharacter.YDeathPos - this.Camera.Y) | 0), (320 - t) | 0);\n    }\n};\n\nMario.LevelState.prototype.DrawStringShadow = function(context, string, x, y) {\n    this.Font.Strings[0] = { String: string, X: x * 8 + 4, Y: y * 8 + 4 };\n    this.FontShadow.Strings[0] = { String: string, X: x * 8 + 5, Y: y * 8 + 5 };\n    this.FontShadow.Draw(context, this.Camera);\n    this.Font.Draw(context, this.Camera);\n};\n\nMario.LevelState.prototype.RenderBlackout = function(context, x, y, radius) {\n    if (radius > 320) {\n        return;\n    }\n\n    var xp = [], yp = [], i = 0;\n    for (i = 0; i < 16; i++) {\n        xp[i] = x + (Math.cos(i * Math.PI / 15) * radius) | 0;\n        yp[i] = y + (Math.sin(i * Math.PI / 15) * radius) | 0;\n    }\n    xp[16] = 0;\n    yp[16] = y;\n    xp[17] = 0;\n    yp[17] = 240;\n    xp[18] = 320;\n    yp[18] = 240;\n    xp[19] = 320;\n    yp[19] = y;\n\n    context.fillStyle = \"#000\";\n    context.beginPath();\n    context.moveTo(xp[19], yp[19]);\n    for (i = 18; i >= 0; i--) {\n        context.lineTo(xp[i], yp[i]);\n    }\n    context.closePath();\n    context.fill();\n\n    for (i = 0; i < 16; i++) {\n        xp[i] = x - (Math.cos(i * Math.PI / 15) * radius) | 0;\n        yp[i] = y - (Math.sin(i * Math.PI / 15) * radius) | 0;\n    }\n    //cure a strange problem where the circle gets cut\n    yp[15] += 5;\n\n    xp[16] = 320;\n    yp[16] = y;\n    xp[17] = 320;\n    yp[17] = 0;\n    xp[18] = 0;\n    yp[18] = 0;\n    xp[19] = 0;\n    yp[19] = y;\n\n    context.fillStyle = \"#000\";\n    context.beginPath();\n    context.moveTo(xp[0], yp[0]);\n    for (i = 0; i <= xp.length - 1; i++) {\n        context.lineTo(xp[i], yp[i]);\n    }\n    context.closePath();\n    context.fill();\n};\n\nMario.LevelState.prototype.AddSprite = function(sprite) {\n    this.Sprites.Add(sprite);\n};\n\nMario.LevelState.prototype.RemoveSprite = function(sprite) {\n    this.Sprites.Remove(sprite);\n};\n\nMario.LevelState.prototype.Bump = function(x, y, canBreakBricks) {\n    var block = this.Level.GetBlock(x, y), xx = 0, yy = 0;\n\n    if ((Mario.Tile.Behaviors[block & 0xff] & Mario.Tile.Bumpable) > 0) {\n        this.BumpInto(x, y - 1);\n        this.Level.SetBlock(x, y, 4);\n        this.Level.SetBlockData(x, y, 4);\n\n        if ((Mario.Tile.Behaviors[block & 0xff] & Mario.Tile.Special) > 0) {\n            Enjine.Resources.PlaySound(\"sprout\");\n            if (!Mario.MarioCharacter.Large) {\n                this.AddSprite(new Mario.Mushroom(this, x * 16 + 8, y * 16 + 8));\n            } else {\n                this.AddSprite(new Mario.FireFlower(this, x * 16 + 8, y * 16 + 8));\n            }\n        } else {\n            Mario.MarioCharacter.GetCoin();\n            Enjine.Resources.PlaySound(\"coin\");\n            this.AddSprite(new Mario.CoinAnim(this, x, y));\n        }\n    }\n\n    if ((Mario.Tile.Behaviors[block & 0xff] & Mario.Tile.Breakable) > 0) {\n        this.BumpInto(x, y - 1);\n        if (canBreakBricks) {\n            Enjine.Resources.PlaySound(\"breakblock\");\n            this.Level.SetBlock(x, y, 0);\n            for (xx = 0; xx < 2; xx++) {\n                for (yy = 0; yy < 2; yy++) {\n                    this.AddSprite(new Mario.Particle(this, x * 16 + xx * 8 + 4, y * 16 + yy * 8 + 4, (xx * 2 - 1) * 4, (yy * 2 - 1) * 4 - 8));\n                }\n            }\n        }\n    }\n};\n\nMario.LevelState.prototype.BumpInto = function(x, y) {\n    var block = this.Level.GetBlock(x, y), i = 0;\n    if (((Mario.Tile.Behaviors[block & 0xff]) & Mario.Tile.PickUpable) > 0) {\n        Mario.MarioCharacter.GetCoin();\n        Enjine.Resources.PlaySound(\"coin\");\n        this.Level.SetBlock(x, y, 0);\n        this.AddSprite(new Mario.CoinAnim(x, y + 1));\n    }\n\n    for (i = 0; i < this.Sprites.Objects.length; i++) {\n        this.Sprites.Objects[i].BumpCheck(x, y);\n    }\n};\n\nMario.LevelState.prototype.CheckForChange = function(context) {\n\tif (this.GotoLoseState) {\n        context.ChangeState(new Mario.LoseState()); \n\t}\n\telse {\n\t\tif (this.GotoMapState) {\n            context.ChangeState(Mario.GlobalMapState);            \n            $(document).trigger('enterGame');    \n\t\t}\n\t}\n};\n","/*\n* using cross platform MIDI library MIDI.js http://www.midijs.net/\n*/\n\nimport Mario from './setup.js';\nimport Enjine from './../Enjine/core.js';\n\n// import * as MIDIjs from \"MIDIjs\";\nconst MIDIjs =  window.MIDIjs || {};\n\nvar midifiles = {\n\t\"title\" : \"midi/title.mid\",\n\t\"map\" : \"midi/map.mid\",\n\t\"background\" : \"midi/background.mid\",\n\t\"overground\" : \"midi/overground.mid\",\n\t\"underground\" : \"midi/underground.mid\",\n\t\"castle\" : \"midi/castle.mid\",\n};\n\nMario.PlayMusic = function(name) {\n\tif(name in midifiles)\n\t{\n\t\t// Currently we stop all playing tracks when playing a new one\n\t\t// MIDIjs can't play multiple at one time\n\t\tMIDIjs.stop();;\n\t\tMIDIjs.play(midifiles[name]);\n\t}else{\n\t\tconsole.error(\"Cannot play music track \" + name + \" as i have no data for it.\");\n\t}\n};\n\nMario.PlayTitleMusic = function() {\n\tMario.PlayMusic(\"title\");\n};\n\nMario.PlayMapMusic = function() {\n\tMario.PlayMusic(\"map\");\n};\n\nMario.PlayOvergroundMusic = function() {\n\tMario.PlayMusic(\"background\");\n};\n\nMario.PlayUndergroundMusic = function() {\n\tMario.PlayMusic(\"underground\");\n};\n\nMario.PlayCastleMusic = function() {\n\tMario.PlayMusic(\"castle\");\n};\n\nMario.StopMusic = function() {\n\tMIDIjs.stop();\n};\n","\r\n\r\nimport Enjine from './../Enjine/core.js';\r\nimport Mario from './setup.js';\r\n\r\nimport $ from \"jquery\";\r\n\r\nMario.runMarioRun = function(){\r\n    var isBtnClicked = false;\r\n      var hasTouch =  !!('ontouchstart' in window);\r\n      if(hasTouch) {\r\n          $('#mobile-controls').show();\r\n      } else {\r\n          $('#mobile-controls').hide();\r\n      }            \r\n\r\n      $(document).on('enterTitleState', function() {\r\n          $('#control-collection').hide();\r\n      });\r\n\r\n      $(document).on('enterGame', function(){\r\n          $('#control-collection').show();\r\n          $('#btnTop').show();\r\n          $('#btnBottom').show();\r\n      });\r\n\r\n      $(document).on('enterLevel', function() {\r\n          $('#btnTop').hide();\r\n          $('#btnBottom').hide();\r\n      });\r\n\r\n       $(document).ready(function () {\r\n       \r\n        window.rMR =  new Enjine.Application(hasTouch).Initialize(new Mario.LoadingState(hasTouch), 320, 240);                \r\n          $('#control-collection').hide();\r\n      });\r\n  }\r\n","import Enjine from './Enjine/core.js';\r\nimport Mario from './code/setup.js';\r\n\r\n window.rMR ={}; \r\n  export  *  from \"./Enjine/core.js\";\r\n  export  * from \"./Enjine/gameCanvas.js\";\r\n  export  * from \"./Enjine/keyboardInput.js\";\r\n  export  * from \"./Enjine/resources.js\";\r\n  export  * from \"./Enjine/drawable.js\";\r\n  export  * from \"./Enjine/state.js\";\r\n  export  * from \"./Enjine/gameTimer.js\";\r\n  export  * from \"./Enjine/camera.js\";\r\n  export  * from \"./Enjine/drawableManager.js\";\r\n  export  * from \"./Enjine/sprite.js\";\r\n  export  * from \"./Enjine/spriteFont.js\";\r\n  export  * from \"./Enjine/frameSprite.js\";\r\n  export  * from \"./Enjine/animatedSprite.js\";\r\n  export  * from \"./Enjine/collideable.js\";\r\n  export  * from \"./Enjine/application.js\";\r\n\r\n  export  * from \"./code/setup.js\";\r\n  export  * from \"./code/spriteCuts.js\";\r\n  export  * from \"./code/level.js\";\r\n  export  * from \"./code/backgroundGenerator.js\";\r\n  export  * from \"./code/backgroundRenderer.js\";\r\n  export  * from \"./code/improvedNoise.js\";\r\n  export  * from \"./code/notchSprite.js\";\r\n  export  * from \"./code/character.js\";\r\n  export  * from \"./code/levelRenderer.js\";\r\n  export  * from \"./code/levelGenerator.js\";\r\n  export  * from \"./code/spriteTemplate.js\";\r\n  export  * from \"./code/enemy.js\";\r\n  export  * from \"./code/fireball.js\";\r\n  export  * from \"./code/sparkle.js\";\r\n  export  * from \"./code/coinAnim.js\";\r\n  export  * from \"./code/mushroom.js\";\r\n  export  * from \"./code/particle.js\";\r\n  export  * from \"./code/fireFlower.js\";\r\n  export  * from \"./code/bulletBill.js\";\r\n  export  * from \"./code/flowerEnemy.js\";\r\n  export  * from \"./code/shell.js\";\r\n\r\n  export  * from \"./code/titleState.js\";\r\n  export  * from \"./code/loadingState.js\";\r\n  export  * from \"./code/loseState.js\";\r\n  export  * from \"./code/winState.js\";\r\n  export  * from \"./code/mapState.js\";\r\n  export  * from \"./code/levelState.js\";\r\n\r\n  export  * from \"./code/music.js\";\r\n  export  *  from \"./code/runmariorun.js\";\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport Mario from \"./game/mario/code/setup.js\";\r\n\r\nclass LeaderBoardContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { oracleID: window.localStorage.getItem('oracleID') };\r\n    this.history = this.props.history;\r\n\r\n    this.teamNames = [\"Energy Pirates\", \"Auto Rebeles\", \"Retail Rangers\", \"Consumer Seals\", \"Tele Warriors\", \"COE Snipers\", \"Travel Ninjas\", \"Core Battalion\", \"FIN Mafia\"];\r\n\r\n  }\r\n  playGame() {\r\n    this.history.push(\"/play\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    Mario.StopMusic();\r\n    let alreadyLoggedIn = window.localStorage.getItem('oracleID');\r\n    if (!alreadyLoggedIn) {\r\n      this.history.push('/');\r\n    }\r\n  }\r\n\r\n  renderTeamLeaderBoard() {\r\n\r\n    return (\r\n\r\n      <div className=\"card\" >\r\n        <div className=\"card-header\">\r\n          <div>Leading Teams</div>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {\r\n\r\n            this.teamNames.map((team, index) => {\r\n\r\n              return (\r\n                <div className=\"row\" key={'team-' + index}>\r\n                  <div className=\"col-sm-12\">\r\n                    <div className=\"team-name\">{team}</div>\r\n                  </div>\r\n                  <div className=\"col-sm\">\r\n                    Attempts<br />\r\n                    725\r\n    </div>\r\n                  <div className=\"col-sm\">\r\n                    Highest Level<br />\r\n                    7\r\n\r\n    </div>\r\n                  <div className=\"col-sm\">\r\n                    <img src=\"/images/coin-spinner.gif\" width=\"45\" alt=\"Coins Collected\" /> <br />\r\n                    17856\r\n    </div>\r\n                </div>\r\n              );\r\n\r\n            })\r\n\r\n          }\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPeopleBoard() {\r\n\r\n    return (\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <div>Top 10 Players</div>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {\r\n\r\n            this.teamNames.map((team, index) => {\r\n\r\n              return (\r\n                <div className=\"row\" key={'people-' + index}>\r\n                  <div className=\"col-sm-12\">\r\n                    <div className=\"team-name\">{team}</div>\r\n\r\n                  </div>\r\n                  <div className=\"col-sm\">\r\n                    Attempts<br />\r\n                    725\r\n    </div>\r\n                  <div className=\"col-sm\">\r\n                    Highest Level<br />\r\n                    7\r\n\r\n    </div>\r\n                  <div className=\"col-sm\">\r\n                    <img src=\"/images/coin-spinner.gif\" width=\"45\" alt=\"Coins Collected\" /> <br />\r\n                    17856\r\n    </div>\r\n                </div>\r\n              );\r\n\r\n            })\r\n\r\n          }\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMyTeamScorecard() {\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <div>My Team Score Card</div>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-sm\">\r\n              Attempts<br />\r\n              725\r\n    </div>\r\n            <div className=\"col-sm\">\r\n              Highest Level<br />\r\n              7\r\n\r\n    </div>\r\n            <div className=\"col-sm\">\r\n              <img src=\"/images/coin-spinner.gif\" width=\"45\" alt=\"Coins Collected\" /> <br />\r\n              17856\r\n    </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMyScorecard() {\r\n\r\n    return (\r\n      <div className=\"myscore card\">\r\n        <div className=\"card-header\">\r\n          <div>My Score Card</div>\r\n        </div>\r\n        <div className=\"card-body\">\r\n\r\n          <div className=\"row\">\r\n            <div className=\"col-sm\">\r\n              Attempts<br />\r\n              125\r\n    </div>\r\n            <div className=\"col-sm\">\r\n              Highest Level<br />\r\n              5\r\n\r\n    </div>\r\n            <div className=\"col-sm\">\r\n              <img src=\"/images/coin-spinner.gif\" width=\"45\" alt=\"Coins Collected\" /> <br />\r\n              1200\r\n    </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <section className=\"leaderboard-container container\">\r\n        <section className=\"greeting\">\r\n          <div className=\"user-info\">\r\n            Howdy Abhishek\r\n       </div>\r\n\r\n          <div className=\"play-info\">\r\n            <button className=\"btn btn-success\" onClick={() => this.playGame()}>Play Now</button>\r\n          </div>\r\n        </section>\r\n\r\n        <Tabs className=\"leaderboard-tabs\" defaultActiveKey=\"myscore\" id=\"battleground-mario-leaderboard\">\r\n          <Tab eventKey=\"myscore\" title=\"Me & My Team\">\r\n            {this.renderMyScorecard()}\r\n            {this.renderMyTeamScorecard()}\r\n          </Tab>\r\n        \r\n          <Tab eventKey=\"peopleboardscore\" title=\"Rock Stars\" >\r\n            {this.renderPeopleBoard()}\r\n          </Tab>\r\n          <Tab eventKey=\"leaderboardscore\" title=\"LeaderBoard\" >\r\n            {this.renderTeamLeaderBoard()}\r\n          </Tab>\r\n        </Tabs>\r\n\r\n      </section>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(LeaderBoardContainer);","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Mario from \"./game/mario/code/setup.js\";\r\n\r\nclass HomeContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { oracleID: '' };\r\n    this.history = this.props.history;\r\n  }\r\n\r\n  componentDidMount() {\r\n    Mario.StopMusic();\r\n    let alreadyLoggedIn = window.localStorage.getItem('oracleID');\r\n    if (alreadyLoggedIn > 0) {\r\n      this.history.push('/leaderboard');\r\n    }\r\n  }\r\n\r\n  doLogin() {\r\n    window.localStorage.setItem('oracleID', this.state.oracleID);\r\n    this.history.push('/leaderboard');\r\n  }\r\n\r\n  render() {\r\n    let template = '';\r\n    \r\n    if (!window.localStorage.getItem('timeup')) {\r\n      template = <form className=\"form-signin\" onSubmit={() => this.doLogin()}>\r\n\r\n        <div className=\"form-label-group\">\r\n          <label htmlFor=\"oracleID\">Enter your OracleID</label>\r\n          <input type=\"text\" id=\"oracleID\" className=\"form-control\" placeholder=\"e.g. 128687\" required=\"\" autoFocus=\"\" onChange={(e) => this.setState({ oracleID: e.target.value })} />\r\n\r\n        </div>\r\n\r\n        <button className=\"btn btn-lg btn-success btn-block\" type=\"submit\" >Login</button>\r\n\r\n      </form>;\r\n    } else {\r\n\r\n      template = <div className=\"sorry \"><h2 className=\"text-danger\">bye bye..</h2>  <div class='small'>They say its Timeout!! </div></div>\r\n    }\r\n\r\n    return (\r\n      <section className=\"home-container container\">\r\n        <section className=\"login-div\">\r\n          {template}\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(HomeContainer);\r\n","import React, { Component } from 'react';\r\nimport DeviceOrientation, { Orientation } from 'react-screen-orientation';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Mario from \"./mario/code/setup.js\";\r\n\r\nclass GameContainer extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { oracleID: window.localStorage.getItem('oracleID') };\r\n        this.history = this.props.history;\r\n        if (window.screen.orientation.type.indexOf('landscape') === 0) {\r\n            document.querySelector('body').setAttribute('class', 'black-bg');\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let alreadyLoggedIn = window.localStorage.getItem('oracleID');\r\n        if (!alreadyLoggedIn) {\r\n            this.history.push('/');\r\n        }\r\n\r\n        window.addEventListener('orientationchange', this.onOrientationChange);\r\n        if (window.screen.orientation.type.indexOf('landscape') === 0) {\r\n            Mario.runMarioRun();\r\n        }\r\n\r\n    }\r\n    onOrientationChange(e) {\r\n        console.log(e);\r\n        if (e) {\r\n            if (e.target.screen.orientation.type.indexOf('landscape') === 0) {\r\n                document.querySelector('body').setAttribute('class', 'black-bg');\r\n                window.runMarioRun();\r\n            } else {\r\n                window.Mario.StopMusic();\r\n                document.querySelector('body').removeAttribute('class');\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.rMR = null;\r\n        Mario.StopMusic();\r\n        document.querySelector('body').removeAttribute('class');\r\n    }\r\n    render() {\r\n        window.screen.orientation.onchange = this.onOrientationChange();\r\n        return (\r\n            <section className=\"mario-game\">\r\n                <button className=\"btn btn-secondary btn-sm go-back\" onClick={() => this.history.push('/')}><i className=\"fa fa-chevron-left\"></i> Back</button>\r\n                <DeviceOrientation lockOrientation={'landscape'}>\r\n                    <Orientation orientation='landscape' alwaysRender={false}>\r\n\r\n                        <canvas id=\"canvas\" width=\"640\" height=\"480\">\r\n                            <p>Your browser does not support the canvas element.</p>\r\n                        </canvas>\r\n                        <div id=\"mobile-controls\">\r\n                            <div>\r\n                                <div id=\"control-collection\">\r\n                                    <button className=\"btn btn-success top\" id=\"btnTop\" data-type=\"38\"><i className=\"fa fa-chevron-up\" aria-hidden=\"true\"></i></button>\r\n                                    <div>\r\n                                        <button className=\"btn btn-success\" id=\"btnLeft\" data-type=\"37\"><i className=\"fa fa-chevron-left\" aria-hidden=\"true\"></i></button>\r\n                                        <button className=\"btn btn-success\" id=\"btnRight\" data-type=\"39\"><i className=\"fa fa-chevron-right\" aria-hidden=\"true\"></i></button>\r\n                                    </div>\r\n                                    <button className=\"btn btn-success\" id=\"btnBottom\" data-type=\"40\"><i className=\"fa fa-chevron-down\" aria-hidden=\"true\"></i></button>\r\n                                </div>\r\n                            </div>\r\n                            <button className=\"btn btn-success right-controls\" id=\"btnFire\" data-type=\"65\">A</button>\r\n                            <button className=\"btn btn-success right-controls\" id=\"btnJump\" data-type=\"83\">S</button>\r\n\r\n                        </div>\r\n\r\n                    </Orientation>\r\n                    <Orientation orientation='portrait' alwaysRender={false}>\r\n                        <div className=\"cant-play\">\r\n                            <p>Please rotate your device</p>\r\n                        </div>\r\n                    </Orientation>\r\n                </DeviceOrientation>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(GameContainer);","export  const CONFIG  = {\r\n'endTime': '2019-12-31T12:33:00+05:30'\r\n};\r\n","import React, { Component } from 'react';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// import logo from './logo.svg';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  //Link\n} from \"react-router-dom\";\n\nimport './App.scss';\nimport { Mario, Enjine } from \"./containers/game/mario/gameinclude.js\";\n\nimport LeaderBoardContainer from './containers/LeaderBoardContainer';\nimport HomeContainer from './containers/HomeContainer';\nimport GameContainer from './containers/game/GameContainer';\nimport {CONFIG} from './config';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    }\n\n  componentDidMount() {\n   \n    let timer = setInterval(()=> checkTimeout(), 5000);\n    checkTimeout();  \n    function checkTimeout() {\n      let dt = new Date();\n      \n      let endTime = new Date(CONFIG.endTime);\n  \n      if (dt.getTime() > endTime.getTime()) {\n        window.localStorage.removeItem('oracleID');\n        window.localStorage.setItem('timeup', true);\n        clearInterval(timer);\n        if ( window.location.pathname !== '/'){\n         window.location.href='/'\n        \n        }\n      } else {\n        window.localStorage.removeItem('timeup');\n      }\n    }\n\n  }\n\n  render() {\n    return (\n      <Router>\n        <section className=\"app-container d-flex\">\n          {/* \n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"/leaderboard\">LeaderBoard</Link>\n          </li>\n          <li>\n            <Link to=\"/game\">Game</Link>\n          </li>\n        </ul>\n      </nav> */\n          }\n\n          {/* A <Switch> looks through its children <Route>s and\n          renders the first one that matches the current URL. */}\n          <Switch>\n            <Route path=\"/leaderboard\">\n              <LeaderBoardContainer />\n            </Route>\n            <Route path=\"/play\">\n              <GameContainer />\n            </Route>\n            <Route path=\"/\">\n              <HomeContainer />\n            </Route>\n          </Switch>\n        </section>\n      </Router>\n    );\n  }\n\n}\n\nexport default  App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\nserviceWorker.register();\n"],"sourceRoot":""}